2026-01-15 03:01:00 INFO  homeplanner.day_change_scheduler Checking for new day and performing task recalculation if needed
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [generated in 0.00052s] ('last_task_update', 1, 0)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [generated in 0.00042s] ()
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [cached since 0.009466s ago] ('last_task_update', 1, 0)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine UPDATE app_metadata SET value=?, updated_at=? WHERE app_metadata."key" = ?
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [generated in 0.00046s] ('2026-01-15 03:01:00.062352', '2026-01-15 03:01:00.066007', 'last_task_update')
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 03:01:00 INFO  homeplanner.day_change_scheduler Day change processed: tasks recalculated and clients notified for 2026-01-15
2026-01-15 03:01:00 DEBUG homeplanner.day_change_scheduler Waiting 86400 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 03:01:00 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "day_changed", "new_day": "2026-01-15", "timestamp": "2026-01-15T03:01:00.106473"}
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [cached since 0.06758s ago] ('last_task_update', 1, 0)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [cached since 0.07189s ago] ('last_task_update', 1, 0)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [cached since 0.07424s ago] ('last_task_update', 1, 0)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [cached since 0.07879s ago] ('last_task_update', 1, 0)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 03:01:00 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 03:01:00 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 03:01:00 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 03:01:00 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 03:01:00 INFO  homeplanner.users Starting query for all users
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [cached since 0.08708s ago] ('last_task_update', 1, 0)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [generated in 0.00033s] ()
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [generated in 0.00028s] ()
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [cached since 0.09412s ago] ('last_task_update', 1, 0)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [generated in 0.00151s] ()
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [cached since 0.01355s ago] ()
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [generated in 0.00058s] (2, 1)
2026-01-15 03:01:00 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 03:01:00 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 03:01:00 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [generated in 0.00186s] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine [cached since 0.006681s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 03:01:00 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 03:01:00 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 03:01:00 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 03:01:00 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 03:01:00 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 03:01:00 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 03:01:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:10:01 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 08:10:01 INFO  homeplanner.system uvicorn level: 10
2026-01-15 08:10:01 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 08:10:01 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 08:10:01 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 08:10:01 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 08:10:01 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 08:10:01 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 08:10:01 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 08:10:01 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 08:10:01 INFO  homeplanner.system HTTP mode (SSL not configured)
2026-01-15 08:10:39 INFO  homeplanner.realtime WS disconnect: id=140602184614288, total=0
2026-01-15 08:10:39 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 08:10:48 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 08:10:48 INFO  homeplanner.system uvicorn level: 10
2026-01-15 08:10:48 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 08:10:48 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 08:10:48 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 08:10:48 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 08:10:48 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 08:10:48 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 08:10:48 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 08:10:48 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 08:10:48 INFO  homeplanner.system HTTP mode (SSL not configured)
2026-01-15 08:10:49 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 08:10:49 INFO  homeplanner.system uvicorn level: 10
2026-01-15 08:10:49 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 08:10:49 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 08:10:49 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 08:10:49 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 08:10:49 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 08:10:49 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 08:10:49 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 08:10:49 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 08:10:49 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 08:10:49 INFO  homeplanner.database Initializing database tables...
2026-01-15 08:10:49 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:10:49 INFO  homeplanner.database Database tables created successfully
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 08:10:49 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:10:49 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 08:10:49 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 08:10:49 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 08:10:49 DEBUG homeplanner.day_change_scheduler Waiting 67810 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 08:10:50 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 08:10:50 INFO  homeplanner.realtime WS connect: id=139901447488528 host=192.168.1.2 port=54692 total=1
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [generated in 0.00050s] ('last_task_update', 1, 0)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:31 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 6 operations
2026-01-15 08:11:31 INFO  homeplanner.tasks HTTP sync-queue: 6 operations
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [cached since 0.0105s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:31 INFO  homeplanner.tasks sync-queue: processing 6 operations
2026-01-15 08:11:31 INFO  homeplanner.tasks sync-queue: processing operation 1/6: TaskOperationType.COMPLETE for task 37 with timestamp 2026-01-14 19:46:17.939000+00:00
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [generated in 0.00035s] (37, 1, 0)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [generated in 0.00037s] (37,)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [generated in 0.00031s] (1, '2026-01-14 19:46:17.939000', 37)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [generated in 0.00028s] (37,)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [generated in 0.00029s] (37,)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [generated in 0.00034s] (37, 'CONFIRMED', '2026-01-15 08:11:31.896433', '2026-01-14 09:00:00.000000', None, None)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [generated in 0.00029s] (56,)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [generated in 0.00029s] (37,)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [cached since 0.04101s ago] (37,)
2026-01-15 08:11:31 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 37, 'task': {'title': 'Daily Recurring Task', 'description': 'A recurring task every day', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 1, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 37, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.132344', 'updated_at': '2026-01-14T19:46:17.939000', 'readable_config': 'в 09:00 каждый день', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 08:11:31 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 37, "task": {"title": "Daily Recurring Task", "description": "A recurring task every day", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 1, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 37, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.132344", "updated_at": "2026-01-14T19:46:17.939000", "readable_config": "в 09:00 каждый день", "assigned_user_ids": [], "assignees": []}}
2026-01-15 08:11:31 INFO  homeplanner.tasks sync-queue: processing operation 2/6: TaskOperationType.COMPLETE for task 37 with timestamp 2026-01-14 19:46:18.064000+00:00
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [cached since 0.1052s ago] (37, 1, 0)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [cached since 0.1014s ago] (37,)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [generated in 0.00029s] ('2026-01-14 19:46:18.064000', 37)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [cached since 0.1304s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [cached since 0.08864s ago] (37,)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [cached since 0.08813s ago] (37,)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine [cached since 0.08761s ago] (37, 'CONFIRMED', '2026-01-15 08:11:31.984718', '2026-01-14 09:00:00.000000', None, None)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:31 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.1816s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.09148s ago] (57,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.0918s ago] (37,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.1332s ago] (37,)
2026-01-15 08:11:32 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 37, 'task': {'title': 'Daily Recurring Task', 'description': 'A recurring task every day', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 1, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 37, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.132344', 'updated_at': '2026-01-14T19:46:18.064000', 'readable_config': 'в 09:00 каждый день', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2211s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 37, "task": {"title": "Daily Recurring Task", "description": "A recurring task every day", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 1, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 37, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.132344", "updated_at": "2026-01-14T19:46:18.064000", "readable_config": "в 09:00 каждый день", "assigned_user_ids": [], "assignees": []}}
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2297s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.tasks sync-queue: processing operation 3/6: TaskOperationType.COMPLETE for task 36 with timestamp 2026-01-14 19:46:19.572000+00:00
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2224s ago] (36, 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2232s ago] (36,)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:32 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2522s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2259s ago] (1, '2026-01-14 19:46:19.572000', 36)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [generated in 0.00029s] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2593s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [generated in 0.00381s] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [generated in 0.00282s] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2677s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2225s ago] (36,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2212s ago] (36,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.04074s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2256s ago] (36, 'CONFIRMED', '2026-01-15 08:11:32.122723', '2026-01-14 09:00:00.000000', None, None)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [generated in 0.00234s] (2, 1)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.05437s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.293s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:32 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:32 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3016s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3249s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2486s ago] (58,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2477s ago] (36,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2882s ago] (36,)
2026-01-15 08:11:32 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 36, 'task': {'title': 'Test Task Today', 'description': 'A test task for today', 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 36, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.008773', 'updated_at': '2026-01-14T19:46:19.572000', 'readable_config': '14 января в 09:00', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 36, "task": {"title": "Test Task Today", "description": "A test task for today", "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 36, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.008773", "updated_at": "2026-01-14T19:46:19.572000", "readable_config": "14 января в 09:00", "assigned_user_ids": [], "assignees": []}}
2026-01-15 08:11:32 INFO  homeplanner.tasks sync-queue: processing operation 4/6: TaskOperationType.COMPLETE for task 19 with timestamp 2026-01-14 19:46:20.082000+00:00
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3731s ago] (19, 1, 0)
2026-01-15 08:11:32 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3707s ago] (19,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.1319s ago] ()
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3959s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3734s ago] (1, '2026-01-14 19:46:20.082000', 19)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.09649s ago] (2, 1)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.404s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.1583s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:32 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:32 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4143s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4147s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3749s ago] (19,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3736s ago] (19,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.1923s ago] ()
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3776s ago] (19, 'CONFIRMED', '2026-01-15 08:11:32.272061', '2026-01-14 09:00:00.000000', None, None)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.46s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4424s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4652s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2074s ago] ()
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3849s ago] (59,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3839s ago] (19,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:32 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4288s ago] (19,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2464s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 19, 'task': {'title': 'Test Task 19 (Day 0, Type recurring)', 'description': 'Test task for day 0, type recurring', 'task_type': 'recurring', 'recurrence_type': 'weekly', 'recurrence_interval': 8, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 19, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:29.419518', 'updated_at': '2026-01-14T19:46:20.082000', 'readable_config': 'раз в 8 недели в среда в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5107s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4908s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2099s ago] (2, 1)
2026-01-15 08:11:32 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 19, "task": {"title": "Test Task 19 (Day 0, Type recurring)", "description": "Test task for day 0, type recurring", "task_type": "recurring", "recurrence_type": "weekly", "recurrence_interval": 8, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 19, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:29.419518", "updated_at": "2026-01-14T19:46:20.082000", "readable_config": "раз в 8 недели в среда в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:11:32 INFO  homeplanner.tasks sync-queue: processing operation 5/6: TaskOperationType.COMPLETE for task 13 with timestamp 2026-01-14 19:46:20.087000+00:00
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5018s ago] (13, 1, 0)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5204s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4999s ago] (13,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.2649s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4995s ago] (1, '2026-01-14 19:46:20.087000', 13)
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5306s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5163s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:32 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4963s ago] (13,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4941s ago] (13,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4923s ago] (13, 'CONFIRMED', '2026-01-15 08:11:32.390171', '2026-01-13 09:00:00.000000', None, None)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4927s ago] (60,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4917s ago] (13,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5321s ago] (13,)
2026-01-15 08:11:32 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 13, 'task': {'title': 'Test Task 13 (Day -1, Type interval)', 'description': 'Test task for day -1, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 6, 'reminder_time': '2026-01-13T09:00:00', 'alarm': True, 'group_id': None, 'id': 13, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.957809', 'updated_at': '2026-01-14T19:46:20.087000', 'readable_config': 'раз в 6 дня в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 13, "task": {"title": "Test Task 13 (Day -1, Type interval)", "description": "Test task for day -1, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 6, "reminder_time": "2026-01-13T09:00:00", "alarm": true, "group_id": null, "id": 13, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.957809", "updated_at": "2026-01-14T19:46:20.087000", "readable_config": "раз в 6 дня в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:11:32 INFO  homeplanner.tasks sync-queue: processing operation 6/6: TaskOperationType.COMPLETE for task 8 with timestamp 2026-01-14 19:46:20.390000+00:00
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.6025s ago] (8, 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.6221s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.6002s ago] (8,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.3689s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.601s ago] (1, '2026-01-14 19:46:20.390000', 8)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.6273s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.6319s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5885s ago] (8,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5862s ago] (8,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5843s ago] (8, 'CONFIRMED', '2026-01-15 08:11:32.482213', '2026-01-12 09:00:00.000000', None, None)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5845s ago] (61,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5835s ago] (8,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.624s ago] (8,)
2026-01-15 08:11:32 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 8, 'task': {'title': 'Test Task 8 (Day -2, Type interval)', 'description': 'Test task for day -2, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 10, 'reminder_time': '2026-01-12T09:00:00', 'alarm': True, 'group_id': None, 'id': 8, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.006161', 'updated_at': '2026-01-14T19:46:20.390000', 'readable_config': 'раз в 10 дней в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 8, "task": {"title": "Test Task 8 (Day -2, Type interval)", "description": "Test task for day -2, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 10, "reminder_time": "2026-01-12T09:00:00", "alarm": true, "group_id": null, "id": 8, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.006161", "updated_at": "2026-01-14T19:46:20.390000", "readable_config": "раз в 10 дней в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7149s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7207s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:32 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4663s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4654s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7255s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4262s ago] (2, 1)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 6 operations
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP sync-queue: 6 operations
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7367s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7354s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.482s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7412s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  homeplanner.tasks sync-queue: processing 6 operations
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.486s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7195s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  homeplanner.tasks sync-queue: processing operation 1/6: TaskOperationType.COMPLETE for task 37 with timestamp 2026-01-14 19:46:17.939000+00:00
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.4893s ago] ()
2026-01-15 08:11:32 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:32 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7523s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.735s ago] (37, 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7358s ago] (37,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.6421s ago] ('2026-01-14 19:46:17.939000', 37)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5136s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7702s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7504s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7509s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:32 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5199s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7304s ago] (37,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7282s ago] (37,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7263s ago] (37, 'CONFIRMED', '2026-01-15 08:11:32.624206', '2026-01-14 09:00:00.000000', None, None)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8153s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7263s ago] (62,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7254s ago] (37,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7661s ago] (37,)
2026-01-15 08:11:32 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 37, 'task': {'title': 'Daily Recurring Task', 'description': 'A recurring task every day', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 1, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 37, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.132344', 'updated_at': '2026-01-14T19:46:17.939000', 'readable_config': 'в 09:00 каждый день', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 37, "task": {"title": "Daily Recurring Task", "description": "A recurring task every day", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 1, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 37, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.132344", "updated_at": "2026-01-14T19:46:17.939000", "readable_config": "в 09:00 каждый день", "assigned_user_ids": [], "assignees": []}}
2026-01-15 08:11:32 INFO  homeplanner.tasks sync-queue: processing operation 2/6: TaskOperationType.COMPLETE for task 37 with timestamp 2026-01-14 19:46:18.064000+00:00
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8363s ago] (37, 1, 0)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8551s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8332s ago] (37,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.599s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.733s ago] ('2026-01-14 19:46:18.064000', 37)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8615s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.5603s ago] (2, 1)
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8446s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8277s ago] (37,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8254s ago] (37,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8234s ago] (37, 'CONFIRMED', '2026-01-15 08:11:32.721298', '2026-01-14 09:00:00.000000', None, None)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8223s ago] (63,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8212s ago] (37,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8617s ago] (37,)
2026-01-15 08:11:32 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 37, 'task': {'title': 'Daily Recurring Task', 'description': 'A recurring task every day', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 1, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 37, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.132344', 'updated_at': '2026-01-14T19:46:18.064000', 'readable_config': 'в 09:00 каждый день', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 37, "task": {"title": "Daily Recurring Task", "description": "A recurring task every day", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 1, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 37, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.132344", "updated_at": "2026-01-14T19:46:18.064000", "readable_config": "в 09:00 каждый день", "assigned_user_ids": [], "assignees": []}}
2026-01-15 08:11:32 INFO  homeplanner.tasks sync-queue: processing operation 3/6: TaskOperationType.COMPLETE for task 36 with timestamp 2026-01-14 19:46:19.572000+00:00
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9285s ago] (36, 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.6955s ago] ()
2026-01-15 08:11:32 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9317s ago] (36,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9537s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:32 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8327s ago] ('2026-01-14 19:46:19.572000', 36)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9592s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8958s ago] (36,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9704s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9709s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9716s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8975s ago] (36,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7181s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9801s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8987s ago] (36, 'CONFIRMED', '2026-01-15 08:11:32.793964', '2026-01-14 09:00:00.000000', None, None)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7204s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7306s ago] ()
2026-01-15 08:11:32 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:32 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7304s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9709s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9737s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.919s ago] (64,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.918s ago] (36,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9587s ago] (36,)
2026-01-15 08:11:32 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 36, 'task': {'title': 'Test Task Today', 'description': 'A test task for today', 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 36, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.008773', 'updated_at': '2026-01-14T19:46:19.572000', 'readable_config': '14 января в 09:00', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 08:11:32 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 36, "task": {"title": "Test Task Today", "description": "A test task for today", "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 36, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.008773", "updated_at": "2026-01-14T19:46:19.572000", "readable_config": "14 января в 09:00", "assigned_user_ids": [], "assignees": []}}
2026-01-15 08:11:32 INFO  homeplanner.tasks sync-queue: processing operation 4/6: TaskOperationType.COMPLETE for task 19 with timestamp 2026-01-14 19:46:20.082000+00:00
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.022s ago] (19, 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.019s ago] (19,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9185s ago] ('2026-01-14 19:46:20.082000', 19)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9761s ago] (19,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.7454s ago] (2, 1)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.052s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9779s ago] (19,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9784s ago] (19, 'CONFIRMED', '2026-01-15 08:11:32.875813', '2026-01-14 09:00:00.000000', None, None)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8066s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.061s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:32 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:32 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9897s ago] (65,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9887s ago] (19,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.029s ago] (19,)
2026-01-15 08:11:32 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 19, 'task': {'title': 'Test Task 19 (Day 0, Type recurring)', 'description': 'Test task for day 0, type recurring', 'task_type': 'recurring', 'recurrence_type': 'weekly', 'recurrence_interval': 8, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 19, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:29.419518', 'updated_at': '2026-01-14T19:46:20.082000', 'readable_config': 'раз в 8 недели в среда в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 19, "task": {"title": "Test Task 19 (Day 0, Type recurring)", "description": "Test task for day 0, type recurring", "task_type": "recurring", "recurrence_type": "weekly", "recurrence_interval": 8, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 19, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:29.419518", "updated_at": "2026-01-14T19:46:20.082000", "readable_config": "раз в 8 недели в среда в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:11:32 INFO  homeplanner.tasks sync-queue: processing operation 5/6: TaskOperationType.COMPLETE for task 13 with timestamp 2026-01-14 19:46:20.087000+00:00
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.116s ago] (13, 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.137s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8832s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.116s ago] (13,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.14s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.017s ago] ('2026-01-14 19:46:20.087000', 13)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.144s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.146s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:32 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:32 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.079s ago] (13,)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:32 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.158s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.904s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.082s ago] (13,)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9002s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.162s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.904s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.084s ago] (13, 'CONFIRMED', '2026-01-15 08:11:32.981806', '2026-01-13 09:00:00.000000', None, None)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.9093s ago] ()
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 0.8647s ago] (2, 1)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.149s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.152s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:32 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:32 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:32 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:32 INFO  sqlalchemy.engine.Engine [cached since 1.18s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.095s ago] (66,)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.094s ago] (13,)
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.14s ago] (13,)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:33 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 13, 'task': {'title': 'Test Task 13 (Day -1, Type interval)', 'description': 'Test task for day -1, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 6, 'reminder_time': '2026-01-13T09:00:00', 'alarm': True, 'group_id': None, 'id': 13, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.957809', 'updated_at': '2026-01-14T19:46:20.087000', 'readable_config': 'раз в 6 дня в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:11:33 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:33 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 13, "task": {"title": "Test Task 13 (Day -1, Type interval)", "description": "Test task for day -1, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 6, "reminder_time": "2026-01-13T09:00:00", "alarm": true, "group_id": null, "id": 13, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.957809", "updated_at": "2026-01-14T19:46:20.087000", "readable_config": "раз в 6 дня в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:11:33 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:33 INFO  homeplanner.tasks sync-queue: processing operation 6/6: TaskOperationType.COMPLETE for task 8 with timestamp 2026-01-14 19:46:20.390000+00:00
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.211s ago] (8, 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 0.9668s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.229s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.215s ago] (8,)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 0.9339s ago] (2, 1)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.238s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.114s ago] ('2026-01-14 19:46:20.390000', 8)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 0.9933s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.246s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:33 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:33 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.18s ago] (8,)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.254s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 0.997s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.178s ago] (8,)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.179s ago] (8, 'CONFIRMED', '2026-01-15 08:11:33.076238', '2026-01-12 09:00:00.000000', None, None)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.259s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:33 INFO  homeplanner.users Starting query for simple users
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.248s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.274s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [generated in 0.00163s] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.275s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.187s ago] (67,)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.186s ago] (8,)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.227s ago] (8,)
2026-01-15 08:11:33 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 8, 'task': {'title': 'Test Task 8 (Day -2, Type interval)', 'description': 'Test task for day -2, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 10, 'reminder_time': '2026-01-12T09:00:00', 'alarm': True, 'group_id': None, 'id': 8, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.006161', 'updated_at': '2026-01-14T19:46:20.390000', 'readable_config': 'раз в 10 дней в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:33 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 08:11:33 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.055s ago] ()
2026-01-15 08:11:33 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 8, "task": {"title": "Test Task 8 (Day -2, Type interval)", "description": "Test task for day -2, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 10, "reminder_time": "2026-01-12T09:00:00", "alarm": true, "group_id": null, "id": 8, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.006161", "updated_at": "2026-01-14T19:46:20.390000", "readable_config": "раз в 10 дней в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.317s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:33 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.067s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.067s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.308s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.33s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.03s ago] (2, 1)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.337s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.092s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.349s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.327s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.094s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:33 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:33 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.369s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.35s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.381s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.386s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:33 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.132s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.13s ago] ()
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.095s ago] (2, 1)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.401s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.382s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.155s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.412s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:33 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:33 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.425s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.428s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.432s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.173s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.437s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.419s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 08:11:33 INFO  homeplanner.users Starting query for simple users
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 08:11:33 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 0.1739s ago] ()
2026-01-15 08:11:33 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.448s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:33 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.198s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.196s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.163s ago] (2, 1)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.468s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.451s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:33 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.482s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.227s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.486s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:11:33 INFO  homeplanner.users Starting query for all users
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.231s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.195s ago] (2, 1)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.495s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.476s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:11:33 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.504s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:33 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.252s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.5s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.524s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.532s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.276s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.535s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.54s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.521s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.287s ago] ()
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.54s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.568s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.573s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.316s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.554s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.592s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:33 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.595s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.338s ago] ()
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine [cached since 1.576s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:11:33 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:11:33 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:11:39 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:39 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:11:39 INFO  sqlalchemy.engine.Engine [cached since 7.522s ago] ('last_task_update', 1, 0)
2026-01-15 08:11:39 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:11:39 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 08:11:39 INFO  homeplanner.users Starting query for simple users
2026-01-15 08:11:39 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:11:39 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 08:11:39 INFO  sqlalchemy.engine.Engine [cached since 6.253s ago] ()
2026-01-15 08:11:39 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 08:11:39 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 08:11:39 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:54 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-15 08:31:54 INFO  homeplanner.realtime WS connect: id=139901446917168 host=192.168.1.39 port=48128 total=2
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:54 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 3 operations
2026-01-15 08:31:54 INFO  homeplanner.tasks HTTP sync-queue: 3 operations
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:54 INFO  homeplanner.tasks sync-queue: processing 3 operations
2026-01-15 08:31:54 INFO  homeplanner.tasks sync-queue: processing operation 1/3: TaskOperationType.COMPLETE for task 39 with timestamp 2026-01-15 05:11:42.458000+00:00
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39, 1, 0)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39,)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (1, '2026-01-15 05:11:42.458000', 39)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39,)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39,)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39, 'CONFIRMED', '2026-01-15 08:31:54.901234', '2026-01-15 09:00:00.000000', None, None)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (68,)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39,)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39,)
2026-01-15 08:31:54 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 39, 'task': {'title': 'Future One-time Task', 'description': 'A task in the future', 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2026-01-15T09:00:00', 'alarm': False, 'group_id': None, 'id': 39, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.293955', 'updated_at': '2026-01-15T05:11:42.458000', 'readable_config': '15 января в 09:00', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 08:31:54 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 39, "task": {"title": "Future One-time Task", "description": "A task in the future", "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2026-01-15T09:00:00", "alarm": false, "group_id": null, "id": 39, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.293955", "updated_at": "2026-01-15T05:11:42.458000", "readable_config": "15 января в 09:00", "assigned_user_ids": [], "assignees": []}}
2026-01-15 08:31:54 INFO  homeplanner.tasks sync-queue: processing operation 2/3: TaskOperationType.COMPLETE for task 22 with timestamp 2026-01-15 05:11:42.675000+00:00
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22, 1, 0)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22,)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (1, '2026-01-15 05:11:42.675000', 22)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22,)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22,)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22, 'CONFIRMED', '2026-01-15 08:31:54.973341', '2026-01-15 09:00:00.000000', None, None)
2026-01-15 08:31:54 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (69,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22,)
2026-01-15 08:31:55 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 22, 'task': {'title': 'Test Task 22 (Day 1, Type one_time)', 'description': 'Test task for day 1, type one_time', 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2026-01-15T09:00:00', 'alarm': False, 'group_id': None, 'id': 22, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:29.640993', 'updated_at': '2026-01-15T05:11:42.675000', 'readable_config': '15 января в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 22, "task": {"title": "Test Task 22 (Day 1, Type one_time)", "description": "Test task for day 1, type one_time", "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2026-01-15T09:00:00", "alarm": false, "group_id": null, "id": 22, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:29.640993", "updated_at": "2026-01-15T05:11:42.675000", "readable_config": "15 января в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.tasks sync-queue: processing operation 3/3: TaskOperationType.COMPLETE for task 8 with timestamp 2026-01-15 05:11:43.096000+00:00
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  homeplanner.users Starting query for all users
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (8, 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (8,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (2, 1)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('2026-01-15 05:11:43.096000', 8)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:31:55 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:31:55 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (8,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (8,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (8, 'CONFIRMED', '2026-01-15 08:31:55.126804', '2026-01-12 09:00:00.000000', None, None)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 3 operations
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:31:55 INFO  homeplanner.users Starting query for all users
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP sync-queue: 3 operations
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (70,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (8,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (8,)
2026-01-15 08:31:55 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 8, 'task': {'title': 'Test Task 8 (Day -2, Type interval)', 'description': 'Test task for day -2, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 10, 'reminder_time': '2026-01-12T09:00:00', 'alarm': True, 'group_id': None, 'id': 8, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.006161', 'updated_at': '2026-01-15T05:11:43.096000', 'readable_config': 'раз в 10 дней в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:31:55 INFO  homeplanner.tasks sync-queue: processing 3 operations
2026-01-15 08:31:55 INFO  homeplanner.tasks sync-queue: processing operation 1/3: TaskOperationType.COMPLETE for task 39 with timestamp 2026-01-15 05:11:42.458000+00:00
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 8, "task": {"title": "Test Task 8 (Day -2, Type interval)", "description": "Test task for day -2, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 10, "reminder_time": "2026-01-12T09:00:00", "alarm": true, "group_id": null, "id": 8, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.006161", "updated_at": "2026-01-15T05:11:43.096000", "readable_config": "раз в 10 дней в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39, 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (2, 1)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39,)
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('2026-01-15 05:11:42.458000', 39)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39, 'CONFIRMED', '2026-01-15 08:31:55.232398', '2026-01-15 09:00:00.000000', None, None)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  homeplanner.users Starting query for all users
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (71,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (39,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 39, 'task': {'title': 'Future One-time Task', 'description': 'A task in the future', 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2026-01-15T09:00:00', 'alarm': False, 'group_id': None, 'id': 39, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.293955', 'updated_at': '2026-01-15T05:11:42.458000', 'readable_config': '15 января в 09:00', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 39, "task": {"title": "Future One-time Task", "description": "A task in the future", "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2026-01-15T09:00:00", "alarm": false, "group_id": null, "id": 39, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.293955", "updated_at": "2026-01-15T05:11:42.458000", "readable_config": "15 января в 09:00", "assigned_user_ids": [], "assignees": []}}
2026-01-15 08:31:55 INFO  homeplanner.tasks sync-queue: processing operation 2/3: TaskOperationType.COMPLETE for task 22 with timestamp 2026-01-15 05:11:42.675000+00:00
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22, 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (2, 1)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('2026-01-15 05:11:42.675000', 22)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:31:55 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:31:55 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:31:55 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22, 'CONFIRMED', '2026-01-15 08:31:55.326683', '2026-01-15 09:00:00.000000', None, None)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (72,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (22,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 22, 'task': {'title': 'Test Task 22 (Day 1, Type one_time)', 'description': 'Test task for day 1, type one_time', 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2026-01-15T09:00:00', 'alarm': False, 'group_id': None, 'id': 22, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:29.640993', 'updated_at': '2026-01-15T05:11:42.675000', 'readable_config': '15 января в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 22, "task": {"title": "Test Task 22 (Day 1, Type one_time)", "description": "Test task for day 1, type one_time", "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2026-01-15T09:00:00", "alarm": false, "group_id": null, "id": 22, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:29.640993", "updated_at": "2026-01-15T05:11:42.675000", "readable_config": "15 января в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:31:55 INFO  homeplanner.tasks sync-queue: processing operation 3/3: TaskOperationType.COMPLETE for task 8 with timestamp 2026-01-15 05:11:43.096000+00:00
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:31:55 INFO  homeplanner.users Starting query for all users
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (8, 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (8,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (2, 1)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ('2026-01-15 05:11:43.096000', 8)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:31:55 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:31:55 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (8,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (8,)
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (8, 'CONFIRMED', '2026-01-15 08:31:55.430728', '2026-01-12 09:00:00.000000', None, None)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (73,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (8,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:31:55 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 08:31:55 INFO  homeplanner.users Starting query for simple users
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (8,)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1222s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 8, 'task': {'title': 'Test Task 8 (Day -2, Type interval)', 'description': 'Test task for day -2, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 10, 'reminder_time': '2026-01-12T09:00:00', 'alarm': True, 'group_id': None, 'id': 8, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.006161', 'updated_at': '2026-01-15T05:11:43.096000', 'readable_config': 'раз в 10 дней в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 08:31:55 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 8, "task": {"title": "Test Task 8 (Day -2, Type interval)", "description": "Test task for day -2, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 10, "reminder_time": "2026-01-12T09:00:00", "alarm": true, "group_id": null, "id": 8, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.006161", "updated_at": "2026-01-15T05:11:43.096000", "readable_config": "раз в 10 дней в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:31:55 INFO  homeplanner.users Starting query for all users
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (2, 1)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:31:55 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:31:55 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:31:55 INFO  homeplanner.users Starting query for all users
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] (2, 1)
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:31:55 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ()
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ()
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ()
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] ('last_task_update', 1, 0)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1224s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:31:55 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 08:31:55 INFO  homeplanner.users Starting query for simple users
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine [cached since 1223s ago] ()
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:31:55 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 08:31:55 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:31:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:31:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:00 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:00 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:00 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:00 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.UNCOMPLETE for task 13 with timestamp 2026-01-15 05:32:01.665000+00:00
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (13, 1, 0)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (13,)
2026-01-15 08:32:00 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.INTERVAL, completed=True, enabled=True, reminder_time=2026-01-13 09:00:00
2026-01-15 08:32:00 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-15 05:32:01.665000+00:00
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (0, '2026-01-15 05:32:01.665000', 13)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (13,)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (13,)
2026-01-15 08:32:00 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-13 09:00:00
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (13, 'UNCONFIRMED', '2026-01-15 08:32:00.949315', '2026-01-13 09:00:00.000000', None, None)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (74,)
2026-01-15 08:32:00 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=13
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (13,)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (13,)
2026-01-15 08:32:00 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 13, 'task': {'title': 'Test Task 13 (Day -1, Type interval)', 'description': 'Test task for day -1, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 6, 'reminder_time': '2026-01-13T09:00:00', 'alarm': True, 'group_id': None, 'id': 13, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.957809', 'updated_at': '2026-01-15T05:32:01.665000', 'readable_config': 'раз в 6 дня в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:00 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "uncompleted", "task_id": 13, "task": {"title": "Test Task 13 (Day -1, Type interval)", "description": "Test task for day -1, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 6, "reminder_time": "2026-01-13T09:00:00", "alarm": true, "group_id": null, "id": 13, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.957809", "updated_at": "2026-01-15T05:32:01.665000", "readable_config": "раз в 6 дня в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ()
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:00 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:00 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:01 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:01 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:01 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:01 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ()
2026-01-15 08:32:01 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ()
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (2, 1)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ()
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] ()
2026-01-15 08:32:01 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:01 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:01 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine [cached since 1229s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:01 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:01 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:01 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:01 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:01 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:01 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:01 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:09 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:09 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:10 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:10 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:10 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:10 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.COMPLETE for task 1 with timestamp 2026-01-15 05:32:10.818000+00:00
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (1, 1, 0)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (1,)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (1, '2026-01-15 05:32:10.818000', 1)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (1,)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (1,)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (1, 'CONFIRMED', '2026-01-15 08:32:10.062322', '2026-01-11 09:00:00.000000', None, None)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (75,)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (1,)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (1,)
2026-01-15 08:32:10 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 1, 'task': {'title': 'Test Task 1 (Day -3, Type recurring)', 'description': 'Test task for day -3, type recurring', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 9, 'interval_days': None, 'reminder_time': '2026-01-11T09:00:00', 'alarm': True, 'group_id': None, 'id': 1, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.397229', 'updated_at': '2026-01-15T05:32:10.818000', 'readable_config': 'в 09:00 каждые 9 дней', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:10 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 1, "task": {"title": "Test Task 1 (Day -3, Type recurring)", "description": "Test task for day -3, type recurring", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 9, "interval_days": null, "reminder_time": "2026-01-11T09:00:00", "alarm": true, "group_id": null, "id": 1, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.397229", "updated_at": "2026-01-15T05:32:10.818000", "readable_config": "в 09:00 каждые 9 дней", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ()
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:10 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:10 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:10 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:10 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:10 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ()
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:10 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ()
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (2, 1)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ()
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] ()
2026-01-15 08:32:10 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:10 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:10 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine [cached since 1238s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:10 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:10 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:10 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:10 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:10 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:10 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:10 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:11 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:11 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:11 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:11 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.COMPLETE for task 6 with timestamp 2026-01-15 05:32:12.318000+00:00
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (6, 1, 0)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (6,)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (1, '2026-01-15 05:32:12.318000', 6)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (6,)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (6,)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (6, 'CONFIRMED', '2026-01-15 08:32:11.658049', '2026-01-12 09:00:00.000000', None, None)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (76,)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (6,)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (6,)
2026-01-15 08:32:11 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 6, 'task': {'title': 'Test Task 6 (Day -2, Type recurring)', 'description': 'Test task for day -2, type recurring', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 9, 'interval_days': None, 'reminder_time': '2026-01-12T09:00:00', 'alarm': False, 'group_id': None, 'id': 6, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.846429', 'updated_at': '2026-01-15T05:32:12.318000', 'readable_config': 'в 09:00 каждые 9 дней', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:11 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 6, "task": {"title": "Test Task 6 (Day -2, Type recurring)", "description": "Test task for day -2, type recurring", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 9, "interval_days": null, "reminder_time": "2026-01-12T09:00:00", "alarm": false, "group_id": null, "id": 6, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.846429", "updated_at": "2026-01-15T05:32:12.318000", "readable_config": "в 09:00 каждые 9 дней", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ()
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:11 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:11 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:11 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:11 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:11 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:11 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ()
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ()
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (2, 1)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ()
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ()
2026-01-15 08:32:11 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:11 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:11 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:11 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:11 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:11 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:11 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:11 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:11 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:11 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:12 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:12 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:12 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:12 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.COMPLETE for task 4 with timestamp 2026-01-15 05:32:12.907000+00:00
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (4, 1, 0)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (4,)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (1, '2026-01-15 05:32:12.907000', 4)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (4,)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (4,)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (4, 'CONFIRMED', '2026-01-15 08:32:12.088321', '2026-01-11 09:00:00.000000', None, None)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (77,)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (4,)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (4,)
2026-01-15 08:32:12 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 4, 'task': {'title': 'Test Task 4 (Day -3, Type one_time)', 'description': 'Test task for day -3, type one_time', 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2026-01-11T09:00:00', 'alarm': True, 'group_id': None, 'id': 4, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.684145', 'updated_at': '2026-01-15T05:32:12.907000', 'readable_config': '11 января в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:12 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 4, "task": {"title": "Test Task 4 (Day -3, Type one_time)", "description": "Test task for day -3, type one_time", "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2026-01-11T09:00:00", "alarm": true, "group_id": null, "id": 4, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.684145", "updated_at": "2026-01-15T05:32:12.907000", "readable_config": "11 января в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ()
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:12 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:12 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:12 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:12 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ()
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ()
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ()
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] ()
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (2, 1)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine [cached since 1240s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:12 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:12 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:12 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:12 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:12 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:12 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:12 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:12 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:12 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:13 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:13 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:13 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:13 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.COMPLETE for task 7 with timestamp 2026-01-15 05:32:14.477000+00:00
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (7, 1, 0)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (7,)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (1, '2026-01-15 05:32:14.477000', 7)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (7,)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (7,)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (7, 'CONFIRMED', '2026-01-15 08:32:13.734218', '2026-01-12 09:00:00.000000', None, None)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (78,)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (7,)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (7,)
2026-01-15 08:32:13 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 7, 'task': {'title': 'Test Task 7 (Day -2, Type interval)', 'description': 'Test task for day -2, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 5, 'reminder_time': '2026-01-12T09:00:00', 'alarm': False, 'group_id': None, 'id': 7, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.928264', 'updated_at': '2026-01-15T05:32:14.477000', 'readable_config': 'раз в 5 дня в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:13 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 7, "task": {"title": "Test Task 7 (Day -2, Type interval)", "description": "Test task for day -2, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 5, "reminder_time": "2026-01-12T09:00:00", "alarm": false, "group_id": null, "id": 7, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.928264", "updated_at": "2026-01-15T05:32:14.477000", "readable_config": "раз в 5 дня в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ()
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:13 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:13 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:13 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:13 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ()
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ()
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (2, 1)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ()
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] ()
2026-01-15 08:32:13 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:13 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:13 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine [cached since 1242s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:13 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:13 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:13 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:13 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:13 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:13 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:13 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:14 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:14 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:14 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:14 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.COMPLETE for task 13 with timestamp 2026-01-15 05:32:15.771000+00:00
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (13, 1, 0)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (13,)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (1, '2026-01-15 05:32:15.771000', 13)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (13,)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (13,)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (13, 'CONFIRMED', '2026-01-15 08:32:14.921149', '2026-01-13 09:00:00.000000', None, None)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (79,)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (13,)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (13,)
2026-01-15 08:32:14 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 13, 'task': {'title': 'Test Task 13 (Day -1, Type interval)', 'description': 'Test task for day -1, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 6, 'reminder_time': '2026-01-13T09:00:00', 'alarm': True, 'group_id': None, 'id': 13, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.957809', 'updated_at': '2026-01-15T05:32:15.771000', 'readable_config': 'раз в 6 дня в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:14 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 13, "task": {"title": "Test Task 13 (Day -1, Type interval)", "description": "Test task for day -1, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 6, "reminder_time": "2026-01-13T09:00:00", "alarm": true, "group_id": null, "id": 13, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.957809", "updated_at": "2026-01-15T05:32:15.771000", "readable_config": "раз в 6 дня в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ()
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:14 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:14 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:15 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ()
2026-01-15 08:32:15 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ()
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ()
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (2, 1)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] ()
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:15 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:15 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:15 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1243s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:15 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:15 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:15 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.COMPLETE for task 18 with timestamp 2026-01-15 05:32:16.585000+00:00
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (18, 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (18,)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (1, '2026-01-15 05:32:16.585000', 18)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (18,)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (18,)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (18, 'CONFIRMED', '2026-01-15 08:32:15.785328', '2026-01-14 09:00:00.000000', None, None)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (80,)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (18,)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (18,)
2026-01-15 08:32:15 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 18, 'task': {'title': 'Test Task 18 (Day 0, Type recurring)', 'description': 'Test task for day 0, type recurring', 'task_type': 'recurring', 'recurrence_type': 'weekdays', 'recurrence_interval': 2, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 18, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:29.343073', 'updated_at': '2026-01-15T05:32:16.585000', 'readable_config': 'в 09:00 каждые 2 будних дня', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:15 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 18, "task": {"title": "Test Task 18 (Day 0, Type recurring)", "description": "Test task for day 0, type recurring", "task_type": "recurring", "recurrence_type": "weekdays", "recurrence_interval": 2, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 18, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:29.343073", "updated_at": "2026-01-15T05:32:16.585000", "readable_config": "в 09:00 каждые 2 будних дня", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ()
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:15 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:15 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ()
2026-01-15 08:32:15 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ()
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ()
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (2, 1)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] ()
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine [cached since 1244s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:15 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:15 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:15 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:15 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:16 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:16 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:16 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:16 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:16 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:16 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:16 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:16 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:16 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:16 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:16 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.COMPLETE for task 38 with timestamp 2026-01-15 05:32:17.893000+00:00
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (38, 1, 0)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (38,)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (1, '2026-01-15 05:32:17.893000', 38)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (38,)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (38,)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (38, 'CONFIRMED', '2026-01-15 08:32:17.039568', '2026-01-15 09:00:00.000000', None, None)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (81,)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (38,)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (38,)
2026-01-15 08:32:17 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 38, 'task': {'title': 'Weekly Task', 'description': 'A task every week', 'task_type': 'recurring', 'recurrence_type': 'weekly', 'recurrence_interval': 1, 'interval_days': None, 'reminder_time': '2026-01-15T09:00:00', 'alarm': False, 'group_id': None, 'id': 38, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.203399', 'updated_at': '2026-01-15T05:32:17.893000', 'readable_config': 'каждый четверг в 09:00', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 08:32:17 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 38, "task": {"title": "Weekly Task", "description": "A task every week", "task_type": "recurring", "recurrence_type": "weekly", "recurrence_interval": 1, "interval_days": null, "reminder_time": "2026-01-15T09:00:00", "alarm": false, "group_id": null, "id": 38, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.203399", "updated_at": "2026-01-15T05:32:17.893000", "readable_config": "каждый четверг в 09:00", "assigned_user_ids": [], "assignees": []}}
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ()
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:17 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:17 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:17 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:17 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:17 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:17 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ()
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ()
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ()
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] ()
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (2, 1)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine [cached since 1245s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:17 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:17 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:17 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:17 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:17 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:17 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:17 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:17 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:17 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:17 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:23 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:23 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.UNCOMPLETE for task 39 with timestamp 2026-01-15 05:32:23.975000+00:00
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] (39, 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] (39,)
2026-01-15 08:32:23 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.ONE_TIME, completed=True, enabled=True, reminder_time=2026-01-15 09:00:00
2026-01-15 08:32:23 INFO  homeplanner.tasks uncomplete_task: enabled one-time task
2026-01-15 08:32:23 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-15 05:32:23.975000+00:00
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] (0, '2026-01-15 05:32:23.975000', 39)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] (39,)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] (39,)
2026-01-15 08:32:23 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-15 09:00:00
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] (39, 'UNCONFIRMED', '2026-01-15 08:32:23.315496', '2026-01-15 09:00:00.000000', None, None)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] (82,)
2026-01-15 08:32:23 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=39
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] (39,)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] (39,)
2026-01-15 08:32:23 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 39, 'task': {'title': 'Future One-time Task', 'description': 'A task in the future', 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2026-01-15T09:00:00', 'alarm': False, 'group_id': None, 'id': 39, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.293955', 'updated_at': '2026-01-15T05:32:23.975000', 'readable_config': '15 января в 09:00', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 08:32:23 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "uncompleted", "task_id": 39, "task": {"title": "Future One-time Task", "description": "A task in the future", "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2026-01-15T09:00:00", "alarm": false, "group_id": null, "id": 39, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.293955", "updated_at": "2026-01-15T05:32:23.975000", "readable_config": "15 января в 09:00", "assigned_user_ids": [], "assignees": []}}
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] ()
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:23 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:23 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:23 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:23 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] ()
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] ()
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] (2, 1)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] ()
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1251s ago] ()
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:23 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:23 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:23 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:23 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:23 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:23 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.UNCOMPLETE for task 37 with timestamp 2026-01-15 05:32:24.397000+00:00
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (37, 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (37,)
2026-01-15 08:32:23 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.RECURRING, completed=True, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-15 08:32:23 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-15 05:32:24.397000+00:00
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (0, '2026-01-15 05:32:24.397000', 37)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (37,)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (37,)
2026-01-15 08:32:23 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (37, 'UNCONFIRMED', '2026-01-15 08:32:23.750686', '2026-01-14 09:00:00.000000', None, None)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (83,)
2026-01-15 08:32:23 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=37
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (37,)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (37,)
2026-01-15 08:32:23 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 37, 'task': {'title': 'Daily Recurring Task', 'description': 'A recurring task every day', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 1, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 37, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.132344', 'updated_at': '2026-01-15T05:32:24.397000', 'readable_config': 'в 09:00 каждый день', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 08:32:23 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "uncompleted", "task_id": 37, "task": {"title": "Daily Recurring Task", "description": "A recurring task every day", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 1, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 37, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.132344", "updated_at": "2026-01-15T05:32:24.397000", "readable_config": "в 09:00 каждый день", "assigned_user_ids": [], "assignees": []}}
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ()
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:23 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:23 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ()
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ()
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (2, 1)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ()
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ()
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:23 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:23 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:23 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:23 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:23 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:24 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.UNCOMPLETE for task 19 with timestamp 2026-01-15 05:32:24.921000+00:00
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (19, 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (19,)
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.RECURRING, completed=True, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-15 05:32:24.921000+00:00
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (0, '2026-01-15 05:32:24.921000', 19)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (19,)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (19,)
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (19, 'UNCONFIRMED', '2026-01-15 08:32:24.160998', '2026-01-14 09:00:00.000000', None, None)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (84,)
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=19
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (19,)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (19,)
2026-01-15 08:32:24 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 19, 'task': {'title': 'Test Task 19 (Day 0, Type recurring)', 'description': 'Test task for day 0, type recurring', 'task_type': 'recurring', 'recurrence_type': 'weekly', 'recurrence_interval': 8, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 19, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:29.419518', 'updated_at': '2026-01-15T05:32:24.921000', 'readable_config': 'раз в 8 недели в среда в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:24 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "uncompleted", "task_id": 19, "task": {"title": "Test Task 19 (Day 0, Type recurring)", "description": "Test task for day 0, type recurring", "task_type": "recurring", "recurrence_type": "weekly", "recurrence_interval": 8, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 19, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:29.419518", "updated_at": "2026-01-15T05:32:24.921000", "readable_config": "раз в 8 недели в среда в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:24 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ()
2026-01-15 08:32:24 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (2, 1)
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:24 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:24 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:24 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1252s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 2 operations
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP sync-queue: 2 operations
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  homeplanner.tasks sync-queue: processing 2 operations
2026-01-15 08:32:24 INFO  homeplanner.tasks sync-queue: processing operation 1/2: TaskOperationType.UNCOMPLETE for task 13 with timestamp 2026-01-15 05:32:25.220000+00:00
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (13, 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (13,)
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.INTERVAL, completed=True, enabled=True, reminder_time=2026-01-13 09:00:00
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-15 05:32:25.220000+00:00
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (0, '2026-01-15 05:32:25.220000', 13)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (13,)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (13,)
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-13 09:00:00
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (13, 'UNCONFIRMED', '2026-01-15 08:32:24.566999', '2026-01-13 09:00:00.000000', None, None)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (85,)
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=13
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (13,)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (13,)
2026-01-15 08:32:24 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 13, 'task': {'title': 'Test Task 13 (Day -1, Type interval)', 'description': 'Test task for day -1, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 6, 'reminder_time': '2026-01-13T09:00:00', 'alarm': True, 'group_id': None, 'id': 13, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.957809', 'updated_at': '2026-01-15T05:32:25.220000', 'readable_config': 'раз в 6 дня в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:24 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "uncompleted", "task_id": 13, "task": {"title": "Test Task 13 (Day -1, Type interval)", "description": "Test task for day -1, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 6, "reminder_time": "2026-01-13T09:00:00", "alarm": true, "group_id": null, "id": 13, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.957809", "updated_at": "2026-01-15T05:32:25.220000", "readable_config": "раз в 6 дня в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:24 INFO  homeplanner.tasks sync-queue: processing operation 2/2: TaskOperationType.UNCOMPLETE for task 7 with timestamp 2026-01-15 05:32:25.410000+00:00
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (7, 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (7,)
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.INTERVAL, completed=True, enabled=True, reminder_time=2026-01-12 09:00:00
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-15 05:32:25.410000+00:00
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (0, '2026-01-15 05:32:25.410000', 7)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (7,)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (7,)
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-12 09:00:00
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (7, 'UNCONFIRMED', '2026-01-15 08:32:24.667979', '2026-01-12 09:00:00.000000', None, None)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (86,)
2026-01-15 08:32:24 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=7
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (7,)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (7,)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:24 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:24 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 7, 'task': {'title': 'Test Task 7 (Day -2, Type interval)', 'description': 'Test task for day -2, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 5, 'reminder_time': '2026-01-12T09:00:00', 'alarm': False, 'group_id': None, 'id': 7, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.928264', 'updated_at': '2026-01-15T05:32:25.410000', 'readable_config': 'раз в 5 дня в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "uncompleted", "task_id": 7, "task": {"title": "Test Task 7 (Day -2, Type interval)", "description": "Test task for day -2, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 5, "reminder_time": "2026-01-12T09:00:00", "alarm": false, "group_id": null, "id": 7, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.928264", "updated_at": "2026-01-15T05:32:25.410000", "readable_config": "раз в 5 дня в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (2, 1)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:24 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:24 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:24 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:24 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:24 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (2, 1)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:24 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:24 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:24 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:24 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 2 operations
2026-01-15 08:32:25 INFO  homeplanner.tasks HTTP sync-queue: 2 operations
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  homeplanner.tasks sync-queue: processing 2 operations
2026-01-15 08:32:25 INFO  homeplanner.tasks sync-queue: processing operation 1/2: TaskOperationType.COMPLETE for task 4 with timestamp 2026-01-15 05:32:25.831000+00:00
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (4, 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (4,)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine UPDATE tasks SET updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('2026-01-15 05:32:25.831000', 4)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (4,)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (4,)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (4, 'CONFIRMED', '2026-01-15 08:32:25.191067', '2026-01-11 09:00:00.000000', None, None)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (87,)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (4,)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (4,)
2026-01-15 08:32:25 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 4, 'task': {'title': 'Test Task 4 (Day -3, Type one_time)', 'description': 'Test task for day -3, type one_time', 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2026-01-11T09:00:00', 'alarm': True, 'group_id': None, 'id': 4, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.684145', 'updated_at': '2026-01-15T05:32:25.831000', 'readable_config': '11 января в 09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:25 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "completed", "task_id": 4, "task": {"title": "Test Task 4 (Day -3, Type one_time)", "description": "Test task for day -3, type one_time", "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2026-01-11T09:00:00", "alarm": true, "group_id": null, "id": 4, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.684145", "updated_at": "2026-01-15T05:32:25.831000", "readable_config": "11 января в 09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:25 INFO  homeplanner.tasks sync-queue: processing operation 2/2: TaskOperationType.UNCOMPLETE for task 1 with timestamp 2026-01-15 05:32:25.992000+00:00
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1, 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1,)
2026-01-15 08:32:25 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.RECURRING, completed=True, enabled=True, reminder_time=2026-01-11 09:00:00
2026-01-15 08:32:25 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-15 05:32:25.992000+00:00
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (0, '2026-01-15 05:32:25.992000', 1)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1,)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1,)
2026-01-15 08:32:25 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-11 09:00:00
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1, 'UNCONFIRMED', '2026-01-15 08:32:25.292020', '2026-01-11 09:00:00.000000', None, None)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (88,)
2026-01-15 08:32:25 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=1
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1,)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (1,)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 1, 'task': {'title': 'Test Task 1 (Day -3, Type recurring)', 'description': 'Test task for day -3, type recurring', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 9, 'interval_days': None, 'reminder_time': '2026-01-11T09:00:00', 'alarm': True, 'group_id': None, 'id': 1, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.397229', 'updated_at': '2026-01-15T05:32:25.992000', 'readable_config': 'в 09:00 каждые 9 дней', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "uncompleted", "task_id": 1, "task": {"title": "Test Task 1 (Day -3, Type recurring)", "description": "Test task for day -3, type recurring", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 9, "interval_days": null, "reminder_time": "2026-01-11T09:00:00", "alarm": true, "group_id": null, "id": 1, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.397229", "updated_at": "2026-01-15T05:32:25.992000", "readable_config": "в 09:00 каждые 9 дней", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:25 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:25 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:25 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (2, 1)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:25 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:25 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:25 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:25 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] (2, 1)
2026-01-15 08:32:25 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1253s ago] ()
2026-01-15 08:32:25 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:25 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:25 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:25 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:25 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 1 operations
2026-01-15 08:32:25 INFO  homeplanner.tasks HTTP sync-queue: 1 operations
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:25 INFO  homeplanner.tasks sync-queue: processing 1 operations
2026-01-15 08:32:25 INFO  homeplanner.tasks sync-queue: processing operation 1/1: TaskOperationType.UNCOMPLETE for task 6 with timestamp 2026-01-15 05:32:26.627000+00:00
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (6, 1, 0)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (6,)
2026-01-15 08:32:25 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.RECURRING, completed=True, enabled=True, reminder_time=2026-01-12 09:00:00
2026-01-15 08:32:25 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-15 05:32:26.627000+00:00
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (0, '2026-01-15 05:32:26.627000', 6)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (6,)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (6,)
2026-01-15 08:32:25 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-12 09:00:00
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (6, 'UNCONFIRMED', '2026-01-15 08:32:25.966122', '2026-01-12 09:00:00.000000', None, None)
2026-01-15 08:32:25 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (89,)
2026-01-15 08:32:26 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=6
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (6,)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (6,)
2026-01-15 08:32:26 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 6, 'task': {'title': 'Test Task 6 (Day -2, Type recurring)', 'description': 'Test task for day -2, type recurring', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 9, 'interval_days': None, 'reminder_time': '2026-01-12T09:00:00', 'alarm': False, 'group_id': None, 'id': 6, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.846429', 'updated_at': '2026-01-15T05:32:26.627000', 'readable_config': 'в 09:00 каждые 9 дней', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-15 08:32:26 INFO  homeplanner.realtime WS broadcast: targets=2, payload={"type": "task_update", "action": "uncompleted", "task_id": 6, "task": {"title": "Test Task 6 (Day -2, Type recurring)", "description": "Test task for day -2, type recurring", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 9, "interval_days": null, "reminder_time": "2026-01-12T09:00:00", "alarm": false, "group_id": null, "id": 6, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.846429", "updated_at": "2026-01-15T05:32:26.627000", "readable_config": "в 09:00 каждые 9 дней", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "Сергей", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ()
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:26 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:26 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:26 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:26 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-15 08:32:26 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:26 INFO  homeplanner.users Starting query for all users
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ()
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ('last_task_update', 1, 0)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ()
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ()
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] ()
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (2, 1)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:26 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-15 08:32:26 DEBUG homeplanner.users Users: [{'id': 2, 'name': 'Алёна', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': 'Сергей', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-15 08:32:26 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine [cached since 1254s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:32:26 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:32:26 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:26 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:32:26 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:32:26 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:32:26 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 13 task IDs for user 1
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:32:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:35:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:35:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:35:15 INFO  sqlalchemy.engine.Engine [cached since 1424s ago] ('last_task_update', 1, 0)
2026-01-15 08:35:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:36:07 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:36:07 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:36:07 INFO  sqlalchemy.engine.Engine [cached since 1476s ago] ('last_task_update', 1, 0)
2026-01-15 08:36:07 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine [cached since 2123s ago] ('last_task_update', 1, 0)
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 08:46:54 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 08:46:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine [cached since 2123s ago] ('last_task_update', 1, 0)
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine [generated in 0.00029s] ()
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine [cached since 2123s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 08:46:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 08:46:54 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:46:54 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 08:46:54 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 08:46:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 08:46:54 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 08:48:52 INFO  homeplanner.realtime WS disconnect: id=139901446917168, total=1
2026-01-15 21:00:07 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-15 21:00:07 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-15 21:00:07 INFO  homeplanner.realtime WS disconnect: id=139901447488528, total=0
2026-01-15 21:00:07 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:00:08 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:00:08 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:00:08 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:00:08 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:00:08 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:00:08 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:00:08 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:00:08 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:00:08 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:00:08 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:08 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:08 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:00:08 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:00:08 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:08 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:00:08 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:00:08 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:00:08 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:00:08 DEBUG homeplanner.day_change_scheduler Waiting 21651 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:00:09 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 21:00:09 INFO  homeplanner.realtime WS connect: id=140399610118864 host=192.168.1.2 port=51160 total=1
2026-01-15 21:00:12 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-15 21:00:12 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-15 21:00:12 INFO  homeplanner.realtime WS disconnect: id=140399610118864, total=0
2026-01-15 21:00:12 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:00:13 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:00:13 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:00:13 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:00:13 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:00:13 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:00:13 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:00:13 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:00:13 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:00:13 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:00:13 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:13 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:13 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:00:13 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:00:13 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:13 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:00:13 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:00:13 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:00:13 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:00:13 DEBUG homeplanner.day_change_scheduler Waiting 21646 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:00:14 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 21:00:14 INFO  homeplanner.realtime WS connect: id=140306593776336 host=192.168.1.2 port=42160 total=1
2026-01-15 21:00:17 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-15 21:00:17 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-15 21:00:17 INFO  homeplanner.realtime WS disconnect: id=140306593776336, total=0
2026-01-15 21:00:17 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:00:18 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:00:18 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:00:18 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:00:18 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:00:18 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:00:18 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:00:18 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:00:18 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:00:18 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:00:18 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:18 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:18 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:00:18 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:00:18 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:18 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:00:18 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:00:18 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:00:18 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:00:18 DEBUG homeplanner.day_change_scheduler Waiting 21642 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:00:19 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 21:00:19 INFO  homeplanner.realtime WS connect: id=140559544943312 host=192.168.1.2 port=42164 total=1
2026-01-15 21:00:20 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-15 21:00:20 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-15 21:00:20 INFO  homeplanner.realtime WS disconnect: id=140559544943312, total=0
2026-01-15 21:00:20 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:00:21 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:00:21 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:00:21 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:00:21 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:00:21 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:00:21 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:00:21 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:00:21 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:00:21 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:00:21 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:21 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:21 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:00:21 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:00:21 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:21 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:00:21 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:00:21 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:00:21 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:00:21 DEBUG homeplanner.day_change_scheduler Waiting 21638 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:00:22 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 21:00:22 INFO  homeplanner.realtime WS connect: id=140179204818256 host=192.168.1.2 port=42174 total=1
2026-01-15 21:00:24 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-15 21:00:24 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-15 21:00:24 INFO  homeplanner.realtime WS disconnect: id=140179204818256, total=0
2026-01-15 21:00:24 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:00:25 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:00:25 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:00:25 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:00:25 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:00:25 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:00:25 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:00:25 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:00:25 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:00:25 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:00:25 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:25 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:25 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:00:25 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:00:25 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:00:25 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:00:25 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:00:25 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:00:25 DEBUG homeplanner.day_change_scheduler Waiting 21634 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:00:26 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 21:00:26 INFO  homeplanner.realtime WS connect: id=140135497991184 host=192.168.1.2 port=50758 total=1
2026-01-15 21:00:28 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-15 21:00:28 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-15 21:00:28 INFO  homeplanner.realtime WS disconnect: id=140135497991184, total=0
2026-01-15 21:00:28 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:00:29 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:00:29 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:00:29 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:00:29 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:00:29 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:00:29 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:00:29 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:00:29 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:00:29 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:00:29 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:29 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:29 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:00:29 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:00:29 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:29 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:00:29 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:00:29 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:00:29 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:00:29 DEBUG homeplanner.day_change_scheduler Waiting 21630 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:00:30 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 21:00:30 INFO  homeplanner.realtime WS connect: id=140503632151248 host=192.168.1.2 port=50760 total=1
2026-01-15 21:00:31 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-15 21:00:31 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-15 21:00:31 INFO  homeplanner.realtime WS disconnect: id=140503632151248, total=0
2026-01-15 21:00:32 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:00:33 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:00:33 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:00:33 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:00:33 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:00:33 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:00:33 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:00:33 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:00:33 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:00:33 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:00:33 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:33 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:33 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:00:33 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:00:33 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:33 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:00:33 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:00:33 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:00:33 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:00:33 DEBUG homeplanner.day_change_scheduler Waiting 21627 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:00:33 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 21:00:33 INFO  homeplanner.realtime WS connect: id=140153327911632 host=192.168.1.2 port=46416 total=1
2026-01-15 21:00:35 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-15 21:00:35 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-15 21:00:35 INFO  homeplanner.realtime WS disconnect: id=140153327911632, total=0
2026-01-15 21:00:35 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:00:36 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:00:36 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:00:36 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:00:36 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:00:36 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:00:36 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:00:36 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:00:36 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:00:36 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:00:36 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:36 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:36 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:00:36 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:00:36 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:36 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:00:36 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:00:36 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:00:36 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:00:36 DEBUG homeplanner.day_change_scheduler Waiting 21623 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:00:37 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 21:00:37 INFO  homeplanner.realtime WS connect: id=139778277540560 host=192.168.1.2 port=46428 total=1
2026-01-15 21:00:38 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-15 21:00:38 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-15 21:00:38 INFO  homeplanner.realtime WS disconnect: id=139778277540560, total=0
2026-01-15 21:00:39 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:00:40 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:00:40 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:00:40 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:00:40 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:00:40 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:00:40 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:00:40 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:00:40 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:00:40 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:00:40 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:40 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:40 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:00:40 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:00:40 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:40 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:00:40 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:00:40 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:00:40 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:00:40 DEBUG homeplanner.day_change_scheduler Waiting 21620 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:00:40 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 21:00:40 INFO  homeplanner.realtime WS connect: id=140254428414672 host=192.168.1.2 port=46438 total=1
2026-01-15 21:00:41 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-15 21:00:41 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-15 21:00:42 INFO  homeplanner.realtime WS disconnect: id=140254428414672, total=0
2026-01-15 21:00:42 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:00:43 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:00:43 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:00:43 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:00:43 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:00:43 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:00:43 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:00:43 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:00:43 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:00:43 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:00:43 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:43 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:00:43 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:00:43 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:00:43 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:00:43 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:00:43 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:00:43 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:00:43 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:00:43 DEBUG homeplanner.day_change_scheduler Waiting 21617 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:00:44 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 21:00:44 INFO  homeplanner.realtime WS connect: id=140257171473104 host=192.168.1.2 port=54156 total=1
2026-01-15 21:01:38 DEBUG watchfiles.main 6 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc.3277223'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc.3277223'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/__init__.cpython-314.pyc.140684625217216'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/__init__.cpython-314.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/__init__.cpython-314.pyc.140684625217216'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc')}
2026-01-15 21:01:38 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:01:38 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:01:38 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:01:38 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:01:38 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:01:38 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:01:38 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:01:38 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:01:38 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:01:38 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:01:39 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:01:39 DEBUG asyncio Using selector: EpollSelector
2026-01-15 21:01:39 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:01:39 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:01:39 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:01:39 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:01:39 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:01:39 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:01:39 DEBUG homeplanner.day_change_scheduler Waiting 21561 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine [generated in 0.00037s] ('last_task_update', 1, 0)
2026-01-15 21:01:39 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:01:39 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 2 operations
2026-01-15 21:01:39 INFO  homeplanner.tasks HTTP sync-queue: 2 operations
2026-01-15 21:01:39 INFO  homeplanner.tasks sync-queue: new day detected, recalculating all tasks
2026-01-15 21:01:39 ERROR homeplanner.system Unhandled exception in FastAPI app: TaskService.get_all_tasks() got an unexpected keyword argument 'active_only'
  + Exception Group Traceback (most recent call last):
  |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/_backends/_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 180, in dispatch
    |     return await call_next(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 148, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 115, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 101, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 355, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 245, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/to_thread.py", line 63, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/_backends/_asyncio.py", line 2502, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    |     result = context.run(func, *args)
    |   File "/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py", line 216, in sync_task_queue
    |     TaskService.get_all_tasks(db, active_only=False)
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
    | TypeError: TaskService.get_all_tasks() got an unexpected keyword argument 'active_only'
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 180, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 148, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/to_thread.py", line 63, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/_backends/_asyncio.py", line 2502, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py", line 216, in sync_task_queue
    TaskService.get_all_tasks(db, active_only=False)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
TypeError: TaskService.get_all_tasks() got an unexpected keyword argument 'active_only'
2026-01-15 21:01:39 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:01:39 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:01:40 DEBUG asyncio Using selector: EpollSelector
2026-01-15 21:01:40 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:01:40 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:01:40 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:01:40 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:01:40 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:01:40 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:01:40 DEBUG homeplanner.day_change_scheduler Waiting 21560 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine [cached since 0.8278s ago] ('last_task_update', 1, 0)
2026-01-15 21:01:40 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:01:40 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 2 operations
2026-01-15 21:01:40 INFO  homeplanner.tasks HTTP sync-queue: 2 operations
2026-01-15 21:01:40 INFO  homeplanner.tasks sync-queue: new day detected, recalculating all tasks
2026-01-15 21:01:40 ERROR homeplanner.system Unhandled exception in FastAPI app: TaskService.get_all_tasks() got an unexpected keyword argument 'active_only'
  + Exception Group Traceback (most recent call last):
  |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/_backends/_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 180, in dispatch
    |     return await call_next(request)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 148, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 115, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 101, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 355, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 245, in run_endpoint_function
    |     return await run_in_threadpool(dependant.call, **values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    |     return await anyio.to_thread.run_sync(func)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/to_thread.py", line 63, in run_sync
    |     return await get_async_backend().run_sync_in_worker_thread(
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     )
    |     ^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/_backends/_asyncio.py", line 2502, in run_sync_in_worker_thread
    |     return await future
    |            ^^^^^^^^^^^^
    |   File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    |     result = context.run(func, *args)
    |   File "/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py", line 216, in sync_task_queue
    |     TaskService.get_all_tasks(db, active_only=False)
    |     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
    | TypeError: TaskService.get_all_tasks() got an unexpected keyword argument 'active_only'
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 180, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 148, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/fastapi/routing.py", line 245, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/to_thread.py", line 63, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/_backends/_asyncio.py", line 2502, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py", line 216, in sync_task_queue
    TaskService.get_all_tasks(db, active_only=False)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
TypeError: TaskService.get_all_tasks() got an unexpected keyword argument 'active_only'
2026-01-15 21:01:40 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:02:07 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-15 21:02:07 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-15 21:02:07 INFO  homeplanner.realtime WS disconnect: id=140257171473104, total=0
2026-01-15 21:02:07 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:02:08 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:02:08 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:02:08 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:02:08 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:02:08 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:02:08 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:02:08 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:02:08 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:02:08 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:02:08 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:02:09 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:02:09 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:02:09 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:02:09 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:02:09 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:02:09 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:02:09 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:02:09 DEBUG homeplanner.day_change_scheduler Waiting 21531 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:02:09 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-15 21:02:09 INFO  homeplanner.realtime WS connect: id=140085376074448 host=192.168.1.2 port=40978 total=1
2026-01-15 21:02:14 INFO  homeplanner.system uvicorn.access level: 30
2026-01-15 21:02:14 INFO  homeplanner.system uvicorn level: 10
2026-01-15 21:02:14 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-15 21:02:14 INFO  homeplanner.system uvicorn handlers: []
2026-01-15 21:02:14 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-15 21:02:14 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-15 21:02:14 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-15 21:02:14 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-15 21:02:14 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-15 21:02:14 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:02:15 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:02:15 DEBUG asyncio Using selector: EpollSelector
2026-01-15 21:02:15 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:02:15 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:02:15 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:02:15 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:02:15 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:02:15 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:02:15 DEBUG homeplanner.day_change_scheduler Waiting 21525 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [generated in 0.00042s] ('last_task_update', 1, 0)
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:02:15 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 2 operations
2026-01-15 21:02:15 INFO  homeplanner.tasks HTTP sync-queue: 2 operations
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: new day detected, recalculating all tasks
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: processing 2 operations
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: processing operation 1/2: TaskOperationType.CREATE for task None with timestamp 2025-01-01 09:00:00
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: applying CREATE for new task 1
2026-01-15 21:02:15 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'created', 'task_id': 1, 'task': {'title': 'Initial', 'description': 'Desc', 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2025-01-01T09:00:00', 'alarm': False, 'group_id': None, 'id': 1, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2025-01-01T09:00:00', 'updated_at': '2025-01-01T09:00:00', 'readable_config': '1 января в 09:00', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 21:02:15 INFO  homeplanner.realtime WS broadcast: targets=0, payload={"type": "task_update", "action": "created", "task_id": 1, "task": {"title": "Initial", "description": "Desc", "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2025-01-01T09:00:00", "alarm": false, "group_id": null, "id": 1, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2025-01-01T09:00:00", "updated_at": "2025-01-01T09:00:00", "readable_config": "1 января в 09:00", "assigned_user_ids": [], "assignees": []}}
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: processing operation 2/2: TaskOperationType.UPDATE for task 1 with timestamp 2025-01-01 09:00:01
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: applying UPDATE for task 1 without conflict, server updated_at=2025-01-01 09:00:00, operation timestamp=2025-01-01 09:00:01
2026-01-15 21:02:15 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'updated', 'task_id': 1, 'task': {'title': 'Updated', 'description': 'Desc', 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2025-01-01T09:00:00', 'alarm': False, 'group_id': None, 'id': 1, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2025-01-01T09:00:00', 'updated_at': '2025-01-01T09:00:01', 'readable_config': '1 января в 09:00', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 21:02:15 INFO  homeplanner.realtime WS broadcast: targets=0, payload={"type": "task_update", "action": "updated", "task_id": 1, "task": {"title": "Updated", "description": "Desc", "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2025-01-01T09:00:00", "alarm": false, "group_id": null, "id": 1, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2025-01-01T09:00:00", "updated_at": "2025-01-01T09:00:01", "readable_config": "1 января в 09:00", "assigned_user_ids": [], "assignees": []}}
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: returning 1 tasks to client
2026-01-15 21:02:15 INFO  httpx HTTP Request: POST http://testserver/api/v0.2/tasks/sync-queue "HTTP/1.1 200 OK"
2026-01-15 21:02:15 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 21:02:15 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-15 21:02:15 DEBUG asyncio Using selector: EpollSelector
2026-01-15 21:02:15 INFO  homeplanner.database Initializing database tables...
2026-01-15 21:02:15 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 21:02:15 INFO  homeplanner.database Database tables created successfully
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:02:15 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-15 21:02:15 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-15 21:02:15 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-15 21:02:15 DEBUG homeplanner.day_change_scheduler Waiting 21525 seconds until next day check at 2026-01-16 03:01:00
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine [cached since 0.1719s ago] ('last_task_update', 1, 0)
2026-01-15 21:02:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 21:02:15 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 2 operations
2026-01-15 21:02:15 INFO  homeplanner.tasks HTTP sync-queue: 2 operations
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: new day detected, recalculating all tasks
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: processing 2 operations
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: processing operation 1/2: TaskOperationType.CREATE for task None with timestamp 2025-01-01 09:00:00
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: applying CREATE for new task 1
2026-01-15 21:02:15 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'created', 'task_id': 1, 'task': {'title': 'To delete', 'description': None, 'task_type': 'one_time', 'recurrence_type': None, 'recurrence_interval': None, 'interval_days': None, 'reminder_time': '2025-01-01T09:00:00', 'alarm': False, 'group_id': None, 'id': 1, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2025-01-01T09:00:00', 'updated_at': '2025-01-01T09:00:00', 'readable_config': '1 января в 09:00', 'assigned_user_ids': [], 'assignees': []}}
2026-01-15 21:02:15 INFO  homeplanner.realtime WS broadcast: targets=0, payload={"type": "task_update", "action": "created", "task_id": 1, "task": {"title": "To delete", "description": null, "task_type": "one_time", "recurrence_type": null, "recurrence_interval": null, "interval_days": null, "reminder_time": "2025-01-01T09:00:00", "alarm": false, "group_id": null, "id": 1, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2025-01-01T09:00:00", "updated_at": "2025-01-01T09:00:00", "readable_config": "1 января в 09:00", "assigned_user_ids": [], "assignees": []}}
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: processing operation 2/2: TaskOperationType.DELETE for task 1 with timestamp 2025-01-01 09:00:01
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: applying DELETE for task 1
2026-01-15 21:02:15 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'deleted', 'task_id': 1}
2026-01-15 21:02:15 INFO  homeplanner.realtime WS broadcast: targets=0, payload={"type": "task_update", "action": "deleted", "task_id": 1}
2026-01-15 21:02:15 INFO  homeplanner.tasks sync-queue: returning 0 tasks to client
2026-01-15 21:02:15 INFO  httpx HTTP Request: POST http://testserver/api/v0.2/tasks/sync-queue "HTTP/1.1 200 OK"
2026-01-15 21:02:15 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-15 22:19:48 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-15 22:19:48 INFO  homeplanner.realtime WS connect: id=140085375859936 host=192.168.1.39 port=46146 total=2
2026-01-15 22:19:54 INFO  homeplanner.realtime WS disconnect: id=140085375859936, total=1
2026-01-15 22:19:54 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-15 22:19:54 INFO  homeplanner.realtime WS connect: id=140085375947920 host=192.168.1.39 port=43932 total=2
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [generated in 0.00050s] ('last_task_update', 1, 0)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:19:55 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [cached since 0.00751s ago] ('last_task_update', 1, 0)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [generated in 0.00042s] ()
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [generated in 0.00041s] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [cached since 0.4567s ago] ('last_task_update', 1, 0)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:19:55 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [cached since 0.46s ago] ('last_task_update', 1, 0)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [cached since 0.4485s ago] ()
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [cached since 0.4437s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 22:19:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [cached since 0.4794s ago] ('last_task_update', 1, 0)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [generated in 0.00028s] ()
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [cached since 0.4908s ago] ('last_task_update', 1, 0)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:19:55 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:19:55 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine [generated in 0.00025s] ()
2026-01-15 22:19:55 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:19:55 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:19:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine [cached since 3.026s ago] ('last_task_update', 1, 0)
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine [cached since 2.545s ago] ()
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine [cached since 3.041s ago] ('last_task_update', 1, 0)
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:19:58 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:19:58 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine [cached since 2.55s ago] ()
2026-01-15 22:19:58 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:19:58 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:19:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:00 INFO  sqlalchemy.engine.Engine [cached since 5.221s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:00 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:20:00 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:20:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:00 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:20:00 INFO  sqlalchemy.engine.Engine [cached since 4.733s ago] ()
2026-01-15 22:20:00 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:20:00 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:20:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:13 INFO  homeplanner.realtime WS disconnect: id=140085375947920, total=1
2026-01-15 22:20:15 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-15 22:20:15 INFO  homeplanner.realtime WS connect: id=140085375870880 host=192.168.1.39 port=44002 total=2
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine [cached since 20.34s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:15 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:20:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine [cached since 20.35s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine [cached since 20.34s ago] ()
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine [cached since 20.33s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 22:20:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 22:20:15 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:20:15 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:20:15 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 22:20:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 22:20:15 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine [cached since 20.85s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:16 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:20:16 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine [cached since 20.86s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine [cached since 20.84s ago] ()
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine [cached since 20.84s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 22:20:16 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 22:20:16 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:20:16 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:20:16 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 22:20:16 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine [cached since 20.88s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine [cached since 20.41s ago] ()
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine [cached since 20.9s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:16 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:20:16 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine [cached since 20.41s ago] ()
2026-01-15 22:20:16 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:20:16 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:20:16 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine [cached since 23.41s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine [cached since 22.94s ago] ()
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine [cached since 23.44s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:18 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:20:18 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine [cached since 22.95s ago] ()
2026-01-15 22:20:18 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:20:18 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:20:18 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:20 INFO  sqlalchemy.engine.Engine [cached since 25.4s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:20 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:20:20 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:20:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:20 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:20:20 INFO  sqlalchemy.engine.Engine [cached since 24.91s ago] ()
2026-01-15 22:20:20 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:20:20 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:20:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:29 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:29 INFO  sqlalchemy.engine.Engine [cached since 33.97s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:29 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:29 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:20:29 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:20:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:29 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:20:29 INFO  sqlalchemy.engine.Engine [cached since 33.48s ago] ()
2026-01-15 22:20:29 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:20:29 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:20:29 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:45 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:45 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:45 INFO  sqlalchemy.engine.Engine [cached since 50.7s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:45 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:45 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:20:45 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:20:45 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:45 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:20:45 INFO  sqlalchemy.engine.Engine [cached since 50.21s ago] ()
2026-01-15 22:20:45 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:20:45 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:20:45 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:51 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:51 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:51 INFO  sqlalchemy.engine.Engine [cached since 55.86s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:51 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:51 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:20:51 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:20:51 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:51 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:20:51 INFO  sqlalchemy.engine.Engine [cached since 55.37s ago] ()
2026-01-15 22:20:51 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:20:51 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:20:51 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:53 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:53 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:53 INFO  sqlalchemy.engine.Engine [cached since 58.14s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:53 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:53 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:20:53 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:20:53 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:53 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:20:53 INFO  sqlalchemy.engine.Engine [cached since 57.65s ago] ()
2026-01-15 22:20:53 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:20:53 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:20:53 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:59 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:59 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:20:59 INFO  sqlalchemy.engine.Engine [cached since 64.8s ago] ('last_task_update', 1, 0)
2026-01-15 22:20:59 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:20:59 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:20:59 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:20:59 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:20:59 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:20:59 INFO  sqlalchemy.engine.Engine [cached since 64.31s ago] ()
2026-01-15 22:20:59 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:20:59 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:21:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:29:26 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db')}
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine [cached since 919.9s ago] ('last_task_update', 1, 0)
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:35:15 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:35:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine [cached since 919.9s ago] ('last_task_update', 1, 0)
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine [cached since 919.9s ago] ()
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine [cached since 919.9s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 22:35:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 22:35:15 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:35:15 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:35:15 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 22:35:15 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 22:35:15 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 22:36:06 INFO  homeplanner.realtime WS disconnect: id=140085375870880, total=1
2026-01-15 22:37:41 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-15 22:37:41 INFO  homeplanner.realtime WS connect: id=140085376497744 host=192.168.1.39 port=47860 total=2
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine [cached since 1066s ago] ('last_task_update', 1, 0)
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:37:41 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:37:41 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine [cached since 1066s ago] ('last_task_update', 1, 0)
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine [cached since 1066s ago] ()
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine [cached since 1066s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 22:37:41 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 22:37:41 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:37:41 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:37:41 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 22:37:41 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 22:37:41 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine [cached since 1068s ago] ('last_task_update', 1, 0)
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:37:42 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:37:42 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine [cached since 1068s ago] ('last_task_update', 1, 0)
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine [cached since 1068s ago] ()
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine [cached since 1068s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 22:37:42 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 22:37:42 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:37:42 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:37:42 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 22:37:42 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine [cached since 1068s ago] ('last_task_update', 1, 0)
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine [cached since 1067s ago] ()
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine [cached since 1068s ago] ('last_task_update', 1, 0)
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:37:42 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:37:42 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine [cached since 1067s ago] ()
2026-01-15 22:37:42 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:37:42 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:37:42 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine [cached since 1069s ago] ('last_task_update', 1, 0)
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine [cached since 1069s ago] ()
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine [cached since 1069s ago] ('last_task_update', 1, 0)
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:37:44 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:37:44 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine [cached since 1069s ago] ()
2026-01-15 22:37:44 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:37:44 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:37:44 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:41:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:41:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:41:00 INFO  sqlalchemy.engine.Engine [cached since 1265s ago] ('last_task_update', 1, 0)
2026-01-15 22:41:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:41:00 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:41:00 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:41:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:41:00 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:41:00 INFO  sqlalchemy.engine.Engine [cached since 1265s ago] ()
2026-01-15 22:41:00 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:41:00 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:41:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:42:51 INFO  homeplanner.realtime WS disconnect: id=140085376497744, total=1
2026-01-15 22:42:54 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-15 22:42:54 INFO  homeplanner.realtime WS connect: id=140085365239600 host=192.168.1.39 port=41164 total=2
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine [cached since 1379s ago] ('last_task_update', 1, 0)
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:42:54 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:42:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine [cached since 1379s ago] ('last_task_update', 1, 0)
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine [cached since 1379s ago] ()
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine [cached since 1379s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 22:42:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 22:42:54 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:42:54 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:42:54 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 22:42:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 22:42:54 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine [cached since 1381s ago] ('last_task_update', 1, 0)
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:42:55 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:42:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine [cached since 1381s ago] ('last_task_update', 1, 0)
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine [cached since 1381s ago] ()
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine [cached since 1381s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 22:42:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 22:42:55 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:42:55 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:42:55 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 22:42:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine [cached since 1381s ago] ('last_task_update', 1, 0)
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine [cached since 1380s ago] ()
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine [cached since 1381s ago] ('last_task_update', 1, 0)
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:42:55 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:42:55 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine [cached since 1380s ago] ()
2026-01-15 22:42:55 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:42:55 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:42:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine [cached since 1382s ago] ('last_task_update', 1, 0)
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine [cached since 1382s ago] ()
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine [cached since 1382s ago] ('last_task_update', 1, 0)
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:42:57 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:42:57 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine [cached since 1382s ago] ()
2026-01-15 22:42:57 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:42:57 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:42:57 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:49:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:49:01 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:49:01 INFO  sqlalchemy.engine.Engine [cached since 1747s ago] ('last_task_update', 1, 0)
2026-01-15 22:49:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:49:01 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-15 22:49:01 INFO  homeplanner.users Starting query for simple users
2026-01-15 22:49:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:49:01 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-15 22:49:01 INFO  sqlalchemy.engine.Engine [cached since 1746s ago] ()
2026-01-15 22:49:01 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-15 22:49:01 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-15 22:49:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine [cached since 2279s ago] ('last_task_update', 1, 0)
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 22:57:54 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:57:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine [cached since 2279s ago] ('last_task_update', 1, 0)
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine [cached since 2279s ago] ()
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine [cached since 2279s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 22:57:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 22:57:54 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:57:54 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 22:57:54 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 22:57:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 22:57:54 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine [cached since 3180s ago] ('last_task_update', 1, 0)
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 23:12:54 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 23:12:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine [cached since 3180s ago] ('last_task_update', 1, 0)
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine [cached since 3180s ago] ()
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine [cached since 3180s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 23:12:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 23:12:54 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 23:12:54 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 23:12:54 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 23:12:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 23:12:54 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine [cached since 4081s ago] ('last_task_update', 1, 0)
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-15 23:27:55 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 23:27:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine [cached since 4081s ago] ('last_task_update', 1, 0)
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine [cached since 4081s ago] ()
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine [cached since 4081s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-15 23:27:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-15 23:27:55 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 23:27:55 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-15 23:27:55 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-15 23:27:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-15 23:27:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-15 23:30:51 INFO  homeplanner.realtime WS disconnect: id=140085365239600, total=1
2026-01-16 08:31:58 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/runtime')}
2026-01-16 20:53:16 DEBUG watchfiles.main 1 change detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db')}
2026-01-16 20:53:29 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db')}
2026-01-16 20:53:35 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db')}
2026-01-16 20:53:35 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db')}
2026-01-16 20:53:39 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db')}
2026-01-17 10:43:02 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-17 10:43:02 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-17 10:43:08 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-17 10:43:08 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-17 10:43:16 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-17 10:43:16 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-17 10:43:27 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_router.cpython-314-pytest-9.0.2.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_router.cpython-314-pytest-9.0.2.pyc.14848'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_router.cpython-314-pytest-9.0.2.pyc.14848')}
2026-01-17 10:45:20 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-17 10:45:20 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-17 10:45:27 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-17 10:45:27 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-17 10:45:33 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-17 10:45:33 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-17 10:45:46 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_tasks_sync_queue.py')}
2026-01-17 10:45:46 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_tasks_sync_queue.py'. Reloading...
2026-01-17 10:45:58 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc.25819'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc.25819')}
2026-01-17 10:46:13 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_tasks_sync_queue.py')}
2026-01-17 10:46:13 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_tasks_sync_queue.py'. Reloading...
2026-01-17 10:46:17 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc.27261'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc.27261'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc')}
2026-01-17 10:46:27 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_tasks_sync_queue.py')}
2026-01-17 10:46:27 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_tasks_sync_queue.py'. Reloading...
2026-01-17 10:46:32 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_tasks_sync_queue.py')}
2026-01-17 10:46:32 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_tasks_sync_queue.py'. Reloading...
2026-01-17 10:46:36 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc.28633'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc.28633'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc')}
2026-01-17 10:46:43 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_tasks_sync_queue.py')}
2026-01-17 10:46:43 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_tasks_sync_queue.py'. Reloading...
2026-01-17 10:46:47 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc.29441'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_tasks_sync_queue.cpython-314-pytest-9.0.2.pyc.29441')}
2026-01-17 10:47:58 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/task_history_service.py')}
2026-01-17 10:47:58 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/task_history_service.py'. Reloading...
2026-01-17 10:48:02 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/task_history_service.py')}
2026-01-17 10:48:02 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/task_history_service.py'. Reloading...
2026-01-17 10:48:05 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py')}
2026-01-17 10:48:05 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/task_service.py'. Reloading...
2026-01-17 10:48:08 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py')}
2026-01-17 10:48:08 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/task_service.py'. Reloading...
2026-01-17 10:48:12 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py')}
2026-01-17 10:48:12 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/task_service.py'. Reloading...
2026-01-17 10:48:17 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py')}
2026-01-17 10:48:17 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/task_service.py'. Reloading...
2026-01-17 10:48:23 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/task_history_service.py')}
2026-01-17 10:48:23 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/task_history_service.py'. Reloading...
2026-01-17 10:48:27 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/task_history_service.py')}
2026-01-17 10:48:27 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/task_history_service.py'. Reloading...
2026-01-17 10:48:31 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/task_history_service.py')}
2026-01-17 10:48:31 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/task_history_service.py'. Reloading...
2026-01-17 10:48:37 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/task_history_service.py')}
2026-01-17 10:48:37 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/task_history_service.py'. Reloading...
2026-01-17 10:48:46 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/task_history_service.cpython-314.pyc.140004308163632'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/task_history_service.cpython-314.pyc.140004308163632'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/task_history_service.cpython-314.pyc')}
2026-01-17 10:48:48 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/task_service.cpython-314.pyc.139623586995248'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/task_service.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/task_service.cpython-314.pyc.139623586995248')}
2026-01-17 10:53:32 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-17 10:53:32 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-17 10:55:14 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-17 10:55:14 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-17 10:55:28 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-17 10:55:28 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-17 10:55:34 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py')}
2026-01-17 10:55:34 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/tasks.py'. Reloading...
2026-01-17 12:25:00 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/frontend/user_management.js')}
2026-01-17 12:26:25 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/scripts/add_test_tasks.py')}
2026-01-17 12:26:25 WARNING homeplanner.system WatchFiles detected changes in 'scripts/add_test_tasks.py'. Reloading...
2026-01-17 12:26:30 DEBUG watchfiles.main 3 changes detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal')}
2026-01-17 12:26:31 DEBUG watchfiles.main 4 changes detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal')}
2026-01-17 12:26:31 DEBUG watchfiles.main 3 changes detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal')}
2026-01-17 17:43:57 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/db/homeplanner.db')}
2026-01-17 17:44:02 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/common/config/settings.toml.template')}
2026-01-17 17:44:25 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/common/config/settings.toml')}
2026-01-17 17:44:58 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_main.cpython-314-pytest-9.0.1.pyc.1808721'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_main.cpython-314-pytest-9.0.1.pyc.1808721'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_main.cpython-314-pytest-9.0.1.pyc')}
2026-01-17 18:32:57 DEBUG watchfiles.main 7 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/scripts/check_version.py'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/scripts/create_db.py'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/scripts/check_tables.py'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/scripts/add_alarm.py'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/scripts/check_alembic.py'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/scripts/set_version.py'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/scripts/create_test_tasks.py')}
2026-01-17 18:32:57 WARNING homeplanner.system WatchFiles detected changes in 'scripts/check_version.py'. Reloading...
2026-01-17 18:34:18 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/db/backup.db')}
2026-01-17 19:02:39 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/utils/hash_calculator.py')}
2026-01-17 19:02:39 WARNING homeplanner.system WatchFiles detected changes in 'backend/utils/hash_calculator.py'. Reloading...
2026-01-17 19:03:12 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/conflict_resolver.py')}
2026-01-17 19:03:12 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/conflict_resolver.py'. Reloading...
2026-01-17 19:03:39 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/sync_event_service.py')}
2026-01-17 19:03:39 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/sync_event_service.py'. Reloading...
2026-01-17 19:03:52 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/schemas/sync.py')}
2026-01-17 19:03:52 WARNING homeplanner.system WatchFiles detected changes in 'backend/schemas/sync.py'. Reloading...
2026-01-17 19:04:06 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/events.py')}
2026-01-17 19:04:06 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/events.py'. Reloading...
2026-01-17 19:04:08 DEBUG watchfiles.main 15 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/conflict_resolver.cpython-314.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/events.cpython-314.pyc.140290037793456'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/conflict_resolver.cpython-314.pyc.140290038605488'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/utils/__pycache__/hash_calculator.cpython-314.pyc.140290038606000'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/schemas/__pycache__/sync.cpython-314.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/events.cpython-314.pyc.140290037793456'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/schemas/__pycache__/sync.cpython-314.pyc.140290037794864'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/events.cpython-314.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/conflict_resolver.cpython-314.pyc.140290038605488'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.140290042526672'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/utils/__pycache__/hash_calculator.cpython-314.pyc.140290038606000'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/schemas/__pycache__/sync.cpython-314.pyc.140290037794864'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/utils/__pycache__/hash_calculator.cpython-314.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.140290042526672')}
2026-01-17 19:04:58 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py')}
2026-01-17 19:04:58 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/task_service.py'. Reloading...
2026-01-17 19:05:00 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/task_service.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/task_service.cpython-314.pyc.139756326862000'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/task_service.cpython-314.pyc.139756326862000')}
2026-01-17 19:05:09 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/group_service.py')}
2026-01-17 19:05:09 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/group_service.py'. Reloading...
2026-01-17 19:05:15 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/sync_event_service.py')}
2026-01-17 19:05:15 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/sync_event_service.py'. Reloading...
2026-01-17 19:05:21 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/sync_event_service.py')}
2026-01-17 19:05:21 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/sync_event_service.py'. Reloading...
2026-01-17 19:05:22 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.140215996464512'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.140215996464512')}
2026-01-17 19:05:36 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/realtime.py')}
2026-01-17 19:05:36 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/realtime.py'. Reloading...
2026-01-17 19:05:37 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/realtime.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/realtime.cpython-314.pyc.140177928892720'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/realtime.cpython-314.pyc.140177928892720')}
2026-01-17 19:05:47 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/sync_event_service.py')}
2026-01-17 19:05:47 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/sync_event_service.py'. Reloading...
2026-01-17 19:05:48 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.140639999589760'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.140639999589760')}
2026-01-17 19:07:02 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/utils/hash_calculator.py')}
2026-01-17 19:07:02 WARNING homeplanner.system WatchFiles detected changes in 'backend/utils/hash_calculator.py'. Reloading...
2026-01-17 19:07:03 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/utils/__pycache__/hash_calculator.cpython-314.pyc.140343296650800'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/utils/__pycache__/hash_calculator.cpython-314.pyc.140343296650800'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/utils/__pycache__/hash_calculator.cpython-314.pyc')}
2026-01-17 19:07:32 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/test_hash_consistency.py')}
2026-01-17 19:07:32 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_hash_consistency.py'. Reloading...
2026-01-17 19:07:46 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_consistency.cpython-314-pytest-9.0.1.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_consistency.cpython-314-pytest-9.0.1.pyc.2158001'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_consistency.cpython-314-pytest-9.0.1.pyc.2158001')}
2026-01-17 19:07:55 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_hash_consistency.py')}
2026-01-17 19:07:55 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_hash_consistency.py'. Reloading...
2026-01-17 19:08:00 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_consistency.cpython-314-pytest-9.0.1.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_consistency.cpython-314-pytest-9.0.1.pyc.2158918'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_consistency.cpython-314-pytest-9.0.1.pyc.2158918')}
2026-01-17 19:08:15 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_hash_consistency.py')}
2026-01-17 19:08:15 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_hash_consistency.py'. Reloading...
2026-01-17 19:08:25 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_hash_consistency.py')}
2026-01-17 19:08:25 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_hash_consistency.py'. Reloading...
2026-01-17 19:08:30 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_consistency.cpython-314-pytest-9.0.1.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_consistency.cpython-314-pytest-9.0.1.pyc.2161052'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_consistency.cpython-314-pytest-9.0.1.pyc.2161052')}
2026-01-17 19:09:19 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/test_conflict_resolver.py')}
2026-01-17 19:09:19 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_conflict_resolver.py'. Reloading...
2026-01-17 19:09:23 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_conflict_resolver.cpython-314-pytest-9.0.1.pyc.2164588'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_conflict_resolver.cpython-314-pytest-9.0.1.pyc.2164588'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_conflict_resolver.cpython-314-pytest-9.0.1.pyc')}
2026-01-17 19:09:47 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/test_sync_event_service.py')}
2026-01-17 19:09:47 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_sync_event_service.py'. Reloading...
2026-01-17 19:09:51 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_event_service.cpython-314-pytest-9.0.1.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_event_service.cpython-314-pytest-9.0.1.pyc.2166380'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_event_service.cpython-314-pytest-9.0.1.pyc.2166380')}
2026-01-17 19:10:10 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/sync_event_service.py')}
2026-01-17 19:10:10 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/sync_event_service.py'. Reloading...
2026-01-17 19:10:11 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.139641031605632'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.139641031605632')}
2026-01-17 19:10:15 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/sync_event_service.py')}
2026-01-17 19:10:15 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/sync_event_service.py'. Reloading...
2026-01-17 19:10:25 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/sync_event_service.py')}
2026-01-17 19:10:25 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/sync_event_service.py'. Reloading...
2026-01-17 19:10:26 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.139820413631872'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.139820413631872')}
2026-01-17 19:10:29 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/sync_event_service.py')}
2026-01-17 19:10:29 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/sync_event_service.py'. Reloading...
2026-01-17 19:10:30 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.139713787280768'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/sync_event_service.cpython-314.pyc.139713787280768')}
2026-01-17 19:10:37 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/events.py')}
2026-01-17 19:10:37 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/events.py'. Reloading...
2026-01-17 19:10:38 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/events.cpython-314.pyc.140291926442672'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/events.cpython-314.pyc.140291926442672'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/events.cpython-314.pyc')}
2026-01-17 19:10:43 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_sync_event_service.py')}
2026-01-17 19:10:43 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_sync_event_service.py'. Reloading...
2026-01-17 19:10:49 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_sync_event_service.py')}
2026-01-17 19:10:49 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_sync_event_service.py'. Reloading...
2026-01-17 19:10:55 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_sync_event_service.py')}
2026-01-17 19:10:55 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_sync_event_service.py'. Reloading...
2026-01-17 19:11:00 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_sync_event_service.py')}
2026-01-17 19:11:00 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_sync_event_service.py'. Reloading...
2026-01-17 19:11:05 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_sync_event_service.py')}
2026-01-17 19:11:05 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_sync_event_service.py'. Reloading...
2026-01-17 19:11:18 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_sync_event_service.py')}
2026-01-17 19:11:18 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_sync_event_service.py'. Reloading...
2026-01-17 19:11:23 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_event_service.cpython-314-pytest-9.0.1.pyc.2172182'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_event_service.cpython-314-pytest-9.0.1.pyc.2172182'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_event_service.cpython-314-pytest-9.0.1.pyc')}
2026-01-18 21:23:20 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/hash_service.py')}
2026-01-18 21:23:20 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/hash_service.py'. Reloading...
2026-01-18 21:23:28 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/schemas/sync_v3.py')}
2026-01-18 21:23:28 WARNING homeplanner.system WatchFiles detected changes in 'backend/schemas/sync_v3.py'. Reloading...
2026-01-18 21:23:42 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/sync.py')}
2026-01-18 21:23:42 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/sync.py'. Reloading...
2026-01-18 21:23:46 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/main.py')}
2026-01-18 21:23:46 WARNING homeplanner.system WatchFiles detected changes in 'backend/main.py'. Reloading...
2026-01-18 21:23:51 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/main.py')}
2026-01-18 21:23:51 WARNING homeplanner.system WatchFiles detected changes in 'backend/main.py'. Reloading...
2026-01-18 21:24:07 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/sync.py')}
2026-01-18 21:24:07 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/sync.py'. Reloading...
2026-01-18 21:24:12 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/schemas/sync_v3.py')}
2026-01-18 21:24:12 WARNING homeplanner.system WatchFiles detected changes in 'backend/schemas/sync_v3.py'. Reloading...
2026-01-18 21:24:21 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/sync.py')}
2026-01-18 21:24:21 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/sync.py'. Reloading...
2026-01-18 21:24:43 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/hash_service.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/hash_service.cpython-314.pyc.140390912891952'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/hash_service.cpython-314.pyc.140390912891952')}
2026-01-18 21:24:48 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/schemas/__pycache__/sync_v3.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/schemas/__pycache__/sync_v3.cpython-314.pyc.139858116548944'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/schemas/__pycache__/sync_v3.cpython-314.pyc.139858116548944')}
2026-01-18 21:24:51 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/sync.cpython-314.pyc.140694770080080'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/sync.cpython-314.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/__pycache__/sync.cpython-314.pyc.140694770080080')}
2026-01-18 21:24:56 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/__pycache__/main.cpython-314.pyc.140580898920784'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/__pycache__/main.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/__pycache__/main.cpython-314.pyc.140580898920784')}
2026-01-18 21:25:14 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/test_sync_v3.py')}
2026-01-18 21:25:14 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_sync_v3.py'. Reloading...
2026-01-18 21:25:26 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_sync_v3.py')}
2026-01-18 21:25:26 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_sync_v3.py'. Reloading...
2026-01-18 21:25:31 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_v3.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_v3.cpython-314.pyc.140661515154944'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_v3.cpython-314.pyc.140661515154944')}
2026-01-18 21:53:25 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/test_sync_v3_api.py')}
2026-01-18 21:53:25 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_sync_v3_api.py'. Reloading...
2026-01-18 21:53:52 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_v3_api.cpython-314-pytest-9.0.1.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_v3_api.cpython-314-pytest-9.0.1.pyc.173807'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_v3_api.cpython-314-pytest-9.0.1.pyc.173807')}
2026-01-18 21:54:22 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/sync.py')}
2026-01-18 21:54:22 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/sync.py'. Reloading...
2026-01-18 21:54:36 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/sync.py')}
2026-01-18 21:54:36 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/sync.py'. Reloading...
2026-01-18 21:54:45 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/sync.py')}
2026-01-18 21:54:45 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/sync.py'. Reloading...
2026-01-18 21:55:35 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/sync.py')}
2026-01-18 21:55:35 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/sync.py'. Reloading...
2026-01-18 21:56:00 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/sync.py')}
2026-01-18 21:56:00 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/sync.py'. Reloading...
2026-01-18 21:56:59 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/conflict_resolver.py')}
2026-01-18 21:56:59 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/conflict_resolver.py'. Reloading...
2026-01-18 21:57:00 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/conflict_resolver.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/conflict_resolver.cpython-314.pyc.139830211847472'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/conflict_resolver.cpython-314.pyc.139830211847472')}
2026-01-18 21:57:06 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/conflict_resolver.py')}
2026-01-18 21:57:06 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/conflict_resolver.py'. Reloading...
2026-01-18 21:57:18 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/conflict_resolver.py')}
2026-01-18 21:57:18 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/conflict_resolver.py'. Reloading...
2026-01-18 21:57:19 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/conflict_resolver.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/conflict_resolver.cpython-314.pyc.139702677644592'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/services/__pycache__/conflict_resolver.cpython-314.pyc.139702677644592')}
2026-01-18 21:57:27 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/services/conflict_resolver.py')}
2026-01-18 21:57:27 WARNING homeplanner.system WatchFiles detected changes in 'backend/services/conflict_resolver.py'. Reloading...
2026-01-18 21:57:57 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/routers/sync.py')}
2026-01-18 21:57:57 WARNING homeplanner.system WatchFiles detected changes in 'backend/routers/sync.py'. Reloading...
2026-01-18 22:00:41 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/test_hash_performance.py')}
2026-01-18 22:00:41 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_hash_performance.py'. Reloading...
2026-01-18 22:00:51 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_performance.cpython-314-pytest-9.0.1.pyc.202368'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_performance.cpython-314-pytest-9.0.1.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_performance.cpython-314-pytest-9.0.1.pyc.202368')}
2026-01-18 22:01:05 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/test_hash_performance.py')}
2026-01-18 22:01:05 WARNING homeplanner.system WatchFiles detected changes in 'tests/test_hash_performance.py'. Reloading...
2026-01-18 22:05:51 DEBUG watchfiles.main 21 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/__init__.cpython-314.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/conftest.cpython-314-pytest-9.0.1.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/adb_utils.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/conftest.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_download.cpython-314-pytest-9.0.1.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/test_sync_functionality.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/adb_utils.cpython-314.pyc.140414889476528'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/test_app_installation.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/test_sync_functionality.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/adb_utils.cpython-314.pyc.140414889476528'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_download.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc.140414889618096'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/test_app_installation.cpython-314-pytest-9.0.1.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/test_app_installation.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/__init__.cpython-314.pyc.140414889620528'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_download.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc.140414889618096'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/__init__.cpython-314.pyc.140414889620528'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/conftest.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/test_sync_functionality.cpython-314-pytest-9.0.1.pyc')}
2026-01-18 22:05:53 DEBUG watchfiles.main 27 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_v3.cpython-314-pytest-9.0.1.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_logging.cpython-314-pytest-9.0.1.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_realtime.cpython-314-pytest-9.0.1.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_groups_router.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_events.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_v3.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_performance.cpython-314-pytest-9.0.1.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_events.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_task_completion_dates.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_group_service.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_logging.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_sync_v3.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_events.cpython-314-pytest-9.0.1.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_task_completion_dates.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_performance.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_group_service.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_logging.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_realtime.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_groups_router.cpython-314-pytest-9.0.1.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_group_service.cpython-314-pytest-9.0.1.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_task_service.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_hash_performance.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_task_service.cpython-314-pytest-9.0.1.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_task_completion_dates.cpython-314-pytest-9.0.1.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_realtime.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_groups_router.cpython-314-pytest-9.0.1.pyc.222738'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/__pycache__/test_task_service.cpython-314-pytest-9.0.1.pyc.222738')}
2026-01-18 23:37:25 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/android/config.py')}
2026-01-18 23:37:25 WARNING homeplanner.system WatchFiles detected changes in 'tests/android/config.py'. Reloading...
2026-01-18 23:38:22 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc.139723319161136'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc.139723319161136')}
2026-01-18 23:38:29 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/android/config.py')}
2026-01-18 23:38:29 WARNING homeplanner.system WatchFiles detected changes in 'tests/android/config.py'. Reloading...
2026-01-18 23:38:39 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc.139901608587568'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc.139901608587568')}
2026-01-18 23:38:45 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/tests/android/config.py')}
2026-01-18 23:38:45 WARNING homeplanner.system WatchFiles detected changes in 'tests/android/config.py'. Reloading...
2026-01-18 23:38:50 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc.140639304888624'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/tests/android/__pycache__/config.cpython-314.pyc.140639304888624')}
