2026-01-14 00:35:27 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 00:35:27 INFO  homeplanner.system uvicorn level: 10
2026-01-14 00:35:27 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 00:35:27 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 00:35:27 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 00:35:27 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 00:35:27 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 00:35:27 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 00:35:27 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 00:35:27 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 00:35:27 INFO  homeplanner.system HTTP mode (SSL not configured)
2026-01-14 00:35:28 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 00:35:28 INFO  homeplanner.system uvicorn level: 10
2026-01-14 00:35:28 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 00:35:28 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 00:35:28 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 00:35:28 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 00:35:28 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 00:35:28 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 00:35:28 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 00:35:28 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 00:35:28 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 00:35:28 INFO  homeplanner.database Initializing database tables...
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 00:35:28 INFO  homeplanner.database Database tables created successfully
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:35:28 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 00:35:28 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'debug_logs', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-14 00:35:28 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-14 00:35:28 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-14 00:35:28 DEBUG homeplanner.day_change_scheduler Waiting 8731 seconds until next day check at 2026-01-14 03:01:00
2026-01-14 00:35:31 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-14 00:35:31 INFO  homeplanner.realtime WS connect: id=140677178372224 host=192.168.1.2 port=33492 total=1
2026-01-14 00:38:13 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/database.py')}
2026-01-14 00:38:13 WARNING homeplanner.system WatchFiles detected changes in 'backend/database.py'. Reloading...
2026-01-14 00:38:13 INFO  homeplanner.realtime WS disconnect: id=140677178372224, total=0
2026-01-14 00:38:13 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-14 00:38:14 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/__pycache__/database.cpython-312.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/__pycache__/database.cpython-312.pyc.140460115861424'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/__pycache__/database.cpython-312.pyc.140460115861424')}
2026-01-14 00:38:14 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 00:38:14 INFO  homeplanner.system uvicorn level: 10
2026-01-14 00:38:14 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 00:38:14 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 00:38:14 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 00:38:14 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 00:38:14 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 00:38:14 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 00:38:14 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 00:38:14 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 00:38:14 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 00:38:14 INFO  homeplanner.database Initializing database tables...
2026-01-14 00:38:14 INFO  homeplanner.database Database URL: sqlite:///../homeplanner.db
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 00:38:14 INFO  homeplanner.database Database tables created successfully
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:38:14 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 00:38:14 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'debug_logs', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-14 00:38:14 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-14 00:38:14 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-14 00:38:14 DEBUG homeplanner.day_change_scheduler Waiting 8565 seconds until next day check at 2026-01-14 03:01:00
2026-01-14 00:38:16 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-14 00:38:16 INFO  homeplanner.realtime WS connect: id=140460090667232 host=192.168.1.2 port=49562 total=1
2026-01-14 00:38:58 INFO  homeplanner.realtime WS disconnect: id=140460090667232, total=0
2026-01-14 00:38:58 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-14 00:39:01 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 00:39:01 INFO  homeplanner.system uvicorn level: 10
2026-01-14 00:39:01 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 00:39:01 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 00:39:01 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 00:39:01 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 00:39:01 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 00:39:01 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 00:39:01 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 00:39:01 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 00:39:01 INFO  homeplanner.system HTTP mode (SSL not configured)
2026-01-14 00:39:02 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 00:39:02 INFO  homeplanner.system uvicorn level: 10
2026-01-14 00:39:02 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 00:39:02 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 00:39:02 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 00:39:02 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 00:39:02 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 00:39:02 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 00:39:02 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 00:39:02 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 00:39:02 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 00:39:02 INFO  homeplanner.database Initializing database tables...
2026-01-14 00:39:02 INFO  homeplanner.database Database URL: sqlite:///../homeplanner.db
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 00:39:02 INFO  homeplanner.database Database tables created successfully
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 00:39:02 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 00:39:02 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'debug_logs', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-14 00:39:02 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-14 00:39:02 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-14 00:39:02 DEBUG homeplanner.day_change_scheduler Waiting 8517 seconds until next day check at 2026-01-14 03:01:00
2026-01-14 00:39:03 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-14 00:39:03 INFO  homeplanner.realtime WS connect: id=139812234261280 host=192.168.1.2 port=52000 total=1
2026-01-14 00:43:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:43:26 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 00:43:26 INFO  sqlalchemy.engine.Engine [generated in 0.00044s] ('last_task_update', 1, 0)
2026-01-14 00:43:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 00:43:26 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 00:43:26 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 00:43:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:43:26 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 00:43:26 INFO  sqlalchemy.engine.Engine [cached since 0.005473s ago] ('last_task_update', 1, 0)
2026-01-14 00:43:26 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 00:43:26 INFO  sqlalchemy.engine.Engine [generated in 0.00030s] ()
2026-01-14 00:43:26 ERROR homeplanner.tasks get_tasks: [SERVER ERROR] Exception occurred: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py", line 130, in get_tasks
    tasks = TaskService.get_all_tasks(db, enabled_only=enabled_only)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 262, in get_all_tasks
    return query.order_by(Task.reminder_time).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 00:43:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 00:43:26 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 180, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 148, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 292, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 976, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py", line 130, in get_tasks
    tasks = TaskService.get_all_tasks(db, enabled_only=enabled_only)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 262, in get_all_tasks
    return query.order_by(Task.reminder_time).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 00:44:02 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 00:44:02 INFO  homeplanner.realtime WS connect: id=139812223921152 host=192.168.1.39 port=39204 total=2
2026-01-14 00:44:43 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:44:43 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 00:44:43 INFO  sqlalchemy.engine.Engine [cached since 77.34s ago] ('last_task_update', 1, 0)
2026-01-14 00:44:43 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 00:44:43 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 00:44:43 INFO  homeplanner.users Starting query for all users
2026-01-14 00:44:43 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:44:43 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 00:44:43 INFO  sqlalchemy.engine.Engine [generated in 0.00043s] ()
2026-01-14 00:44:43 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?, ?)
2026-01-14 00:44:43 INFO  sqlalchemy.engine.Engine [generated in 0.00049s] (1, 2, 3)
2026-01-14 00:44:43 ERROR homeplanner.users Error querying users: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?, ?)]
[parameters: (1, 2, 3)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/user_service.py", line 37, in get_all_users
    users = db.query(User).order_by(User.name).all()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/result.py", line 1774, in all
    return self._allrows()
           ^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/result.py", line 548, in _allrows
    rows = self._fetchall_impl()
           ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/result.py", line 1681, in _fetchall_impl
    return self._real_result._fetchall_impl()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/result.py", line 2275, in _fetchall_impl
    return list(self.iterator)
           ^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 247, in chunks
    post_load.invoke(context, path)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1564, in invoke
    loader(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 3338, in _load_for_path
    self._load_via_parent(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/strategies.py", line 3414, in _load_via_parent
    context.session.execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?, ?)]
[parameters: (1, 2, 3)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 00:44:43 INFO  homeplanner.api.users Returning 0 users (full mode) via API
2026-01-14 00:44:43 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 00:47:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:47:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 00:47:06 INFO  sqlalchemy.engine.Engine [cached since 220.3s ago] ('last_task_update', 1, 0)
2026-01-14 00:47:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 00:47:06 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 00:47:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 00:47:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 00:47:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 00:47:06 INFO  sqlalchemy.engine.Engine [cached since 220.3s ago] ('last_task_update', 1, 0)
2026-01-14 00:47:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 00:47:06 INFO  sqlalchemy.engine.Engine [generated in 0.00053s] ()
2026-01-14 00:47:06 ERROR homeplanner.tasks get_tasks: [SERVER ERROR] Exception occurred: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py", line 130, in get_tasks
    tasks = TaskService.get_all_tasks(db, enabled_only=enabled_only)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 262, in get_all_tasks
    return query.order_by(Task.reminder_time).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 00:47:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 00:47:06 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 180, in dispatch
    return await call_next(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 148, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 391, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 292, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2485, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 976, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/routers/tasks.py", line 130, in get_tasks
    tasks = TaskService.get_all_tasks(db, enabled_only=enabled_only)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 262, in get_all_tasks
    return query.order_by(Task.reminder_time).all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 00:47:42 INFO  homeplanner.realtime WS disconnect: id=139812223921152, total=1
2026-01-14 02:07:02 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 02:07:02 INFO  homeplanner.realtime WS connect: id=139812220783408 host=192.168.1.39 port=39150 total=2
2026-01-14 02:08:57 INFO  homeplanner.realtime WS disconnect: id=139812220783408, total=1
2026-01-14 03:00:59 INFO  homeplanner.day_change_scheduler Checking for new day and performing task recalculation if needed
2026-01-14 03:01:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 03:01:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 03:01:00 INFO  sqlalchemy.engine.Engine [cached since 8254s ago] ('last_task_update', 1, 0)
2026-01-14 03:01:00 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 03:01:00 INFO  sqlalchemy.engine.Engine [generated in 0.00056s] ()
2026-01-14 03:01:00 ERROR homeplanner.day_change_scheduler Error in day change check: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/day_change_scheduler.py", line 38, in check_and_notify
    is_new_day = TaskService.check_new_day(db, self.ws_manager)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 03:01:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 03:01:00 DEBUG homeplanner.day_change_scheduler Waiting 86400 seconds until next day check at 2026-01-15 03:01:00
2026-01-14 04:09:22 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 04:09:22 INFO  homeplanner.realtime WS connect: id=139812220783984 host=192.168.1.39 port=42330 total=2
2026-01-14 04:09:27 INFO  homeplanner.realtime WS disconnect: id=139812220783984, total=1
2026-01-14 06:18:18 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 06:18:18 INFO  homeplanner.realtime WS connect: id=139812220781584 host=192.168.1.39 port=43838 total=2
2026-01-14 06:21:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 06:21:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 06:21:58 INFO  sqlalchemy.engine.Engine [cached since 2.031e+04s ago] ('last_task_update', 1, 0)
2026-01-14 06:21:58 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 06:21:58 INFO  sqlalchemy.engine.Engine [cached since 1.206e+04s ago] ()
2026-01-14 06:21:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 06:21:58 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 06:23:55 INFO  homeplanner.realtime WS disconnect: id=139812220781584, total=1
2026-01-14 06:36:43 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 06:36:43 INFO  homeplanner.realtime WS connect: id=139812220792528 host=192.168.1.39 port=46400 total=2
2026-01-14 06:36:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 06:36:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 06:36:58 INFO  sqlalchemy.engine.Engine [cached since 2.121e+04s ago] ('last_task_update', 1, 0)
2026-01-14 06:36:58 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 06:36:58 INFO  sqlalchemy.engine.Engine [cached since 1.296e+04s ago] ()
2026-01-14 06:36:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 06:36:58 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 06:38:19 INFO  homeplanner.realtime WS disconnect: id=139812220792528, total=1
2026-01-14 07:00:59 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 07:00:59 INFO  homeplanner.realtime WS connect: id=139812220879936 host=192.168.1.39 port=43316 total=2
2026-01-14 07:06:49 INFO  homeplanner.realtime WS disconnect: id=139812220879936, total=1
2026-01-14 07:46:47 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 07:46:47 INFO  homeplanner.realtime WS connect: id=139812220883488 host=192.168.1.39 port=49804 total=2
2026-01-14 07:51:19 INFO  homeplanner.realtime WS disconnect: id=139812220883488, total=1
2026-01-14 08:16:15 DEBUG watchfiles.main 1 change detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db')}
2026-01-14 08:17:31 INFO  homeplanner.realtime WS disconnect: id=139812234261280, total=0
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 2.725e+04s ago] ('last_task_update', 1, 0)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 1.899e+04s ago] ()
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:17:32 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 2.725e+04s ago] ('last_task_update', 1, 0)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 1.899e+04s ago] ()
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:17:32 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 2.725e+04s ago] ('last_task_update', 1, 0)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 1.899e+04s ago] ()
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:17:32 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 2.725e+04s ago] ('last_task_update', 1, 0)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 1.899e+04s ago] ()
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 2.725e+04s ago] ('last_task_update', 1, 0)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 1.899e+04s ago] ()
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 2.725e+04s ago] ('last_task_update', 1, 0)
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine [cached since 1.899e+04s ago] ()
2026-01-14 08:17:32 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:17:32 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:17:32 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:17:32 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/home/sorg/.local/share/uv/python/cpython-3.12.12-linux-x86_64-gnu/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:17:32 INFO  homeplanner.realtime WebSocket connection attempt from 127.0.0.1, origin: http://192.168.1.2:8000
2026-01-14 08:17:32 INFO  homeplanner.realtime WS connect: id=139812220886416 host=127.0.0.1 port=32906 total=1
2026-01-14 08:19:24 INFO  homeplanner.realtime WS disconnect: id=139812220886416, total=0
2026-01-14 08:19:24 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-14 08:25:58 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 08:25:58 INFO  homeplanner.system uvicorn level: 10
2026-01-14 08:25:58 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 08:25:58 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 08:25:58 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 08:25:58 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 08:25:58 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 08:25:58 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 08:25:58 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 08:25:58 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 08:25:58 INFO  homeplanner.system HTTP mode (SSL not configured)
2026-01-14 08:25:59 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 08:25:59 INFO  homeplanner.system uvicorn level: 10
2026-01-14 08:25:59 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 08:25:59 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 08:25:59 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 08:25:59 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 08:25:59 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 08:25:59 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 08:25:59 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 08:25:59 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 08:26:00 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 08:26:00 INFO  homeplanner.database Initializing database tables...
2026-01-14 08:26:00 INFO  homeplanner.database Database URL: sqlite:///../homeplanner.db
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:26:00 INFO  homeplanner.database Database tables created successfully
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:26:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:26:00 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'debug_logs', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-14 08:26:00 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-14 08:26:00 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-14 08:26:00 DEBUG homeplanner.day_change_scheduler Waiting 66900 seconds until next day check at 2026-01-15 03:01:00
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [generated in 0.00062s] ('last_task_update', 1, 0)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [generated in 0.00045s] ()
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:26:05 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [cached since 0.07346s ago] ('last_task_update', 1, 0)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [cached since 0.0692s ago] ()
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:26:05 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [cached since 0.165s ago] ('last_task_update', 1, 0)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [cached since 0.1603s ago] ()
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:26:05 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [cached since 0.1876s ago] ('last_task_update', 1, 0)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [cached since 0.1824s ago] ()
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:26:05 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [cached since 0.2089s ago] ('last_task_update', 1, 0)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [cached since 0.2036s ago] ()
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [cached since 0.2122s ago] ('last_task_update', 1, 0)
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine [cached since 0.2067s ago] ()
2026-01-14 08:26:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:26:05 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:26:05 ERROR homeplanner.system Unhandled exception in FastAPI app: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: tasks.alarm

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib64/python3.14/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/main.py", line 175, in dispatch
    TaskService.check_new_day(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 123, in check_new_day
    TaskService.recalculate_tasks(db)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/mnt/ZFS/Dev/HomePlanner/backend/services/task_service.py", line 168, in recalculate_tasks
    .all()
     ~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
           ~~~~~~~~~~^^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/mnt/ZFS/Dev/HomePlanner/.venv/lib64/python3.14/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: tasks.alarm
[SQL: SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-14 08:26:11 INFO  homeplanner.realtime WebSocket connection attempt from 127.0.0.1, origin: http://192.168.1.2:8000
2026-01-14 08:26:11 INFO  homeplanner.realtime WS connect: id=140629777901008 host=127.0.0.1 port=46732 total=1
2026-01-14 08:33:01 INFO  homeplanner.realtime WS disconnect: id=140629777901008, total=0
2026-01-14 08:33:01 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-14 08:34:58 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 08:34:58 INFO  homeplanner.system uvicorn level: 10
2026-01-14 08:34:58 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 08:34:58 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 08:34:58 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 08:34:58 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 08:34:58 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 08:34:58 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 08:34:58 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 08:34:58 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 08:34:58 INFO  homeplanner.system HTTP mode (SSL not configured)
2026-01-14 08:34:59 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 08:34:59 INFO  homeplanner.system uvicorn level: 10
2026-01-14 08:34:59 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 08:34:59 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 08:34:59 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 08:34:59 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 08:34:59 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 08:34:59 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 08:34:59 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 08:34:59 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 08:34:59 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 08:34:59 INFO  homeplanner.database Initializing database tables...
2026-01-14 08:34:59 INFO  homeplanner.database Database URL: sqlite:///./homeplanner.db
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:34:59 INFO  homeplanner.database Database tables created successfully
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:34:59 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:34:59 INFO  homeplanner.database Available tables after init: ['app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-14 08:34:59 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-14 08:34:59 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-14 08:34:59 DEBUG homeplanner.day_change_scheduler Waiting 66360 seconds until next day check at 2026-01-15 03:01:00
2026-01-14 08:35:02 INFO  homeplanner.realtime WebSocket connection attempt from 127.0.0.1, origin: http://192.168.1.2:8000
2026-01-14 08:35:02 INFO  homeplanner.realtime WS connect: id=140517499519376 host=127.0.0.1 port=48014 total=1
2026-01-14 08:35:08 INFO  homeplanner.realtime WS disconnect: id=140517499519376, total=0
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine [generated in 0.00041s] ('last_task_update', 1, 0)
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.completed = 1
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine [generated in 0.00055s] ()
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine [cached since 0.008542s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine INSERT INTO app_metadata ("key", value, updated_at) VALUES (?, ?, ?)
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine [generated in 0.00039s] ('last_task_update', '2026-01-14 08:35:08.851046', '2026-01-14 08:35:08.854271')
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine [cached since 0.1504s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine [cached since 0.1535s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine [cached since 0.1553s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:08 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine [cached since 0.1571s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:09 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:35:09 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:35:09 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:09 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:09 INFO  homeplanner.users Starting query for all users
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine [generated in 0.00031s] ()
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine [cached since 0.1721s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine [cached since 0.1745s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine [generated in 0.00286s] ()
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine [generated in 0.00524s] ()
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine [cached since 0.005713s ago] ()
2026-01-14 08:35:09 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 0 tasks in database
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:09 INFO  homeplanner.users Query executed successfully, found 0 users
2026-01-14 08:35:09 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 0 tasks to client
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:35:09 WARNING homeplanner.users No users found in database - checking if table exists
2026-01-14 08:35:09 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 0 task IDs for user 1
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:09 WARNING homeplanner.users Available tables: ['app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-14 08:35:09 WARNING homeplanner.users Users table exists but is empty
2026-01-14 08:35:09 INFO  homeplanner.api.users Returning 0 users (full mode) via API
2026-01-14 08:35:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine [cached since 3.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine [cached since 3.304s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine [cached since 3.306s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine [cached since 3.309s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:12 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=None
2026-01-14 08:35:12 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning [] because selected_user_id is None
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:12 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:35:12 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:35:12 INFO  homeplanner.users Starting query for all users
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:35:12 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine [cached since 3.146s ago] ()
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine [cached since 3.14s ago] ()
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:12 INFO  homeplanner.users Query executed successfully, found 0 users
2026-01-14 08:35:12 WARNING homeplanner.users No users found in database - checking if table exists
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine [cached since 3.323s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:12 WARNING homeplanner.users Available tables: ['app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-14 08:35:12 WARNING homeplanner.users Users table exists but is empty
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:35:12 INFO  homeplanner.api.users Returning 0 users (full mode) via API
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine [cached since 3.15s ago] ()
2026-01-14 08:35:12 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 0 tasks in database
2026-01-14 08:35:12 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 0 tasks to client
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:35:12 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:14 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-14 08:35:14 INFO  homeplanner.realtime WS connect: id=140517499710832 host=192.168.1.2 port=33026 total=1
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine [cached since 11.66s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine [cached since 11.67s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine [cached since 11.67s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine [cached since 11.68s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:20 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:35:20 INFO  homeplanner.users Starting query for all users
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:35:20 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=None
2026-01-14 08:35:20 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine [cached since 11.51s ago] ()
2026-01-14 08:35:20 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning [] because selected_user_id is None
2026-01-14 08:35:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine [cached since 11.51s ago] ()
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine [cached since 11.69s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:20 INFO  homeplanner.users Query executed successfully, found 0 users
2026-01-14 08:35:20 WARNING homeplanner.users No users found in database - checking if table exists
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine [cached since 11.52s ago] ()
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-14 08:35:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 0 tasks in database
2026-01-14 08:35:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 0 tasks to client
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:20 WARNING homeplanner.users Available tables: ['app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-14 08:35:20 WARNING homeplanner.users Users table exists but is empty
2026-01-14 08:35:20 INFO  homeplanner.api.users Returning 0 users (full mode) via API
2026-01-14 08:35:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:50 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 08:35:50 INFO  homeplanner.realtime WS connect: id=140517499390864 host=192.168.1.39 port=43762 total=2
2026-01-14 08:35:50 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:50 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:50 INFO  sqlalchemy.engine.Engine [cached since 41.77s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:50 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:50 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 08:35:50 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 08:35:50 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:50 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:50 INFO  sqlalchemy.engine.Engine [cached since 41.78s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:50 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 08:35:50 INFO  sqlalchemy.engine.Engine [generated in 0.00054s] ()
2026-01-14 08:35:50 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 0 tasks in database
2026-01-14 08:35:50 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 0 tasks to client
2026-01-14 08:35:50 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine [cached since 42.85s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:51 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 08:35:51 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine [cached since 42.85s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine [cached since 1.077s ago] ()
2026-01-14 08:35:51 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 0 tasks in database
2026-01-14 08:35:51 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 0 tasks to client
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine [cached since 42.88s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine [cached since 42.71s ago] ()
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine [cached since 42.9s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:51 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 08:35:51 INFO  homeplanner.users Starting query for simple users
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine [generated in 0.00056s] ()
2026-01-14 08:35:51 INFO  homeplanner.users Query executed successfully, found 0 active users
2026-01-14 08:35:51 INFO  homeplanner.api.users Returning 0 active users (simple mode) via API
2026-01-14 08:35:51 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine [cached since 43.37s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine [cached since 43.2s ago] ()
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine [cached since 43.38s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:52 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 08:35:52 INFO  homeplanner.users Starting query for simple users
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine [cached since 0.4748s ago] ()
2026-01-14 08:35:52 INFO  homeplanner.users Query executed successfully, found 0 active users
2026-01-14 08:35:52 INFO  homeplanner.api.users Returning 0 active users (simple mode) via API
2026-01-14 08:35:52 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:56 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:56 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:35:56 INFO  sqlalchemy.engine.Engine [cached since 47.25s ago] ('last_task_update', 1, 0)
2026-01-14 08:35:56 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:35:56 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 08:35:56 INFO  homeplanner.users Starting query for simple users
2026-01-14 08:35:56 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:35:56 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 08:35:56 INFO  sqlalchemy.engine.Engine [cached since 4.349s ago] ()
2026-01-14 08:35:56 INFO  homeplanner.users Query executed successfully, found 0 active users
2026-01-14 08:35:56 INFO  homeplanner.api.users Returning 0 active users (simple mode) via API
2026-01-14 08:35:56 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.2s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine INSERT INTO users (name, email, role, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [generated in 0.00040s] ('', 'sorg2@yandex.ru', 'ADMIN', 1, '2026-01-14 08:37:20.070794', '2026-01-14 08:37:20.070802')
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT users.id, users.name, users.email, users.role, users.is_active, users.created_at, users.updated_at 
FROM users 
WHERE users.id = ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [generated in 0.00031s] (1,)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks, task_users 
WHERE ? = task_users.user_id AND tasks.id = task_users.task_id
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [generated in 0.00040s] (1,)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:37:20 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=None
2026-01-14 08:37:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:20 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning [] because selected_user_id is None
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.1s ago] ()
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.1s ago] ()
2026-01-14 08:37:20 INFO  homeplanner.users Starting query for all users
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.1s ago] ()
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 0 tasks in database
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?)
2026-01-14 08:37:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 0 tasks to client
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [generated in 0.00058s] (1,)
2026-01-14 08:37:20 INFO  homeplanner.users Query executed successfully, found 1 users
2026-01-14 08:37:20 DEBUG homeplanner.users Users: [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:37:20 INFO  homeplanner.api.users Returning 1 users (full mode) via API
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:37:20 INFO  homeplanner.users Starting query for all users
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:37:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:37:20 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=None
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.2s ago] ()
2026-01-14 08:37:20 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning [] because selected_user_id is None
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.4s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.2s ago] ()
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 0.03681s ago] (1,)
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:37:20 INFO  homeplanner.users Query executed successfully, found 1 users
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine [cached since 131.2s ago] ()
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 0 tasks in database
2026-01-14 08:37:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 0 tasks to client
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:37:20 DEBUG homeplanner.users Users: [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:37:20 INFO  homeplanner.api.users Returning 1 users (full mode) via API
2026-01-14 08:37:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.5s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine INSERT INTO users (name, email, role, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 34.23s ago] ('', 'lyokyk@rambler.ru', 'REGULAR', 1, '2026-01-14 08:37:54.302261', '2026-01-14 08:37:54.302277')
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT users.id, users.name, users.email, users.role, users.is_active, users.created_at, users.updated_at 
FROM users 
WHERE users.id = ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 34.22s ago] (2,)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks, task_users 
WHERE ? = task_users.user_id AND tasks.id = task_users.task_id
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 34.22s ago] (2,)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.5s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.5s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.5s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.5s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:37:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:37:54 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=None
2026-01-14 08:37:54 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning [] because selected_user_id is None
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:37:54 INFO  homeplanner.users Starting query for all users
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.6s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.4s ago] ()
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.4s ago] ()
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.4s ago] ()
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 0 tasks in database
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 34.24s ago] (2, 1)
2026-01-14 08:37:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 0 tasks to client
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:37:54 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 08:37:54 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:37:54 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.6s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.6s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.6s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.6s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:37:54 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:37:54 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=None
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:37:54 INFO  homeplanner.users Starting query for all users
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.4s ago] ()
2026-01-14 08:37:54 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning [] because selected_user_id is None
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.4s ago] ()
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.6s ago] ('last_task_update', 1, 0)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 34.29s ago] (2, 1)
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine [cached since 165.4s ago] ()
2026-01-14 08:37:54 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 08:37:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 0 tasks in database
2026-01-14 08:37:54 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:37:54 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 0 tasks to client
2026-01-14 08:37:54 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:37:54 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine [cached since 392.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine [cached since 392.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine [cached since 392.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine [cached since 392.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:41:41 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=None
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine [cached since 392.2s ago] ()
2026-01-14 08:41:41 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:41:41 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning [] because selected_user_id is None
2026-01-14 08:41:41 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:41:41 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:41:41 INFO  homeplanner.users Starting query for all users
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine [cached since 392.3s ago] ('last_task_update', 1, 0)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine [cached since 392.2s ago] ()
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine [cached since 392.2s ago] ()
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine [cached since 261s ago] (2, 1)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine [generated in 0.00075s] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:41:41 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 08:41:41 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:41:41 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:41:41 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 08:41:41 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:41:41 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:41:41 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 08:41:41 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 08:41:41 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:42:14 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/frontend/utils.js')}
2026-01-14 08:42:22 INFO  homeplanner.realtime WS disconnect: id=140517499710832, total=1
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine [cached since 433.8s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine [cached since 433.9s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:22 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:42:22 INFO  homeplanner.users Starting query for all users
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine [cached since 433.8s ago] ()
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine [cached since 302.6s ago] (2, 1)
2026-01-14 08:42:22 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 08:42:22 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:42:22 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 08:42:22 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 435.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 435.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 435.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 435.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:24 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:42:24 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:42:24 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:24 INFO  homeplanner.users Starting query for all users
2026-01-14 08:42:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 435.6s ago] ()
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 435.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 435.6s ago] ()
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 435.8s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 435.6s ago] ()
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 435.6s ago] ()
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 304.4s ago] (2, 1)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 43.43s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine [cached since 43.43s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:42:24 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 08:42:24 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:42:24 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:24 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 8 task IDs for user 1
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 08:42:24 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:42:24 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:42:24 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 08:42:24 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 08:42:24 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:42:24 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-14 08:42:24 INFO  homeplanner.realtime WS connect: id=140517499871824 host=192.168.1.2 port=47518 total=2
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 439.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 439.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 439.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 439.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:28 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:42:28 INFO  homeplanner.users Starting query for all users
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:28 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:28 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 439.5s ago] ()
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:42:28 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 439.5s ago] ()
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 439.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 439.5s ago] ()
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 439.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 308.4s ago] (2, 1)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 439.5s ago] ()
2026-01-14 08:42:28 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 08:42:28 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:42:28 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 47.35s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine [cached since 47.35s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:42:28 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 8 task IDs for user 1
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:28 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 08:42:28 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:42:28 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:42:28 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 08:42:28 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 08:42:28 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:42:36 INFO  homeplanner.realtime WS disconnect: id=140517499390864, total=1
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 458s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 458s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 458s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 458s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:46 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:42:46 INFO  homeplanner.users Starting query for all users
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:46 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:46 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:46 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 457.8s ago] ()
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 457.8s ago] ()
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 458s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 458s ago] ('last_task_update', 1, 0)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 326.7s ago] (2, 1)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 457.8s ago] ()
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 457.8s ago] ()
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 65.67s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:42:46 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 08:42:46 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:42:46 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine [cached since 65.67s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:42:46 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 08:42:46 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:42:46 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:42:46 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 08:42:46 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:42:46 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 8 task IDs for user 1
2026-01-14 08:42:46 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:45:54 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 08:45:54 INFO  homeplanner.realtime WS connect: id=140517499926352 host=192.168.1.39 port=38640 total=2
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine [cached since 646.4s ago] ('last_task_update', 1, 0)
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:45:55 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 08:45:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine [cached since 646.4s ago] ('last_task_update', 1, 0)
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine [cached since 604.7s ago] ()
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine [cached since 254.1s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:45:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 08:45:55 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:45:55 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:45:55 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 08:45:55 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 08:45:55 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine [cached since 647.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:45:56 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 08:45:56 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine [cached since 647.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine [cached since 605.9s ago] ()
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine [cached since 255.4s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:45:56 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 08:45:56 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:45:56 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:45:56 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 08:45:56 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine [cached since 647.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine [cached since 647.6s ago] ()
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine [cached since 647.8s ago] ('last_task_update', 1, 0)
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:45:56 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 08:45:56 INFO  homeplanner.users Starting query for simple users
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine [cached since 604.9s ago] ()
2026-01-14 08:45:56 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 08:45:56 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 08:45:56 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine [cached since 649.2s ago] ('last_task_update', 1, 0)
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine [cached since 649.1s ago] ()
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine [cached since 649.2s ago] ('last_task_update', 1, 0)
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:45:58 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 08:45:58 INFO  homeplanner.users Starting query for simple users
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine [cached since 606.3s ago] ()
2026-01-14 08:45:58 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 08:45:58 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 08:45:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:46:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:46:01 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:46:01 INFO  sqlalchemy.engine.Engine [cached since 652.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:46:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:46:01 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 08:46:01 INFO  homeplanner.users Starting query for simple users
2026-01-14 08:46:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:46:01 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 08:46:01 INFO  sqlalchemy.engine.Engine [cached since 609.8s ago] ()
2026-01-14 08:46:01 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 08:46:01 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 08:46:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:46:04 INFO  sqlalchemy.engine.Engine [cached since 655.5s ago] ('last_task_update', 1, 0)
2026-01-14 08:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:46:04 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 08:46:04 INFO  homeplanner.users Starting query for simple users
2026-01-14 08:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 08:46:04 INFO  sqlalchemy.engine.Engine [cached since 612.6s ago] ()
2026-01-14 08:46:04 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 08:46:04 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 08:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:49:09 INFO  homeplanner.realtime WS disconnect: id=140517499871824, total=1
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 840.6s ago] ('last_task_update', 1, 0)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 840.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 840.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 840.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 840.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:49:09 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:49:09 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:49:09 INFO  homeplanner.users Starting query for all users
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:49:09 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:49:09 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 840.6s ago] ()
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 840.7s ago] ('last_task_update', 1, 0)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 840.6s ago] ()
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 840.6s ago] ()
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 840.8s ago] ('last_task_update', 1, 0)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 709.4s ago] (2, 1)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 840.6s ago] ()
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 448.4s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:49:09 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 08:49:09 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:49:09 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine [cached since 448.4s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:49:09 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 8 task IDs for user 1
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:49:09 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 08:49:09 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:49:09 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:49:09 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 08:49:09 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 08:49:09 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:49:09 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-14 08:49:09 INFO  homeplanner.realtime WS connect: id=140517445856832 host=192.168.1.2 port=44340 total=2
2026-01-14 08:52:20 INFO  homeplanner.realtime WS disconnect: id=140517499926352, total=1
2026-01-14 08:53:52 DEBUG watchfiles.main 3 changes detected: {(<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/alembic/__pycache__/env.cpython-314.pyc'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/alembic/__pycache__/env.cpython-314.pyc.140582281197744'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/alembic/__pycache__/env.cpython-314.pyc.140582281197744')}
2026-01-14 08:54:02 DEBUG watchfiles.main 1 change detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db')}
2026-01-14 08:54:18 DEBUG watchfiles.main 3 changes detected: {(<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db')}
2026-01-14 08:57:29 INFO  homeplanner.realtime WS disconnect: id=140517445856832, total=0
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1340s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1340s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1340s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1340s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1340s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:29 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:57:29 INFO  homeplanner.users Starting query for all users
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:29 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:57:29 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:57:29 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1340s ago] ()
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1340s ago] ()
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1340s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1340s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1209s ago] (2, 1)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1340s ago] ()
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 1340s ago] ()
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 948s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:57:29 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 8 task IDs for user 1
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine [cached since 948s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:57:29 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 08:57:29 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:57:29 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:29 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 08:57:29 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:57:29 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:57:29 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 08:57:29 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 08:57:29 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:57:29 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-14 08:57:29 INFO  homeplanner.realtime WS connect: id=140517446794864 host=192.168.1.2 port=33492 total=1
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 1343s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 1343s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 1343s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 1343s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:31 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 08:57:31 INFO  homeplanner.users Starting query for all users
2026-01-14 08:57:31 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 08:57:31 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 08:57:31 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 1343s ago] ()
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 1343s ago] ()
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 1343s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 1343s ago] ('last_task_update', 1, 0)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 1212s ago] (2, 1)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 1343s ago] ()
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 1343s ago] ()
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 950.7s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine [cached since 950.7s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 08:57:31 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 08:57:31 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 08:57:31 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:57:31 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 08:57:31 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:57:31 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 08:57:31 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 08:57:31 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 08:57:31 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 8 task IDs for user 1
2026-01-14 08:57:31 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 08:58:58 INFO  homeplanner.realtime WS disconnect: id=140517446794864, total=0
2026-01-14 08:58:59 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-14 09:00:59 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 09:00:59 INFO  homeplanner.system uvicorn level: 10
2026-01-14 09:00:59 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 09:00:59 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 09:00:59 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 09:00:59 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 09:00:59 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 09:00:59 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 09:00:59 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 09:00:59 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 09:00:59 INFO  homeplanner.system HTTP mode (SSL not configured)
2026-01-14 09:01:00 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 09:01:00 INFO  homeplanner.system uvicorn level: 10
2026-01-14 09:01:00 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 09:01:00 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 09:01:00 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 09:01:00 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 09:01:00 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 09:01:00 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 09:01:00 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 09:01:00 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 09:01:00 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 09:01:00 INFO  homeplanner.database Initializing database tables...
2026-01-14 09:01:01 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 09:01:01 INFO  homeplanner.database Database tables created successfully
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 09:01:01 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:01 INFO  homeplanner.database Available tables after init: ['app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-14 09:01:01 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-14 09:01:01 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-14 09:01:01 DEBUG homeplanner.day_change_scheduler Waiting 64799 seconds until next day check at 2026-01-15 03:01:00
2026-01-14 09:01:01 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-14 09:01:01 INFO  homeplanner.realtime WS connect: id=140015963472912 host=192.168.1.2 port=37108 total=1
2026-01-14 09:01:05 INFO  homeplanner.realtime WS disconnect: id=140015963472912, total=0
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [generated in 0.00044s] ('last_task_update', 1, 0)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [cached since 0.1116s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [cached since 0.1146s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [cached since 0.1171s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [cached since 0.1196s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:05 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 09:01:05 INFO  homeplanner.users Starting query for all users
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [generated in 0.00101s] ()
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 09:01:05 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 09:01:05 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [generated in 0.00101s] ()
2026-01-14 09:01:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [generated in 0.00281s] (2, 1)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [cached since 0.1592s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [cached since 0.1587s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [generated in 0.00179s] ()
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [cached since 0.002258s ago] ()
2026-01-14 09:01:05 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 09:01:05 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 09:01:05 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [generated in 0.00226s] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine [cached since 0.002643s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 09:01:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 09:01:05 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:01:05 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:01:05 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 8 task IDs for user 1
2026-01-14 09:01:05 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 09:01:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 09:01:10 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-14 09:01:10 INFO  homeplanner.realtime WS connect: id=140015963673728 host=192.168.1.2 port=44182 total=1
2026-01-14 09:01:20 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 09:01:20 INFO  homeplanner.realtime WS connect: id=140015963367056 host=192.168.1.39 port=48970 total=2
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine [cached since 15s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:20 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 09:01:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine [cached since 15.01s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine [generated in 0.00058s] ()
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine [cached since 14.84s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 09:01:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 09:01:20 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:01:20 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:01:20 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 09:01:20 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 09:01:20 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine [cached since 16.24s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:22 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 09:01:22 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine [cached since 16.24s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine [cached since 1.236s ago] ()
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine [cached since 16.07s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 09:01:22 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 35 tasks in database
2026-01-14 09:01:22 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:01:22 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:01:22 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 09:01:22 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 35 tasks to client
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine [cached since 16.28s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine [cached since 16.15s ago] ()
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine [cached since 16.3s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:22 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 09:01:22 INFO  homeplanner.users Starting query for simple users
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine [generated in 0.00026s] ()
2026-01-14 09:01:22 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 09:01:22 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 09:01:22 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine [cached since 17.8s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine [cached since 17.67s ago] ()
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine [cached since 17.83s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:23 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 09:01:23 INFO  homeplanner.users Starting query for simple users
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine [cached since 1.532s ago] ()
2026-01-14 09:01:23 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 09:01:23 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 09:01:23 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:26 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:01:26 INFO  sqlalchemy.engine.Engine [cached since 20.9s ago] ('last_task_update', 1, 0)
2026-01-14 09:01:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:01:26 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 09:01:26 INFO  homeplanner.users Starting query for simple users
2026-01-14 09:01:26 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:01:26 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 09:01:26 INFO  sqlalchemy.engine.Engine [cached since 4.597s ago] ()
2026-01-14 09:01:26 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 09:01:26 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 09:01:26 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:02:16 DEBUG watchfiles.main 3 changes detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal')}
2026-01-14 09:03:25 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:03:25 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:03:25 INFO  sqlalchemy.engine.Engine [cached since 139.7s ago] ('last_task_update', 1, 0)
2026-01-14 09:03:25 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:04:11 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:04:11 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:04:11 INFO  sqlalchemy.engine.Engine [cached since 185.6s ago] ('last_task_update', 1, 0)
2026-01-14 09:04:11 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine [cached since 197.2s ago] ('last_task_update', 1, 0)
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:04:22 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 127.0.0.1, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 09:04:22 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 127.0.0.1, enabled_only=False, days_ahead=None, selected_user_id=None
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine [cached since 197.2s ago] ('last_task_update', 1, 0)
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine [cached since 197s ago] ()
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine [cached since 197s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 09:04:22 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 09:04:22 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:04:22 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:04:22 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 09:04:22 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 09:04:22 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 09:08:47 INFO  homeplanner.realtime WS disconnect: id=140015963367056, total=1
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine [cached since 1110s ago] ('last_task_update', 1, 0)
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:19:35 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 127.0.0.1, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 09:19:35 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 127.0.0.1, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine [cached since 1110s ago] ('last_task_update', 1, 0)
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine [cached since 1095s ago] ()
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine [cached since 1110s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 09:19:35 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 09:19:35 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:19:35 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:19:35 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 09:19:35 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 09:19:35 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine [cached since 1124s ago] ('last_task_update', 1, 0)
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 09:19:49 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 127.0.0.1, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 09:19:49 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 127.0.0.1, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine [cached since 1124s ago] ('last_task_update', 1, 0)
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine [cached since 1109s ago] ()
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine [cached since 1124s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 09:19:49 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 09:19:49 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:19:49 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 09:19:49 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 09:19:49 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 09:19:49 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 09:23:14 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 09:23:14 INFO  homeplanner.realtime WS connect: id=140015936387232 host=192.168.1.39 port=39746 total=2
2026-01-14 09:23:14 INFO  homeplanner.realtime WS disconnect: id=140015936387232, total=1
2026-01-14 21:14:56 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 21:14:56 INFO  homeplanner.realtime WS connect: id=140015963876944 host=192.168.1.39 port=39954 total=2
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] ('last_task_update', 1, 0)
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:14:56 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 21:14:56 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] ('last_task_update', 1, 0)
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine [cached since 4.402e+04s ago] ()
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 21:14:56 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 21:14:56 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 21:14:56 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 21:14:56 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 21:14:56 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 21:14:56 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] ('last_task_update', 1, 0)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:14:58 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 21:14:58 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] ('last_task_update', 1, 0)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine [cached since 4.402e+04s ago] ()
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 21:14:58 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 21:14:58 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 21:14:58 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 21:14:58 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 21:14:58 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] ('last_task_update', 1, 0)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] ()
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] ('last_task_update', 1, 0)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:14:58 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 21:14:58 INFO  homeplanner.users Starting query for simple users
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine [cached since 4.402e+04s ago] ()
2026-01-14 21:14:58 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 21:14:58 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] ('last_task_update', 1, 0)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:14:58 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 21:14:58 INFO  homeplanner.users Starting query for simple users
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine [cached since 4.402e+04s ago] ()
2026-01-14 21:14:58 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 21:14:58 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 21:14:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] ('last_task_update', 1, 0)
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine [cached since 4.403e+04s ago] ()
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine [cached since 4.404e+04s ago] ('last_task_update', 1, 0)
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:15:00 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 21:15:00 INFO  homeplanner.users Starting query for simple users
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine [cached since 4.402e+04s ago] ()
2026-01-14 21:15:00 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 21:15:00 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 21:15:00 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 21:22:02 INFO  homeplanner.realtime WS disconnect: id=140015963876944, total=1
2026-01-14 21:28:04 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 21:28:04 INFO  homeplanner.realtime WS connect: id=140015936773952 host=192.168.1.39 port=37116 total=2
2026-01-14 21:28:11 INFO  homeplanner.realtime WS disconnect: id=140015936773952, total=1
2026-01-14 21:39:16 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 21:39:16 INFO  homeplanner.realtime WS connect: id=140015936478736 host=192.168.1.39 port=43168 total=2
2026-01-14 21:39:39 INFO  homeplanner.realtime WS disconnect: id=140015936478736, total=1
2026-01-14 22:24:00 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.39, origin: None
2026-01-14 22:24:00 INFO  homeplanner.realtime WS connect: id=140015954335824 host=192.168.1.39 port=48968 total=2
2026-01-14 22:30:14 INFO  homeplanner.realtime WS disconnect: id=140015954335824, total=1
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:34:57 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 22:34:57 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine [cached since 4.882e+04s ago] ()
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:34:57 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:34:57 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:34:57 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:34:57 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:34:57 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:34:57 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] ()
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:34:58 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 22:34:58 INFO  homeplanner.users Starting query for simple users
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.882e+04s ago] ()
2026-01-14 22:34:58 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 22:34:58 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:34:58 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 22:34:58 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.39, enabled_only=True, days_ahead=None, selected_user_id=None
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.enabled = 1 ORDER BY tasks.reminder_time
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.882e+04s ago] ()
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:34:58 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:34:58 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:34:58 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:34:58 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:34:58 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] ()
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.883e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:34:58 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 22:34:58 INFO  homeplanner.users Starting query for simple users
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine [cached since 4.882e+04s ago] ()
2026-01-14 22:34:58 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 22:34:58 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 22:34:58 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:35:02 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:35:02 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:35:02 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:35:02 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:35:02 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 22:35:02 INFO  homeplanner.users Starting query for simple users
2026-01-14 22:35:02 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:35:02 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 22:35:02 INFO  sqlalchemy.engine.Engine [cached since 4.882e+04s ago] ()
2026-01-14 22:35:02 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 22:35:02 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 22:35:02 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:35:10 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:35:10 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:35:10 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:35:10 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:35:10 INFO  homeplanner.users Starting query for all users
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] ()
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] ()
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] ()
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] ()
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] (2, 1)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine [cached since 4.884e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:35:10 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:35:10 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:35:10 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:35:10 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:35:10 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:35:10 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:35:10 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:35:10 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:35:10 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:35:10 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:03 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 8 operations
2026-01-14 22:46:03 INFO  homeplanner.tasks HTTP sync-queue: 8 operations
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:03 INFO  homeplanner.tasks sync-queue: processing 8 operations
2026-01-14 22:46:03 INFO  homeplanner.tasks sync-queue: processing operation 1/8: TaskOperationType.COMPLETE for task 1 with timestamp 2026-01-14 19:35:16.676000+00:00
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine [generated in 0.00066s] (1, 1, 0)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1,)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine [generated in 0.00069s] (1, '2026-01-14 19:35:16.676000', 1)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine [generated in 0.00062s] (1,)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine [generated in 0.00064s] (1,)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine [generated in 0.00077s] (1, 'CONFIRMED', '2026-01-14 22:46:03.947960', '2026-01-11 09:00:00.000000', None, None)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine [generated in 0.00049s] (40,)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine [generated in 0.00028s] (1,)
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:03 INFO  sqlalchemy.engine.Engine [cached since 0.05172s ago] (1,)
2026-01-14 22:46:03 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 1, 'task': {'title': 'Test Task 1 (Day -3, Type recurring)', 'description': 'Test task for day -3, type recurring', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 9, 'interval_days': None, 'reminder_time': '2026-01-11T09:00:00', 'alarm': True, 'group_id': None, 'id': 1, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.397229', 'updated_at': '2026-01-14T19:35:16.676000', 'readable_config': ' 09:00  9 ', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:03 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 1, "task": {"title": "Test Task 1 (Day -3, Type recurring)", "description": "Test task for day -3, type recurring", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 9, "interval_days": null, "reminder_time": "2026-01-11T09:00:00", "alarm": true, "group_id": null, "id": 1, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.397229", "updated_at": "2026-01-14T19:35:16.676000", "readable_config": " 09:00  9 ", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:03 INFO  homeplanner.tasks sync-queue: processing operation 2/8: TaskOperationType.UNCOMPLETE for task 1 with timestamp 2026-01-14 19:35:19.402000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.1228s ago] (1, 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1,)
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.RECURRING, completed=True, enabled=True, reminder_time=2026-01-11 09:00:00
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-14 19:35:19.402000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.1167s ago] (0, '2026-01-14 19:35:19.402000', 1)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.09745s ago] (1,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.09122s ago] (1,)
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-11 09:00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.08571s ago] (1, 'UNCONFIRMED', '2026-01-14 22:46:04.037986', '2026-01-11 09:00:00.000000', None, None)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.08121s ago] (41,)
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.08004s ago] (1,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.132s ago] (1,)
2026-01-14 22:46:04 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 1, 'task': {'title': 'Test Task 1 (Day -3, Type recurring)', 'description': 'Test task for day -3, type recurring', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 9, 'interval_days': None, 'reminder_time': '2026-01-11T09:00:00', 'alarm': True, 'group_id': None, 'id': 1, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.397229', 'updated_at': '2026-01-14T19:35:19.402000', 'readable_config': ' 09:00  9 ', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "uncompleted", "task_id": 1, "task": {"title": "Test Task 1 (Day -3, Type recurring)", "description": "Test task for day -3, type recurring", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 9, "interval_days": null, "reminder_time": "2026-01-11T09:00:00", "alarm": true, "group_id": null, "id": 1, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.397229", "updated_at": "2026-01-14T19:35:19.402000", "readable_config": " 09:00  9 ", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:04 INFO  homeplanner.tasks sync-queue: processing operation 3/8: TaskOperationType.COMPLETE for task 13 with timestamp 2026-01-14 19:35:20.388000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.2217s ago] (13, 1, 0)
2026-01-14 22:46:04 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:04 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (13,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.2245s ago] (1, '2026-01-14 19:35:20.388000', 13)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.2181s ago] (13,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.2136s ago] (13,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.2112s ago] (13, 'CONFIRMED', '2026-01-14 22:46:04.163150', '2026-01-13 09:00:00.000000', None, None)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:04 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:04 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:04 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.216s ago] (42,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.2151s ago] (13,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.2671s ago] (13,)
2026-01-14 22:46:04 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 13, 'task': {'title': 'Test Task 13 (Day -1, Type interval)', 'description': 'Test task for day -1, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 6, 'reminder_time': '2026-01-13T09:00:00', 'alarm': True, 'group_id': None, 'id': 13, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.957809', 'updated_at': '2026-01-14T19:35:20.388000', 'readable_config': '  6   09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 13, "task": {"title": "Test Task 13 (Day -1, Type interval)", "description": "Test task for day -1, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 6, "reminder_time": "2026-01-13T09:00:00", "alarm": true, "group_id": null, "id": 13, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.957809", "updated_at": "2026-01-14T19:35:20.388000", "readable_config": "  6   09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  homeplanner.tasks sync-queue: processing operation 4/8: TaskOperationType.UNCOMPLETE for task 13 with timestamp 2026-01-14 19:35:24.356000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.3577s ago] (13, 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (13,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.INTERVAL, completed=True, enabled=True, reminder_time=2026-01-13 09:00:00
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-14 19:35:24.356000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.3532s ago] (0, '2026-01-14 19:35:24.356000', 13)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.3408s ago] (13,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.3345s ago] (13,)
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-13 09:00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.3286s ago] (13, 'UNCONFIRMED', '2026-01-14 22:46:04.280996', '2026-01-13 09:00:00.000000', None, None)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.3174s ago] (43,)
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=13
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.3159s ago] (13,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.3671s ago] (13,)
2026-01-14 22:46:04 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 13, 'task': {'title': 'Test Task 13 (Day -1, Type interval)', 'description': 'Test task for day -1, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 6, 'reminder_time': '2026-01-13T09:00:00', 'alarm': True, 'group_id': None, 'id': 13, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.957809', 'updated_at': '2026-01-14T19:35:24.356000', 'readable_config': '  6   09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "uncompleted", "task_id": 13, "task": {"title": "Test Task 13 (Day -1, Type interval)", "description": "Test task for day -1, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 6, "reminder_time": "2026-01-13T09:00:00", "alarm": true, "group_id": null, "id": 13, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.957809", "updated_at": "2026-01-14T19:35:24.356000", "readable_config": "  6   09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:04 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:04 INFO  homeplanner.tasks sync-queue: processing operation 5/8: TaskOperationType.COMPLETE for task 18 with timestamp 2026-01-14 19:35:25.768000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.4617s ago] (18, 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (18,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.4652s ago] (1, '2026-01-14 19:35:25.768000', 18)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:04 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:04 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:04 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.4728s ago] (18,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.4665s ago] (18,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.4605s ago] (18, 'CONFIRMED', '2026-01-14 22:46:04.412905', '2026-01-14 09:00:00.000000', None, None)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.46s ago] (44,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.4593s ago] (18,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.5111s ago] (18,)
2026-01-14 22:46:04 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 18, 'task': {'title': 'Test Task 18 (Day 0, Type recurring)', 'description': 'Test task for day 0, type recurring', 'task_type': 'recurring', 'recurrence_type': 'weekdays', 'recurrence_interval': 2, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 18, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:29.343073', 'updated_at': '2026-01-14T19:35:25.768000', 'readable_config': ' 09:00  2  ', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 18, "task": {"title": "Test Task 18 (Day 0, Type recurring)", "description": "Test task for day 0, type recurring", "task_type": "recurring", "recurrence_type": "weekdays", "recurrence_interval": 2, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 18, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:29.343073", "updated_at": "2026-01-14T19:35:25.768000", "readable_config": " 09:00  2  ", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  homeplanner.tasks sync-queue: processing operation 6/8: TaskOperationType.COMPLETE for task 37 with timestamp 2026-01-14 19:35:26.387000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.6047s ago] (37, 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:04 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (37,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.6204s ago] (1, '2026-01-14 19:35:26.387000', 37)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.6174s ago] (37,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.6271s ago] (37,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.6298s ago] (37, 'CONFIRMED', '2026-01-14 22:46:04.578190', '2026-01-14 09:00:00.000000', None, None)
2026-01-14 22:46:04 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:04 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.633s ago] (45,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.6391s ago] (37,)
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.7053s ago] (37,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 37, 'task': {'title': 'Daily Recurring Task', 'description': 'A recurring task every day', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 1, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 37, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.132344', 'updated_at': '2026-01-14T19:35:26.387000', 'readable_config': ' 09:00  ', 'assigned_user_ids': [], 'assignees': []}}
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 37, "task": {"title": "Daily Recurring Task", "description": "A recurring task every day", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 1, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 37, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.132344", "updated_at": "2026-01-14T19:35:26.387000", "readable_config": " 09:00  ", "assigned_user_ids": [], "assignees": []}}
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  homeplanner.tasks sync-queue: processing operation 7/8: TaskOperationType.UNCOMPLETE for task 18 with timestamp 2026-01-14 19:35:27.420000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: sync-queue called with 8 operations
2026-01-14 22:46:04 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.8027s ago] (18, 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP sync-queue: 8 operations
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (18,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.RECURRING, completed=True, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  homeplanner.tasks sync-queue: processing 8 operations
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-14 19:35:27.420000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:04 INFO  homeplanner.tasks sync-queue: processing operation 1/8: TaskOperationType.COMPLETE for task 1 with timestamp 2026-01-14 19:35:16.676000+00:00
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.8393s ago] (0, '2026-01-14 19:35:27.420000', 18)
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.8521s ago] (1, 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1,)
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:04 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.8381s ago] (18,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.8332s ago] (18,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.8941s ago] (1, '2026-01-14 19:35:16.676000', 1)
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.847s ago] (18, 'UNCONFIRMED', '2026-01-14 22:46:04.791179', '2026-01-14 09:00:00.000000', None, None)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.8966s ago] (1,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.8909s ago] (1,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.8852s ago] (1, 'CONFIRMED', '2026-01-14 22:46:04.837452', '2026-01-11 09:00:00.000000', None, None)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.8869s ago] (46,)
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=18
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.8856s ago] (18,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.9369s ago] (18,)
2026-01-14 22:46:04 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 18, 'task': {'title': 'Test Task 18 (Day 0, Type recurring)', 'description': 'Test task for day 0, type recurring', 'task_type': 'recurring', 'recurrence_type': 'weekdays', 'recurrence_interval': 2, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 18, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:29.343073', 'updated_at': '2026-01-14T19:35:27.420000', 'readable_config': ' 09:00  2  ', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "uncompleted", "task_id": 18, "task": {"title": "Test Task 18 (Day 0, Type recurring)", "description": "Test task for day 0, type recurring", "task_type": "recurring", "recurrence_type": "weekdays", "recurrence_interval": 2, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 18, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:29.343073", "updated_at": "2026-01-14T19:35:27.420000", "readable_config": " 09:00  2  ", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:04 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:04 INFO  homeplanner.tasks sync-queue: processing operation 8/8: TaskOperationType.UNCOMPLETE for task 37 with timestamp 2026-01-14 19:35:27.760000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:04 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 1.024s ago] (37, 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.9356s ago] (47,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.9345s ago] (1,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 0.9863s ago] (1,)
2026-01-14 22:46:04 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 1, 'task': {'title': 'Test Task 1 (Day -3, Type recurring)', 'description': 'Test task for day -3, type recurring', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 9, 'interval_days': None, 'reminder_time': '2026-01-11T09:00:00', 'alarm': True, 'group_id': None, 'id': 1, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.397229', 'updated_at': '2026-01-14T19:35:16.676000', 'readable_config': ' 09:00  9 ', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (37,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.RECURRING, completed=True, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-14 19:35:27.760000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 1.058s ago] (0, '2026-01-14 19:35:27.760000', 37)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:04 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 1, "task": {"title": "Test Task 1 (Day -3, Type recurring)", "description": "Test task for day -3, type recurring", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 9, "interval_days": null, "reminder_time": "2026-01-11T09:00:00", "alarm": true, "group_id": null, "id": 1, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.397229", "updated_at": "2026-01-14T19:35:16.676000", "readable_config": " 09:00  9 ", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:04 INFO  homeplanner.tasks sync-queue: processing operation 2/8: TaskOperationType.UNCOMPLETE for task 1 with timestamp 2026-01-14 19:35:19.402000+00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 1.077s ago] (1, 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:04 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:04 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 1.05s ago] (37,)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 1.044s ago] (37,)
2026-01-14 22:46:04 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine [cached since 1.038s ago] (37, 'UNCONFIRMED', '2026-01-14 22:46:04.990620', '2026-01-14 09:00:00.000000', None, None)
2026-01-14 22:46:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.037s ago] (48,)
2026-01-14 22:46:05 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=37
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.035s ago] (37,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.086s ago] (37,)
2026-01-14 22:46:05 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 37, 'task': {'title': 'Daily Recurring Task', 'description': 'A recurring task every day', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 1, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 37, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.132344', 'updated_at': '2026-01-14T19:35:27.760000', 'readable_config': ' 09:00  ', 'assigned_user_ids': [], 'assignees': []}}
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1,)
2026-01-14 22:46:05 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.RECURRING, completed=True, enabled=True, reminder_time=2026-01-11 09:00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:05 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-14 19:35:19.402000+00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.154s ago] (0, '2026-01-14 19:35:19.402000', 1)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.152s ago] (1,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.146s ago] (1,)
2026-01-14 22:46:05 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-11 09:00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.14s ago] (1, 'UNCONFIRMED', '2026-01-14 22:46:05.092500', '2026-01-11 09:00:00.000000', None, None)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.138s ago] (49,)
2026-01-14 22:46:05 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.137s ago] (1,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.188s ago] (1,)
2026-01-14 22:46:05 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 1, 'task': {'title': 'Test Task 1 (Day -3, Type recurring)', 'description': 'Test task for day -3, type recurring', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 9, 'interval_days': None, 'reminder_time': '2026-01-11T09:00:00', 'alarm': True, 'group_id': None, 'id': 1, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:27.397229', 'updated_at': '2026-01-14T19:35:19.402000', 'readable_config': ' 09:00  9 ', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "uncompleted", "task_id": 37, "task": {"title": "Daily Recurring Task", "description": "A recurring task every day", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 1, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 37, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.132344", "updated_at": "2026-01-14T19:35:27.760000", "readable_config": " 09:00  ", "assigned_user_ids": [], "assignees": []}}
2026-01-14 22:46:05 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "uncompleted", "task_id": 1, "task": {"title": "Test Task 1 (Day -3, Type recurring)", "description": "Test task for day -3, type recurring", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 9, "interval_days": null, "reminder_time": "2026-01-11T09:00:00", "alarm": true, "group_id": null, "id": 1, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:27.397229", "updated_at": "2026-01-14T19:35:19.402000", "readable_config": " 09:00  9 ", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:05 INFO  homeplanner.tasks sync-queue: processing operation 3/8: TaskOperationType.COMPLETE for task 13 with timestamp 2026-01-14 19:35:20.388000+00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.281s ago] (13, 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:05 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (13,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.28s ago] (1, '2026-01-14 19:35:20.388000', 13)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:05 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:05 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:05 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.274s ago] (13,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.268s ago] (13,)
2026-01-14 22:46:05 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.265s ago] (13, 'CONFIRMED', '2026-01-14 22:46:05.217784', '2026-01-13 09:00:00.000000', None, None)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.262s ago] (50,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.277s ago] (13,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.338s ago] (13,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 13, 'task': {'title': 'Test Task 13 (Day -1, Type interval)', 'description': 'Test task for day -1, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 6, 'reminder_time': '2026-01-13T09:00:00', 'alarm': True, 'group_id': None, 'id': 13, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.957809', 'updated_at': '2026-01-14T19:35:20.388000', 'readable_config': '  6   09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 13, "task": {"title": "Test Task 13 (Day -1, Type interval)", "description": "Test task for day -1, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 6, "reminder_time": "2026-01-13T09:00:00", "alarm": true, "group_id": null, "id": 13, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.957809", "updated_at": "2026-01-14T19:35:20.388000", "readable_config": "  6   09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:05 INFO  homeplanner.tasks sync-queue: processing operation 4/8: TaskOperationType.UNCOMPLETE for task 13 with timestamp 2026-01-14 19:35:24.356000+00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.429s ago] (13, 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (13,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.INTERVAL, completed=True, enabled=True, reminder_time=2026-01-13 09:00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-14 19:35:24.356000+00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.445s ago] (0, '2026-01-14 19:35:24.356000', 13)
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:05 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.458s ago] (13,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.46s ago] (13,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:05 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-13 09:00:00
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.469s ago] (13, 'UNCONFIRMED', '2026-01-14 22:46:05.416350', '2026-01-13 09:00:00.000000', None, None)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:05 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:05 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:05 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.502s ago] (51,)
2026-01-14 22:46:05 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=13
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.502s ago] (13,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.553s ago] (13,)
2026-01-14 22:46:05 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 13, 'task': {'title': 'Test Task 13 (Day -1, Type interval)', 'description': 'Test task for day -1, type interval', 'task_type': 'interval', 'recurrence_type': 'interval', 'recurrence_interval': None, 'interval_days': 6, 'reminder_time': '2026-01-13T09:00:00', 'alarm': True, 'group_id': None, 'id': 13, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:28.957809', 'updated_at': '2026-01-14T19:35:24.356000', 'readable_config': '  6   09:00', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "uncompleted", "task_id": 13, "task": {"title": "Test Task 13 (Day -1, Type interval)", "description": "Test task for day -1, type interval", "task_type": "interval", "recurrence_type": "interval", "recurrence_interval": null, "interval_days": 6, "reminder_time": "2026-01-13T09:00:00", "alarm": true, "group_id": null, "id": 13, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:28.957809", "updated_at": "2026-01-14T19:35:24.356000", "readable_config": "  6   09:00", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:05 INFO  homeplanner.tasks sync-queue: processing operation 5/8: TaskOperationType.COMPLETE for task 18 with timestamp 2026-01-14 19:35:25.768000+00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.632s ago] (18, 1, 0)
2026-01-14 22:46:05 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (18,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.634s ago] (1, '2026-01-14 19:35:25.768000', 18)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.628s ago] (18,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.621s ago] (18,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.616s ago] (18, 'CONFIRMED', '2026-01-14 22:46:05.567745', '2026-01-14 09:00:00.000000', None, None)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.615s ago] (52,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.614s ago] (18,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.666s ago] (18,)
2026-01-14 22:46:05 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 18, 'task': {'title': 'Test Task 18 (Day 0, Type recurring)', 'description': 'Test task for day 0, type recurring', 'task_type': 'recurring', 'recurrence_type': 'weekdays', 'recurrence_interval': 2, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 18, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:29.343073', 'updated_at': '2026-01-14T19:35:25.768000', 'readable_config': ' 09:00  2  ', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:05 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 18, "task": {"title": "Test Task 18 (Day 0, Type recurring)", "description": "Test task for day 0, type recurring", "task_type": "recurring", "recurrence_type": "weekdays", "recurrence_interval": 2, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 18, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T08:41:29.343073", "updated_at": "2026-01-14T19:35:25.768000", "readable_config": " 09:00  2  ", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:05 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:05 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:05 INFO  homeplanner.tasks sync-queue: processing operation 6/8: TaskOperationType.COMPLETE for task 37 with timestamp 2026-01-14 19:35:26.387000+00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.775s ago] (37, 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (37,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.779s ago] (1, '2026-01-14 19:35:26.387000', 37)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.77s ago] (37,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:05 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.773s ago] (37,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.782s ago] (37, 'CONFIRMED', '2026-01-14 22:46:05.728582', '2026-01-14 09:00:00.000000', None, None)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:05 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.786s ago] (53,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.785s ago] (37,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.836s ago] (37,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'completed', 'task_id': 37, 'task': {'title': 'Daily Recurring Task', 'description': 'A recurring task every day', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 1, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 37, 'enabled': True, 'completed': True, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.132344', 'updated_at': '2026-01-14T19:35:26.387000', 'readable_config': ' 09:00  ', 'assigned_user_ids': [], 'assignees': []}}
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "completed", "task_id": 37, "task": {"title": "Daily Recurring Task", "description": "A recurring task every day", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 1, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 37, "enabled": true, "completed": true, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.132344", "updated_at": "2026-01-14T19:35:26.387000", "readable_config": " 09:00  ", "assigned_user_ids": [], "assignees": []}}
2026-01-14 22:46:05 INFO  homeplanner.tasks sync-queue: processing operation 7/8: TaskOperationType.UNCOMPLETE for task 18 with timestamp 2026-01-14 19:35:27.420000+00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 22:46:05 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:05 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.922s ago] (18, 1, 0)
2026-01-14 22:46:05 INFO  homeplanner.users Starting query for simple users
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (18,)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 22:46:05 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.RECURRING, completed=True, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.948e+04s ago] ()
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:05 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-14 19:35:27.420000+00:00
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:05 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 22:46:05 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 1.933s ago] (0, '2026-01-14 19:35:27.420000', 18)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:05 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:05 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:05 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:05 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.267s ago] (18,)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.262s ago] (18,)
2026-01-14 22:46:06 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.258s ago] (18, 'UNCONFIRMED', '2026-01-14 22:46:06.209607', '2026-01-14 09:00:00.000000', None, None)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.44s ago] (54,)
2026-01-14 22:46:06 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=18
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.439s ago] (18,)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.491s ago] (18,)
2026-01-14 22:46:06 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 18, 'task': {'title': 'Test Task 18 (Day 0, Type recurring)', 'description': 'Test task for day 0, type recurring', 'task_type': 'recurring', 'recurrence_type': 'weekdays', 'recurrence_interval': 2, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 18, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T08:41:29.343073', 'updated_at': '2026-01-14T19:35:27.420000', 'readable_config': ' 09:00  2  ', 'assigned_user_ids': [1], 'assignees': [{'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'role': 'admin', 'is_active': True}]}}
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "uncompleted", "task_id": 18, "task": {"title": "Test Task 18 (Day 0, Type recurring)", "description": "Test task for day 0, type recurring", "task_type": "recurring", "recurrence_type": "weekdays", "recurrence_interval": 2, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 18, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T08:41:29.343073", "updated_at": "2026-01-14T19:35:27.420000", "readable_config": " 09:00  2  ", "assigned_user_ids": [1], "assignees": [{"id": 1, "name": "", "email": "sorg2@yandex.ru", "role": "admin", "is_active": true}]}}
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks sync-queue: processing operation 8/8: TaskOperationType.UNCOMPLETE for task 37 with timestamp 2026-01-14 19:35:27.760000+00:00
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.589s ago] (37, 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (37,)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  homeplanner.tasks uncomplete_task: task found, task_type=TaskType.RECURRING, completed=True, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  homeplanner.tasks uncomplete_task: using client timestamp for updated_at: 2026-01-14 19:35:27.760000+00:00
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine UPDATE tasks SET completed=?, updated_at=? WHERE tasks.id = ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.592s ago] (0, '2026-01-14 19:35:27.760000', 37)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:06 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, tasks.description, tasks.task_type, tasks.recurrence_type, tasks.recurrence_interval, tasks.interval_days, tasks.reminder_time, tasks.alarm, tasks.enabled, tasks.completed, tasks.group_id, tasks.last_shown_at, tasks.created_at, tasks.updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.597s ago] (37,)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.592s ago] (37,)
2026-01-14 22:46:06 INFO  homeplanner.tasks uncomplete_task: after commit, completed=False, enabled=True, reminder_time=2026-01-14 09:00:00
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine INSERT INTO task_history (task_id, action, action_timestamp, iteration_date, meta_data, comment) VALUES (?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.587s ago] (37, 'UNCONFIRMED', '2026-01-14 22:46:06.539239', '2026-01-14 09:00:00.000000', None, None)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT task_history.id, task_history.task_id, task_history.action, task_history.action_timestamp, task_history.iteration_date, task_history.meta_data, task_history.comment 
FROM task_history 
WHERE task_history.id = ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.589s ago] (55,)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:06 INFO  homeplanner.tasks uncomplete_task: completed successfully for task_id=37
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks 
WHERE tasks.id = ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.6s ago] (37,)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, task_users 
WHERE ? = task_users.task_id AND users.id = task_users.user_id
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 2.656s ago] (37,)
2026-01-14 22:46:06 INFO  homeplanner.tasks Broadcast via anyio.from_thread: {'type': 'task_update', 'action': 'uncompleted', 'task_id': 37, 'task': {'title': 'Daily Recurring Task', 'description': 'A recurring task every day', 'task_type': 'recurring', 'recurrence_type': 'daily', 'recurrence_interval': 1, 'interval_days': None, 'reminder_time': '2026-01-14T09:00:00', 'alarm': False, 'group_id': None, 'id': 37, 'enabled': True, 'completed': False, 'last_shown_at': None, 'created_at': '2026-01-14T09:02:16.132344', 'updated_at': '2026-01-14T19:35:27.760000', 'readable_config': ' 09:00  ', 'assigned_user_ids': [], 'assignees': []}}
2026-01-14 22:46:06 INFO  homeplanner.realtime WS broadcast: targets=1, payload={"type": "task_update", "action": "uncompleted", "task_id": 37, "task": {"title": "Daily Recurring Task", "description": "A recurring task every day", "task_type": "recurring", "recurrence_type": "daily", "recurrence_interval": 1, "interval_days": null, "reminder_time": "2026-01-14T09:00:00", "alarm": false, "group_id": null, "id": 37, "enabled": true, "completed": false, "last_shown_at": null, "created_at": "2026-01-14T09:02:16.132344", "updated_at": "2026-01-14T19:35:27.760000", "readable_config": " 09:00  ", "assigned_user_ids": [], "assignees": []}}
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:06 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:06 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  homeplanner.tasks sync-queue: returning 39 tasks to client
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:06 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:06 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:06 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:06 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:06 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:06 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT groups.id AS groups_id, groups.name AS groups_name, groups.description AS groups_description, groups.created_at AS groups_created_at, groups.updated_at AS groups_updated_at 
FROM groups ORDER BY groups.name
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:06 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:06 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:06 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  homeplanner.api.users GET /users endpoint called with simple=True
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  homeplanner.users Starting query for simple users
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name 
FROM users 
WHERE users.is_active = 1 ORDER BY users.name
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.948e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.users Query executed successfully, found 2 active users
2026-01-14 22:46:06 INFO  homeplanner.api.users Returning 2 active users (simple mode) via API
2026-01-14 22:46:06 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:06 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:06 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:06 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:06 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.api.users GET /users endpoint called with simple=False
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  homeplanner.users Starting query for all users
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users ORDER BY users.name
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT users_1.id AS users_1_id, tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM users AS users_1 JOIN task_users AS task_users_1 ON users_1.id = task_users_1.user_id JOIN tasks ON tasks.id = task_users_1.task_id 
WHERE users_1.id IN (?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (2, 1)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:06 INFO  homeplanner.users Query executed successfully, found 2 users
2026-01-14 22:46:06 DEBUG homeplanner.users Users: [{'id': 2, 'name': '', 'email': 'lyokyk@rambler.ru', 'is_active': True}, {'id': 1, 'name': '', 'email': 'sorg2@yandex.ru', 'is_active': True}]
2026-01-14 22:46:06 INFO  homeplanner.api.users Returning 2 users (full mode) via API
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids called from 192.168.1.2, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_today_task_ids returning 10 task IDs for user 1
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:46:06 INFO  homeplanner.tasks HTTP REQUEST: get_tasks called from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 1] Request received from 192.168.1.2, enabled_only=False, days_ahead=None, selected_user_id=1
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT app_metadata."key" AS app_metadata_key, app_metadata.value AS app_metadata_value, app_metadata.updated_at AS app_metadata_updated_at 
FROM app_metadata 
WHERE app_metadata."key" = ?
 LIMIT ? OFFSET ?
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ('last_task_update', 1, 0)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.title AS tasks_title, tasks.description AS tasks_description, tasks.task_type AS tasks_task_type, tasks.recurrence_type AS tasks_recurrence_type, tasks.recurrence_interval AS tasks_recurrence_interval, tasks.interval_days AS tasks_interval_days, tasks.reminder_time AS tasks_reminder_time, tasks.alarm AS tasks_alarm, tasks.enabled AS tasks_enabled, tasks.completed AS tasks_completed, tasks.group_id AS tasks_group_id, tasks.last_shown_at AS tasks_last_shown_at, tasks.created_at AS tasks_created_at, tasks.updated_at AS tasks_updated_at 
FROM tasks ORDER BY tasks.reminder_time
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] ()
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine SELECT tasks_1.id AS tasks_1_id, users.id AS users_id, users.name AS users_name, users.email AS users_email, users.role AS users_role, users.is_active AS users_is_active, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM tasks AS tasks_1 JOIN task_users AS task_users_1 ON tasks_1.id = task_users_1.task_id JOIN users ON users.id = task_users_1.user_id 
WHERE tasks_1.id IN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine [cached since 4.95e+04s ago] (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 36, 37, 21, 22, 23, 24, 25, 38, 39, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35)
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 2] Found 39 tasks in database
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 1] id=1, title='Test Task 1 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 2] id=2, title='Test Task 2 (Day -3, Type recurring)', enabled=True, task_type=TaskType.RECURRING
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [TASK 3] id=3, title='Test Task 3 (Day -3, Type one_time)', enabled=True, task_type=TaskType.ONE_TIME
2026-01-14 22:46:06 INFO  homeplanner.tasks get_tasks: [SERVER STEP 3] Returning 39 tasks to client
2026-01-14 22:46:06 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:49:05 DEBUG watchfiles.main 3 changes detected: {(<Change.modified: 2>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db'), (<Change.deleted: 3>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal'), (<Change.added: 1>, '/mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db-journal')}
2026-01-14 22:51:59 INFO  homeplanner.realtime WS disconnect: id=140015963673728, total=0
2026-01-14 22:51:59 INFO  homeplanner.day_change_scheduler DayChangeScheduler stopped
2026-01-14 22:52:03 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 22:52:03 INFO  homeplanner.system uvicorn level: 10
2026-01-14 22:52:03 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 22:52:03 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 22:52:03 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 22:52:03 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 22:52:03 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 22:52:03 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 22:52:03 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 22:52:03 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 22:52:03 INFO  homeplanner.system HTTP mode (SSL not configured)
2026-01-14 22:52:04 INFO  homeplanner.system uvicorn.access level: 30
2026-01-14 22:52:04 INFO  homeplanner.system uvicorn level: 10
2026-01-14 22:52:04 INFO  homeplanner.system uvicorn.access handlers: []
2026-01-14 22:52:04 INFO  homeplanner.system uvicorn handlers: []
2026-01-14 22:52:04 INFO  homeplanner.system Logging configured: level=DEBUG, log_dir=/mnt/ZFS/Dev/HomePlanner/backend
2026-01-14 22:52:04 DEBUG homeplanner.system Diagnostic: DEBUG level test
2026-01-14 22:52:04 INFO  homeplanner.system Diagnostic: INFO level test
2026-01-14 22:52:04 WARNING homeplanner.system Diagnostic: WARNING level test
2026-01-14 22:52:04 ERROR homeplanner.system Diagnostic: ERROR level test
2026-01-14 22:52:04 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 22:52:04 ERROR homeplanner.system Test ERROR log in main.py to check if ERROR messages are written
2026-01-14 22:52:04 INFO  homeplanner.database Initializing database tables...
2026-01-14 22:52:04 INFO  homeplanner.database Database URL: sqlite:////mnt/ZFS/Dev/HomePlanner/backend/homeplanner.db
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("app_metadata")
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("events")
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("groups")
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_users")
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("task_history")
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine COMMIT
2026-01-14 22:52:04 INFO  homeplanner.database Database tables created successfully
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine [raw sql] ()
2026-01-14 22:52:04 INFO  sqlalchemy.engine.Engine ROLLBACK
2026-01-14 22:52:04 INFO  homeplanner.database Available tables after init: ['alembic_version', 'app_metadata', 'events', 'groups', 'task_history', 'task_users', 'tasks', 'users']
2026-01-14 22:52:04 INFO  homeplanner.day_change_scheduler DayChangeScheduler task created
2026-01-14 22:52:04 INFO  homeplanner.day_change_scheduler DayChangeScheduler started - waiting for day changes
2026-01-14 22:52:04 DEBUG homeplanner.day_change_scheduler Waiting 14935 seconds until next day check at 2026-01-15 03:01:00
2026-01-14 22:52:07 INFO  homeplanner.realtime WebSocket connection attempt from 192.168.1.2, origin: http://192.168.1.2:8000
2026-01-14 22:52:07 INFO  homeplanner.realtime WS connect: id=140602184614288 host=192.168.1.2 port=34732 total=1
