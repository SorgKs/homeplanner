<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomePlanner - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-layout">
        <header>
            <h1>üè† HomePlanner</h1>
        </header>

        <div class="content-wrapper">
            <aside class="sidebar">
                <nav class="sidebar-nav">
                    <div class="sidebar-section">
                        <h3 class="sidebar-title">–í–∏–¥</h3>
                        <div class="view-toggle">
                            <button class="btn btn-secondary sidebar-btn active" id="view-today-btn">üìÖ –°–µ–≥–æ–¥–Ω—è</button>
                            <button class="btn btn-secondary sidebar-btn" id="view-all-btn">üìã –í—Å–µ –∑–∞–¥–∞—á–∏</button>
                            <button class="btn btn-secondary sidebar-btn" id="view-history-btn">üìú –ò—Å—Ç–æ—Ä–∏—è</button>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary sidebar-btn" id="add-task-btn">
                        <span>+</span> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                    </button>
                    <button class="btn btn-secondary sidebar-btn" id="add-group-btn">
                        <span>üìÅ</span> –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É
                    </button>
                    
                    <div class="sidebar-section">
                        <button class="btn btn-secondary sidebar-btn" id="toggle-admin-btn">
                            <span>üîß</span> <span id="admin-mode-text">–ê–¥–º–∏–Ω —Ä–µ–∂–∏–º</span>
                        </button>
                    </div>
                    
                    <div class="sidebar-section" id="tasks-filters-section">
                        <h3 class="sidebar-title">–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã</h3>
                        <div class="search-box">
                            <input type="text" id="tasks-search" placeholder="–ü–æ–∏—Å–∫ –∑–∞–¥–∞—á...">
                        </div>
                        <button class="filter-btn sidebar-btn" id="tasks-filter-btn">–§–∏–ª—å—Ç—Ä—ã</button>
                    </div>
                    
                    <div class="sidebar-section" id="history-filters-section" style="display: none;">
                        <h3 class="sidebar-title">–§–∏–ª—å—Ç—Ä—ã –∏—Å—Ç–æ—Ä–∏–∏</h3>
                        <div class="search-box">
                            <select id="history-group-filter" style="width: 100%;">
                                <option value="">–í—Å–µ –≥—Ä—É–ø–ø—ã</option>
                            </select>
                        </div>
                        <div class="search-box">
                            <select id="history-task-filter" style="width: 100%;">
                                <option value="">–í—Å–µ –∑–∞–¥–∞—á–∏</option>
                            </select>
                        </div>
                        <div class="search-box">
                            <label style="display: block; margin-bottom: 4px; font-size: 0.9em;">–°</label>
                            <input type="date" id="history-date-from" style="width: 100%;">
                        </div>
                        <div class="search-box">
                            <label style="display: block; margin-bottom: 4px; font-size: 0.9em;">–ü–æ</label>
                            <input type="date" id="history-date-to" style="width: 100%;">
                        </div>
                    </div>
                </nav>
            </aside>

            <main class="main-content">
                <div id="tasks-list" class="items-list"></div>
            </main>
        </div>

        <!-- Task Modal -->
        <div id="task-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2 id="task-modal-title">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</h2>
                <form id="task-form">
                    <input type="hidden" id="task-id">
                    <input type="hidden" id="task-type">
                    <div class="form-group">
                        <label for="task-title">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                        <input type="text" id="task-title" required placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
                    </div>
                    <div class="form-group">
                        <label for="task-description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                        <textarea id="task-description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="task-is-recurring">–¢–∏–ø –∑–∞–¥–∞—á–∏:</label>
                        <select id="task-is-recurring" required>
                            <option value="one_time">–†–∞–∑–æ–≤–æ–µ</option>
                            <option value="recurring">–ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –∑–∞–¥–∞—á–∞ (–ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é)</option>
                            <option value="interval">–ó–∞–¥–∞—á–∞ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)</option>
                        </select>
                    </div>
                    <div id="recurring-fields" style="display: none;">
                        <div class="form-group">
                            <label for="task-recurrence">–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ:</label>
                            <select id="task-recurrence">
                                <option value="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ</option>
                                <option value="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ</option>
                                <option value="monthly">–ï–∂–µ–º–µ—Å—è—á–Ω–æ</option>
                                <option value="yearly">–ï–∂–µ–≥–æ–¥–Ω–æ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="task-interval">–ò–Ω—Ç–µ—Ä–≤–∞–ª:</label>
                            <input type="number" id="task-interval" min="1" value="1" placeholder="–ö–∞–∂–¥—ã–µ N –ø–µ—Ä–∏–æ–¥–æ–≤">
                        </div>
                    </div>
                    <div id="interval-fields" style="display: none;">
                        <div class="form-group">
                            <label for="task-interval-days">–ò–Ω—Ç–µ—Ä–≤–∞–ª –≤ –¥–Ω—è—Ö:</label>
                            <input type="number" id="task-interval-days" min="1" value="7" placeholder="–ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="task-due-date" id="date-label">–ù–∞—á–∞–ª–æ:</label>
                        <input type="datetime-local" id="task-due-date" required>
                        <div class="quick-date-buttons" style="margin-top: 8px; display: flex; gap: 8px; flex-wrap: wrap;">
                            <button type="button" class="btn btn-secondary btn-sm" onclick="setQuickDate('today')">–°–µ–≥–æ–¥–Ω—è</button>
                            <button type="button" class="btn btn-secondary btn-sm" onclick="setQuickDate('tomorrow')">–ó–∞–≤—Ç—Ä–∞</button>
                            <button type="button" class="btn btn-secondary btn-sm" onclick="setQuickDate('monday')">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="task-group-id">–ì—Ä—É–ø–ø–∞:</label>
                        <select id="task-group-id">
                            <option value="">–ë–µ–∑ –≥—Ä—É–ø–ø—ã</option>
                        </select>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button type="button" class="btn btn-secondary" id="task-cancel">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Group Modal -->
        <div id="group-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2 id="group-modal-title">–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</h2>
                <form id="group-form">
                    <input type="hidden" id="group-id">
                    <div class="form-group">
                        <label for="group-name">–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã:</label>
                        <input type="text" id="group-name" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–æ–ª–∏—Ç—å —Ü–≤–µ—Ç—ã">
                    </div>
                    <div class="form-group">
                        <label for="group-description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                        <textarea id="group-description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button type="button" class="btn btn-secondary" id="group-cancel">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Task History Modal -->
        <div id="history-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–¥–∞—á–∏: <span id="history-task-title"></span></h2>
                <div id="history-content" style="max-height: 400px; overflow-y: auto;">
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <script src="utils/todayViewFilter.js"></script>
    <script src="api.js"></script>
    <script src="app.js"></script>
</body>
</html>

