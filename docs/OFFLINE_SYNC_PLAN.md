# –ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–∞ –¥–ª—è Android-–≤–µ—Ä—Å–∏–∏ HomePlanner —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π.

**–í–∞–∂–Ω–æ**: –û—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í–µ–±-–≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **–õ–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à** - —Ö—Ä–∞–Ω–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–∞–±–æ—Ç—ã (Room Database)
2. **–û—á–µ—Ä–µ–¥—å –æ–ø–µ—Ä–∞—Ü–∏–π** - —Ö—Ä–∞–Ω–∏—Ç –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏) –≤ Room Database
3. **–°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏
4. **–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–µ—Ç–µ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
5. **UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** - –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç —Å—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω

### 1.1. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Room Database)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `HomePlannerDB` (–≤–µ—Ä—Å–∏—è 1)**

**Object Store: `tasks_cache`**
- **–ö–ª—é—á**: `id` (Integer)
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª–Ω—ã–π –æ–±—ä–µ–∫—Ç –∑–∞–¥–∞—á–∏ (TaskResponse) + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
  ```javascript
  {
    ...taskData,  // –í—Å–µ –ø–æ–ª—è TaskResponse
    has_conflict: boolean,  // –§–ª–∞–≥ –Ω–∞–ª–∏—á–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞
    conflict_reason: string,  // –ü—Ä–∏—á–∏–Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ ('revision', 'merge_failed')
    conflict_timestamp: number,  // –í—Ä–µ–º—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞
    local_version: object,  // –õ–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ
    server_version: object  // –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ
  }
  ```
- **–ò–Ω–¥–µ–∫—Å—ã**:
  - `reminder_time` - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –¥–∞—Ç–µ
  - `updated_at` - –¥–ª—è LRU –æ—á–∏—Å—Ç–∫–∏
  - `task_type` - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø—É
  - `has_conflict` - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∑–∞–¥–∞—á —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏

**Object Store: `sync_queue`**
- **–ö–ª—é—á**: `id` (auto-increment)
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: 
  ```javascript
  {
    id: number,              // ID –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥–∏
    operation: string,       // 'create', 'update', 'delete', 'complete', 'uncomplete'
    entity_type: string,     // 'task'
    entity_id: number,       // ID –∑–∞–¥–∞—á–∏ (null –¥–ª—è create)
    payload: object,        // –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
    revision: number,        // –¢–µ–∫—É—â–∞—è —Ä–µ–≤–∏–∑–∏—è (–¥–ª—è update, —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
    timestamp: number,      // –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
    retry_count: number,    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
    last_retry: number,    // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–ø—ã—Ç–∫–∏
    status: string,         // 'pending', 'syncing', 'failed'
    size_bytes: number     // –†–∞–∑–º–µ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –±–∞–π—Ç–∞—Ö (–¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –æ–±—ä–µ–º–∞)
  }
  ```
- **–¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π** (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏):
  - **–õ–µ–≥–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** (`complete`, `uncomplete`, `delete`): 
    - –•—Ä–∞–Ω—è—Ç —Ç–æ–ª—å–∫–æ `entity_id` –∏ `operation`
    - –ù–µ —Ö—Ä–∞–Ω—è—Ç `payload` –∏ `revision` (null/undefined)
    - –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä: ~50-100 –±–∞–π—Ç
    - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏: –≤—ã—Å–æ–∫–∏–π (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏)
    - –î–ª—è `delete`: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–ª—å–∫–æ ID –∑–∞–¥–∞—á–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  - **–ü–æ–ª–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** (`create`, `update`): 
    - –•—Ä–∞–Ω—è—Ç –ø–æ–ª–Ω—ã–π `payload` —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∏
    - –•—Ä–∞–Ω—è—Ç `revision` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π (—Ç–æ–ª—å–∫–æ –¥–ª—è `update`)
    - –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä: ~500-2000 –±–∞–π—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–¥–∞—á–∏)
    - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏: –æ–±—ã—á–Ω—ã–π
- **–ò–Ω–¥–µ–∫—Å—ã**:
  - `status` - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É
  - `timestamp` - –¥–ª—è FIFO –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - `entity_id` - –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –∑–∞–¥–∞—á–µ
  - `operation` - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø—É –æ–ø–µ—Ä–∞—Ü–∏–∏
  - `size_bytes` - –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –æ–±—â–µ–≥–æ –æ–±—ä–µ–º–∞ –æ—á–µ—Ä–µ–¥–∏

**Object Store: `metadata`**
- **–ö–ª—é—á**: `key` (String)
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: 
  ```javascript
  {
    key: string,
    value: any,
    updated_at: number
  }
  ```
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
  - `last_sync_time` - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —É—Å–ø–µ—à–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - `cache_size_bytes` - —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞ –∑–∞–¥–∞—á –≤ –±–∞–π—Ç–∞—Ö
  - `queue_size_bytes` - —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –±–∞–π—Ç–∞—Ö
  - `total_storage_bytes` - –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–∫—ç—à + –æ—á–µ—Ä–µ–¥—å)
  - `storage_limit_bytes` - –ª–∏–º–∏—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ –±–∞–π—Ç–∞—Ö
  - `storage_usage_percent` - –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (0-100)

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–ö—ç—à –∑–∞–¥–∞—á**: –º–∞–∫—Å–∏–º—É–º 20 –ú–ë, –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
- **–û—á–µ—Ä–µ–¥—å –æ–ø–µ—Ä–∞—Ü–∏–π**: –º–∞–∫—Å–∏–º—É–º 5 –ú–ë (–∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ –æ–±—ä–µ–º—É –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- **–û–±—â–∏–π –ª–∏–º–∏—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞**: 25 –ú–ë (–∫—ç—à + –æ—á–µ—Ä–µ–¥—å)
- **–û—á–∏—Å—Ç–∫–∞**:
  - –ö—ç—à: LRU —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
  - –û—á–µ—Ä–µ–¥—å: FIFO —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ (—É–¥–∞–ª–µ–Ω–∏–µ —Å–∞–º—ã—Ö —Å—Ç–∞—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
  - –ü—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ—á–µ—Ä–µ–¥–∏: —Å–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ–ª–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (create/update), –∑–∞—Ç–µ–º –ª–µ–≥–∫–∏–µ (complete/uncomplete/delete)
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞**:
  - üü¢ –ó–µ–ª–µ–Ω–∞—è –∏–∫–æ–Ω–∫–∞ (0-70%): –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
  - üü° –ñ–µ–ª—Ç–∞—è –∏–∫–æ–Ω–∫–∞ (70-90%): –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∫ –ª–∏–º–∏—Ç—É, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—á–∏—Å—Ç–∫–∞
  - üî¥ –ö—Ä–∞—Å–Ω–∞—è –∏–∫–æ–Ω–∫–∞ (90-100%): –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - –¢–æ—á–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ**: —Å–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ–ª–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (`create`/`update`), –∑–∞—Ç–µ–º –ª–µ–≥–∫–∏–µ (`complete`/`uncomplete`/`delete`)

#### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

- **–†–∞—Å—á–µ—Ç**: `storage_usage_percent = (total_storage_bytes / storage_limit_bytes) * 100`
- **–¶–≤–µ—Ç–æ–≤—ã–µ –∑–æ–Ω—ã**:
  - üü¢ –ó–µ–ª–µ–Ω–∞—è (0-50%): –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
  - üü° –ñ–µ–ª—Ç–∞—è (50-80%): –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∫ –ª–∏–º–∏—Ç—É, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—á–∏—Å—Ç–∫–∞
  - üî¥ –ö—Ä–∞—Å–Ω–∞—è (80-100%): –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**:
  - –ò–∫–æ–Ω–∫–∞ –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å)
  - –¢–æ—á–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 90% –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

### 1.2. –ú–æ–¥—É–ª—å —Ä–∞–±–æ—Ç—ã —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º (`frontend/storage.js`) - **–í–µ–±-–≤–µ—Ä—Å–∏—è**

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –î–ª—è Android-–≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Room Database (—Å–º. —Ä–∞–∑–¥–µ–ª 2.1).

#### –§—É–Ω–∫—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

```javascript
/**
 * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è IndexedDB –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
 * @returns {Promise<IDBDatabase>}
 */
async function initDatabase() {
  // –°–æ–∑–¥–∞–Ω–∏–µ/–æ—Ç–∫—Ä—ã—Ç–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  // –°–æ–∑–¥–∞–Ω–∏–µ object stores –∏ –∏–Ω–¥–µ–∫—Å–æ–≤
  // –í–æ–∑–≤—Ä–∞—Ç –ø—Ä–æ–º–∏—Å–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
}

/**
 * –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
 * @returns {Promise<IDBDatabase>}
 */
async function getDatabase() {
  // –í–æ–∑–≤—Ä–∞—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∏–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
}
```

#### –§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –∫—ç—à–µ–º –∑–∞–¥–∞—á

```javascript
/**
 * –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ –∫—ç—à
 * @param {Array} tasks - –ú–∞—Å—Å–∏–≤ –∑–∞–¥–∞—á
 * @returns {Promise<void>}
 */
async function saveTasksToCache(tasks) {
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ tasks_cache
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (cache_size, last_sync_time)
  // –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ 20 –ú–ë, —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ LRU –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏
}

/**
 * –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á –∏–∑ –∫—ç—à–∞
 * @param {Object} filters - –§–∏–ª—å—Ç—Ä—ã (task_type, date_range –∏ —Ç.–¥.)
 * @returns {Promise<Array>}
 */
async function loadTasksFromCache(filters = {}) {
  // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á –∏–∑ tasks_cache —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤
  // –í–æ–∑–≤—Ä–∞—Ç –º–∞—Å—Å–∏–≤–∞ –∑–∞–¥–∞—á
}

/**
 * –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –∑–∞–¥–∞—á
 * @param {number} daysToKeep - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
 * @returns {Promise<void>}
 */
async function clearOldCache(daysToKeep = 7) {
  // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á —Å—Ç–∞—Ä—à–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
}
```

#### –§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –æ—á–µ—Ä–µ–¥—å—é –æ–ø–µ—Ä–∞—Ü–∏–π

```javascript
/**
 * –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
 * @param {string} operation - –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ ('create', 'update', 'delete', 'complete', 'uncomplete')
 * @param {string} entityType - –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏ ('task')
 * @param {number|null} entityId - ID —Å—É—â–Ω–æ—Å—Ç–∏ (null –¥–ª—è create)
 * @param {Object} payload - –î–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
 * @param {number} revision - –†–µ–≤–∏–∑–∏—è (–¥–ª—è update)
 * @returns {Promise<number>} - ID –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥–∏
 */
async function addToSyncQueue(operation, entityType, entityId, payload, revision = null) {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –æ—á–µ—Ä–µ–¥–∏ (100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
  // –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ FIFO –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏
  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'pending'
  // –í–æ–∑–≤—Ä–∞—Ç ID –æ–ø–µ—Ä–∞—Ü–∏–∏
}

/**
 * –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑ –æ—á–µ—Ä–µ–¥–∏
 * @param {string} status - –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É ('pending', 'syncing', 'failed')
 * @param {number} limit - –õ–∏–º–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
 * @returns {Promise<Array>}
 */
async function getSyncQueue(status = 'pending', limit = 100) {
  // –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑ sync_queue
  // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ timestamp (FIFO)
  // –í–æ–∑–≤—Ä–∞—Ç –º–∞—Å—Å–∏–≤–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
}

/**
 * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥–∏
 * @param {number} queueId - ID –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥–∏
 * @param {string} status - –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
 * @param {Object} data - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
 * @returns {Promise<void>}
 */
async function updateSyncQueueItem(queueId, status, data = {}) {
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ retry_count, last_retry –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
}

/**
 * –£–¥–∞–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
 * @param {number} queueId - ID –æ–ø–µ—Ä–∞—Ü–∏–∏
 * @returns {Promise<void>}
 */
async function removeFromSyncQueue(queueId) {
  // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
  const item = await getQueueItem(queueId);
  const itemSize = item ? item.size_bytes : 0;
  
  // –£–¥–∞–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ sync_queue
  await deleteQueueItem(queueId);
  
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (queue_size_bytes, queue_count)
  await updateQueueMetadata();
  
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
  await updateStorageIndicator();
}

/**
 * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –æ—á–µ—Ä–µ–¥–∏
 * @returns {Promise<void>}
 */
async function updateQueueMetadata() {
  // –†–∞—Å—á–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏ (—Å—É–º–º–∞ size_bytes –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
  const allItems = await getAllQueueItems();
  const totalSize = allItems.reduce((sum, item) => sum + (item.size_bytes || 0), 0);
  const count = allItems.length;
  
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
  await saveMetadata('queue_size_bytes', totalSize);
  await saveMetadata('queue_count', count);
  
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
  const cacheSize = await getMetadata('cache_size_bytes')?.value || 0;
  await saveMetadata('storage_total_bytes', cacheSize + totalSize);
}

/**
 * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
 * @returns {Promise<void>}
 */
async function updateStorageIndicator() {
  const totalSize = await getMetadata('storage_total_bytes')?.value || 0;
  const limit = await getMetadata('storage_limit_bytes')?.value || (25 * 1024 * 1024);
  const percentage = (totalSize / limit) * 100;
  
  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
  let color = 'green';
  if (percentage >= 90) color = 'red';
  else if (percentage >= 70) color = 'yellow';
  
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
  await saveMetadata('storage_indicator_color', color);
  await saveMetadata('storage_percentage', percentage);
  
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö
  updateStorageIndicatorUI(color, percentage);
}

/**
 * –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑ –æ—á–µ—Ä–µ–¥–∏
 * @returns {Promise<void>}
 */
async function clearCompletedSyncQueue() {
  // –£–¥–∞–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'synced' —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤
}
```

### 1.3. –ú–æ–¥—É–ª—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (`frontend/sync.js`)

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```javascript
/**
 * –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏
 * @returns {boolean}
 */
function isOnline() {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ navigator.onLine
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ fetch –∫ API
}

/**
 * –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –æ—á–µ—Ä–µ–¥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
 * @returns {Promise<void>}
 */
async function syncQueue() {
  // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏
  // 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'pending' –∏–ª–∏ 'failed'
  // 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:
  //    - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ 'syncing'
  //    - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–∞
  //    - –ü—Ä–∏ —É—Å–ø–µ—Ö–µ: —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞
  //    - –ü—Ä–∏ –æ—à–∏–±–∫–µ: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ retry_count, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ 'failed'
  //    - –ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ (409): –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞
  // 4. –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
  // 5. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
}

/**
 * –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
 * @param {Object} queueItem - –≠–ª–µ–º–µ–Ω—Ç –æ—á–µ—Ä–µ–¥–∏
 * @returns {Promise<boolean>} - true –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ
 */
async function processSyncQueueItem(queueItem) {
  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
  // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ API –∑–∞–ø—Ä–æ—Å–∞
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –∏ –æ—à–∏–±–æ–∫
  // –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
}

/**
 * –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Ä–µ–≤–∏–∑–∏–π
 * @param {Object} queueItem - –≠–ª–µ–º–µ–Ω—Ç –æ—á–µ—Ä–µ–¥–∏
 * @param {Object} serverTask - –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –∑–∞–¥–∞—á–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞
 * @returns {Promise<boolean>} - true –µ—Å–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω
 */
async function resolveRevisionConflict(queueItem, serverTask) {
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–∞–¥–∞—á–∏ –∏–∑ –∫—ç—à–∞
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π merge –∏–∑–º–µ–Ω–µ–Ω–∏–π (–≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ)
  // –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π - –ø–æ–∫–∞–∑ –¥–∏–∞–ª–æ–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  // –ü–æ–≤—Ç–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Ä–µ–≤–∏–∑–∏–µ–π
  // –ü—Ä–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è:
  //   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ has_conflict = true –≤ –∫—ç—à–µ
  //   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –≤–µ—Ä—Å–∏–π
  //   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–º–µ—Ç–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞
}

/**
 * –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞
 * @returns {Promise<void>}
 */
async function fullSync() {
  // 1. –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∑–∞–¥–∞—á —Å —Å–µ—Ä–≤–µ—Ä–∞
  // 2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à
  // 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (last_sync_time)
  // 4. –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫—ç—à–∞
}
```

#### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

##### –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

–°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑ –æ—á–µ—Ä–µ–¥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–∞–∂–µ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö —Å–µ—Ç–∏ –∏–ª–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞. –ú–µ—Ö–∞–Ω–∏–∑–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–æ–π—á–∏–≤—ã–º –∫ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø—Ä–æ–±–ª–µ–º–∞–º, –Ω–æ –Ω–µ –¥–æ–ª–∂–µ–Ω –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö.

##### –¢–∏–ø—ã –æ—à–∏–±–æ–∫ –∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∞

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏ (retryable)**
- **–¢–∏–ø—ã**: —Ç–∞–π–º–∞—É—Ç—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏ (ECONNRESET, ETIMEDOUT), HTTP 5xx (–∫—Ä–æ–º–µ 501, 505), HTTP 429 (Too Many Requests)
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ**: –æ–ø–µ—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'pending', —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å—á–µ—Ç—á–∏–∫ –ø–æ–ø—ã—Ç–æ–∫, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–∏
- **–î–µ–π—Å—Ç–≤–∏–µ**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞ (non-retryable)**
- **–¢–∏–ø—ã**: HTTP 400 (Bad Request), HTTP 401 (Unauthorized), HTTP 403 (Forbidden), HTTP 404 (Not Found), HTTP 422 (Validation Error)
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ**: –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ 'failed', –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏
- **–î–µ–π—Å—Ç–≤–∏–µ**: –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–µ–≤–∏–∑–∏–π (special handling)**
- **–¢–∏–ø**: HTTP 409 (Conflict) —Å –∫–æ–¥–æ–º 'conflict_revision'
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ**: –ø–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —á–µ—Ä–µ–∑ merge –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–î–µ–π—Å—Ç–≤–∏–µ**: 
  - –ï—Å–ª–∏ merge —É—Å–ø–µ—à–µ–Ω: –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Ä–µ–≤–∏–∑–∏–µ–π
  - –ï—Å–ª–∏ merge –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω: –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ 'conflict', –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  - –°—á–µ—Ç—á–∏–∫ –ø–æ–ø—ã—Ç–æ–∫ –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞

**–û—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ (conditional retry)**
- **–¢–∏–ø—ã**: HTTP 500 (Internal Server Error), HTTP 502 (Bad Gateway), HTTP 503 (Service Unavailable), HTTP 504 (Gateway Timeout)
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ**: –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π, –Ω–æ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–ø—ã—Ç–æ–∫
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ø–æ—Å–ª–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ø—ã—Ç–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ 'failed'

##### –ú–µ—Ö–∞–Ω–∏–∑–º —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏

–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Å–µ—Ç–∏ –ø—Ä–∏ –º–∞—Å—Å–æ–≤—ã—Ö –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö. –ó–∞–¥–µ—Ä–∂–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å –∫–∞–∂–¥–æ–π –Ω–µ—É–¥–∞—á–Ω–æ–π –ø–æ–ø—ã—Ç–∫–æ–π –ø–æ —Ñ–æ—Ä–º—É–ª–µ: `delay = min(base_delay * (multiplier ^ attempt_count), max_delay)`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–µ—Ä–∂–∫–∏:**
- **–ë–∞–∑–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞**: 1 —Å–µ–∫—É–Ω–¥–∞
- **–ú–Ω–æ–∂–∏—Ç–µ–ª—å**: 3 (–∫–∞–∂–¥–∞—è —Å–ª–µ–¥—É—é—â–∞—è –ø–æ–ø—ã—Ç–∫–∞ –≤ 3 —Ä–∞–∑–∞ –¥–æ–ª—å—à–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π)
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞**: 2 –º–∏–Ω—É—Ç—ã (120 —Å–µ–∫—É–Ω–¥)
- **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 1—Å ‚Üí 3—Å ‚Üí 9—Å ‚Üí 27—Å ‚Üí 81—Å ‚Üí 120—Å (–º–∞–∫—Å–∏–º—É–º)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏ –∑–∞–¥–µ—Ä–∂–∫–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –¥–æ –±–∞–∑–æ–≤–æ–π –¥–ª—è –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–∏
- –ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞, —Å—á–µ—Ç—á–∏–∫ –ø–æ–ø—ã—Ç–æ–∫ –∏ –∑–∞–¥–µ—Ä–∂–∫–∞ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–ø—ã—Ç–∫–∏ (`last_retry`) –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞

##### –õ–∏–º–∏—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫:**
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: 5 –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
- **–î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫**: 0 –ø–æ–ø—ã—Ç–æ–∫ (—Å—Ä–∞–∑—É –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ failed)
- **–î–ª—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**: –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω –∏–ª–∏ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏

**–¢–∞–π–º–∞—É—Ç—ã:**
- **–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞**: 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∫–∞–∂–¥—ã–π HTTP –∑–∞–ø—Ä–æ—Å
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤ –æ—á–µ—Ä–µ–¥–∏**: 7 –¥–Ω–µ–π (–ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º)
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—á–µ—Ä–µ–¥–∏**: –ø—Ä–∏ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥, –ø—Ä–∏ –æ—Ñ—Ñ–ª–∞–π–Ω–µ - –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏

##### –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

–û–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ FIFO (First In, First Out) –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è (`timestamp`). –û–¥–Ω–∞–∫–æ –µ—Å—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è:

**–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
- –û–ø–µ—Ä–∞—Ü–∏–∏ 'complete', 'uncomplete' –∏ 'delete' (–ª–µ–≥–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏) - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å, —Ç–∞–∫ –∫–∞–∫ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞ –∏ –∑–∞–Ω–∏–º–∞—é—Ç –º–∏–Ω–∏–º—É–º –ø–∞–º—è—Ç–∏
- –û–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ –±–æ–ª–µ–µ 1 —á–∞—Å–∞ - —É—Å–∫–æ—Ä—è—é—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
- –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (>3) - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ä–µ–∂–µ, —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

##### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

**–£—Ä–æ–≤–Ω–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**

1. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ** (–ø–æ—Å–ª–µ 3 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫):
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ UI: "N –æ–ø–µ—Ä–∞—Ü–∏–π –æ–∂–∏–¥–∞—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏"
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è

2. **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ** (–ø–æ—Å–ª–µ 5 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫):
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –±–∞–Ω–Ω–µ—Ä: "–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å"
   - –ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é" –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
   - –û–ø–µ—Ä–∞—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏

3. **–û—à–∏–±–∫–∞** (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏–ª–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏):
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
   - –°–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

##### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

**–¢—Ä–∏–≥–≥–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**

1. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–∏**: –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∏–∑ –æ—Ñ—Ñ–ª–∞–π–Ω–∞ –≤ –æ–Ω–ª–∞–π–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'pending'
2. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**: –ø—Ä–∏ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–µ –æ—á–µ—Ä–µ–¥—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
3. **–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π**: –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —É—Å–ø–µ—à–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –µ—Å—Ç—å –ª–∏ –µ—â–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥–∏
4. **–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å —Å–µ—Ç–∏ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
- –û–ø–µ—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±–∞—Ç—á–∞–º–∏ (–¥–æ 10 –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞ —Ä–∞–∑) –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
- –ú–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏ –¥–µ–ª–∞–µ—Ç—Å—è –ø–∞—É–∑–∞ 500–º—Å –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞—Ç—á–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞

##### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏

–ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –æ—á–µ—Ä–µ–¥–∏ (100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤) –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è FIFO:
- –°–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–û—á–µ—Ä–µ–¥—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞. –°—Ç–∞—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω—ã."
- –û–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã, –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

##### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

–î–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –º–µ—Ç—Ä–∏–∫–∏:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
- –í—Ä–µ–º—è –≤ –æ—á–µ—Ä–µ–¥–∏
- –¢–∏–ø –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ—à–∏–±–∫–∏
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–ø—ã—Ç–∫–∏

–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É:
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É–¥–∞—á–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π
- –¢–∏–ø—ã –æ—à–∏–±–æ–∫ –∏ –∏—Ö —á–∞—Å—Ç–æ—Ç–∞

##### –†–µ–∑—é–º–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

- **–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞**: 1—Å ‚Üí 3—Å ‚Üí 9—Å ‚Üí 27—Å ‚Üí –º–∞–∫—Å–∏–º—É–º 2 –º–∏–Ω—É—Ç—ã
- **–ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫**: 5 –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫, 0 –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤ –æ—á–µ—Ä–µ–¥–∏**: 7 –¥–Ω–µ–π
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏**: 10 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ –æ–Ω–ª–∞–π–Ω, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏
- **–†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞**: –¥–æ 10 –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞ —Ä–∞–∑
- **–ü–∞—É–∑–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏**: 500–º—Å

### 1.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

#### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `frontend/api.js`

```javascript
// –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –≤—Å–µ—Ö API –º–µ—Ç–æ–¥–æ–≤
// –ü—Ä–∏ –æ—Ñ—Ñ–ª–∞–π–Ω–µ: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –≤—ã–∑–æ–≤–∞
// –ü—Ä–∏ –æ–Ω–ª–∞–π–Ω–µ: –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ + –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

// –ü—Ä–∏–º–µ—Ä –¥–ª—è tasksAPI.update:
async function update(id, task) {
  if (isOnline()) {
    try {
      const response = await fetch(...);
      // –ü—Ä–∏ —É—Å–ø–µ—Ö–µ: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞
      await saveTasksToCache([response.json()]);
      return response.json();
    } catch (error) {
      // –ü—Ä–∏ –æ—à–∏–±–∫–µ: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å
      await addToSyncQueue('update', 'task', id, task, task.revision);
      throw error;
    }
  } else {
    // –û—Ñ—Ñ–ª–∞–π–Ω: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å
    await addToSyncQueue('update', 'task', id, task, task.revision);
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∞ –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    await updateLocalTaskCache(id, task);
    // –í–æ–∑–≤—Ä–∞—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
    return getTaskFromCache(id);
  }
}
```

#### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `frontend/app.js`

```javascript
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
async function init() {
  await initDatabase();
  await loadDataFromCacheOrServer();
  setupNetworkListeners();
  startSyncInterval();
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö: —Å–Ω–∞—á–∞–ª–∞ –∏–∑ –∫—ç—à–∞, –∑–∞—Ç–µ–º —Å —Å–µ—Ä–≤–µ—Ä–∞
async function loadData() {
  // 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫—ç—à–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  const cachedTasks = await loadTasksFromCache();
  if (cachedTasks.length > 0) {
    applyTasksToUI(cachedTasks);
  }
  
  // 2. –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞
  if (isOnline()) {
    try {
      const serverTasks = await tasksAPI.getAll();
      await saveTasksToCache(serverTasks);
      applyTasksToUI(serverTasks);
      await syncQueue(); // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏
    } catch (error) {
      console.warn('Failed to load from server, using cache', error);
      showOfflineIndicator();
    }
  } else {
    showOfflineIndicator();
  }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∑–∞–¥–∞—á–∞–º–∏
async function handleTaskOperation(operation, taskId, taskData) {
  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å
  await addToSyncQueue(operation, 'task', taskId, taskData);
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∞
  await updateLocalTaskCache(taskId, taskData);
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
  applyTaskEventFromWs(operation, taskData, taskId);
  // –ü–æ–ø—ã—Ç–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ –æ–Ω–ª–∞–π–Ω)
  if (isOnline()) {
    syncQueue();
  }
}
```

### 1.5. UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

#### –°—Ç—Ä–æ–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è (Status Bar)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤–≤–µ—Ä—Ö—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –ø–æ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏–ª–∏ –≤ —à–∞–ø–∫–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
- –õ–µ–≤–∞—è —á–∞—Å—Ç—å: –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏
- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- –¶–µ–Ω—Ç—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—á–µ—Ä–µ–¥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π)

**–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è**:
- –§–æ–Ω: —Å–ª–µ–≥–∫–∞ –∑–∞—Ç–µ–º–Ω–µ–Ω–Ω—ã–π –∏–ª–∏ —Å –ª–µ–≥–∫–∏–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è
- –í—ã—Å–æ—Ç–∞: 32-40px (–∫–æ–º–ø–∞–∫—Ç–Ω–∞—è, –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ –º–µ—Å—Ç–∞)
- –û—Ç—Å—Ç—É–ø—ã: 8-12px –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏, 4-6px –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
- –¢–µ–Ω—å/–≥—Ä–∞–Ω–∏—Ü–∞: —Ç–æ–Ω–∫–∞—è –Ω–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º

**–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**:
- –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö: –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º–∞, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
- –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ: –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫—Ä—ã—Ç–∞ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –≤–Ω–∏–∑, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –≤–≤–µ—Ä—Ö

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞**:
- –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –æ–ø—Ü–∏—è "–ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è"
- –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏: –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∫–æ–Ω–∫–∏ –±–µ–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–µ–π
- –ü—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏: –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–∫–æ–Ω–∫–∏ —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ –ø–æ–¥–ø–∏—Å—è–º–∏ ("–û–Ω–ª–∞–π–Ω", "–û—Ñ—Ñ–ª–∞–π–Ω", "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...")
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage (–≤–µ–±) –∏–ª–∏ SharedPreferences (Android)
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: —Ç–µ–∫—Å—Ç –≤–∫–ª—é—á–µ–Ω

#### –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

1. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏** (–≤ —Å—Ç—Ä–æ–∫–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è)
   - –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: –ª–µ–≤–∞—è —á–∞—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
   - –°–æ—Å—Ç–æ—è–Ω–∏—è:
     - üü¢ "–û–Ω–ª–∞–π–Ω" - —Å–≤—è–∑—å –µ—Å—Ç—å
     - üü° "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è..." - –∏–¥–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
     - üî¥ "–û—Ñ—Ñ–ª–∞–π–Ω" - –Ω–µ—Ç —Å–≤—è–∑–∏
     - ‚ö†Ô∏è "–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏" - –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
   - –†–∞–∑–º–µ—Ä: –∏–∫–æ–Ω–∫–∞ 20-24px, —Ç–µ–∫—Å—Ç —Ä—è–¥–æ–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –ø—Ä–∏ –∫–ª–∏–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç–∞—Ç—É—Å–µ —Å–µ—Ç–∏

2. **–ë–∞–Ω–Ω–µ—Ä –æ—Ñ—Ñ–ª–∞–π–Ω–∞**
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–≤—è–∑–∏ > 30 –º–∏–Ω—É—Ç
   - –¢–µ–∫—Å—Ç: "–ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏. –†–∞–±–æ—Ç–∞–µ—Ç–µ –≤ –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–µ."
   - –ö–Ω–æ–ø–∫–∞: "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é" (—Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫)

3. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—á–µ—Ä–µ–¥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π**
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   - –¢–µ–∫—Å—Ç: "N –æ–ø–µ—Ä–∞—Ü–∏–π –æ–∂–∏–¥–∞—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏"
   - –ö–Ω–æ–ø–∫–∞: "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ–π—á–∞—Å"

4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö** (—Ç–æ–ª—å–∫–æ –≤–µ–±-–≤–µ—Ä—Å–∏—è)
   - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ —Ä–µ–≤–∏–∑–∏–π
   - –ü–æ–∫–∞–∑ —Ä–∞–∑–ª–∏—á–∏–π –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω–æ–π –∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
   - –ö–Ω–æ–ø–∫–∏: "–û–±—ä–µ–¥–∏–Ω–∏—Ç—å", "–ü–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å", "–û—Ç–º–µ–Ω–∏—Ç—å"
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –í Android-–≤–µ—Ä—Å–∏–∏ –¥–∏–∞–ª–æ–≥ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ merge –∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ–º–µ—á–µ–Ω–Ω—ã–º–∏ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

5. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –ø–æ–º–µ—Ç–∫–∞ –∑–∞–¥–∞—á —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏**
   - **–í –≤–∏–¥–∞—Ö "–°–µ–≥–æ–¥–Ω—è" –∏ "–í—Å–µ –∑–∞–¥–∞—á–∏"**: –∑–∞–¥–∞—á–∏ —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏ –ø–æ–º–µ—á–∞—é—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º
   - **–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**:
     - –ò–∫–æ–Ω–∫–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (‚ö†Ô∏è) —Ä—è–¥–æ–º —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∑–∞–¥–∞—á–∏
     - –í—ã–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞ –∑–∞–¥–∞—á–∏ —Ü–≤–µ—Ç–æ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–∂–µ–ª—Ç—ã–π/–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
     - –ë–µ–π–¥–∂ "–ö–æ–Ω—Ñ–ª–∏–∫—Ç" –≤ —É–≥–ª—É –∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–¥–∞—á–∏
   - **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** (–≤–µ–±-–≤–µ—Ä—Å–∏—è):
     - –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∑–∞–¥–∞—á—É —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞
     - –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∞: "–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –≤–µ—Ä—Å–∏–π"
   - **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** (Android-–≤–µ—Ä—Å–∏—è):
     - –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∑–∞–¥–∞—á—É —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π. –†–∞–∑—Ä–µ—à–∏—Ç–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å"
     - –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∞: "–ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π"
     - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ merge (–≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ), –∏–Ω–∞—á–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ–º–µ—á–µ–Ω–Ω—ã–º
   - **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
     - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á –ø–æ –Ω–∞–ª–∏—á–∏—é –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
     - –û—Ç–¥–µ–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è "–ó–∞–¥–∞—á–∏ —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏" –≤–≤–µ—Ä—Ö—É —Å–ø–∏—Å–∫–∞
   - **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞**:
     - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –ø–æ–º–µ—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è
     - –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –ø–æ–º–µ—Ç–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```javascript
// HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–æ–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
function createStatusBar() {
  const statusBar = document.createElement('div');
  statusBar.id = 'status-bar';
  statusBar.className = 'status-bar';
  statusBar.innerHTML = `
    <div class="status-bar-left">
      <span id="network-indicator" class="status-indicator">
        <span id="network-icon">üü¢</span>
        <span id="network-text">–û–Ω–ª–∞–π–Ω</span>
      </span>
    </div>
    <div class="status-bar-center" id="queue-indicator" style="display: none;">
      <span id="queue-text"></span>
    </div>
    <div class="status-bar-right">
      <span id="storage-indicator" class="status-indicator" title="–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞">
        <span id="storage-icon">üü¢</span>
      </span>
    </div>
  `;
  return statusBar;
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å–µ—Ç–∏
function updateNetworkIndicator(isOnline, isSyncing) {
  const icon = document.getElementById('network-icon');
  const text = document.getElementById('network-text');
  const compactMode = getStatusBarCompactMode();
  
  if (!isOnline) {
    icon.textContent = 'üî¥';
    text.textContent = '–û—Ñ—Ñ–ª–∞–π–Ω';
  } else if (isSyncing) {
    icon.textContent = 'üü°';
    text.textContent = '–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...';
  } else {
    icon.textContent = 'üü¢';
    text.textContent = '–û–Ω–ª–∞–π–Ω';
  }
  
  // –°–∫—Ä—ã—Ç–∏–µ/–ø–æ–∫–∞–∑ —Ç–µ–∫—Å—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  if (text) {
    text.style.display = compactMode ? 'none' : 'inline';
  }
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
function getStatusBarCompactMode() {
  const saved = localStorage.getItem('statusBarCompactMode');
  return saved === 'true';
}

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
function setStatusBarCompactMode(compact) {
  localStorage.setItem('statusBarCompactMode', String(compact));
  updateStatusBarDisplay();
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
function updateStatusBarDisplay() {
  const compactMode = getStatusBarCompactMode();
  const statusBar = document.getElementById('status-bar');
  
  if (statusBar) {
    if (compactMode) {
      statusBar.classList.add('compact');
    } else {
      statusBar.classList.remove('compact');
    }
  }
  
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
  const textElements = statusBar?.querySelectorAll('.status-text');
  textElements?.forEach(el => {
    el.style.display = compactMode ? 'none' : 'inline';
  });
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
function updateStorageIndicator(percentage) {
  const icon = document.getElementById('storage-icon');
  const indicator = document.getElementById('storage-indicator');
  
  if (percentage >= 90) {
    icon.textContent = 'üî¥';
    indicator.title = `–ó–∞–ø–æ–ª–Ω–µ–Ω–æ: ${percentage.toFixed(1)}% - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ`;
  } else if (percentage >= 70) {
    icon.textContent = 'üü°';
    indicator.title = `–ó–∞–ø–æ–ª–Ω–µ–Ω–æ: ${percentage.toFixed(1)}% - –ü—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∫ –ª–∏–º–∏—Ç—É`;
  } else {
    icon.textContent = 'üü¢';
    indicator.title = `–ó–∞–ø–æ–ª–Ω–µ–Ω–æ: ${percentage.toFixed(1)}%`;
  }
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
  indicator.onclick = () => {
    showSettingsScreen();
  };
}

// CSS –¥–ª—è —Å—Ç—Ä–æ–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
const statusBarCSS = `
.status-bar {
  position: sticky;
  top: 0;
  z-index: 100;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 12px;
  background: rgba(0, 0, 0, 0.05);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  height: 36px;
  font-size: 12px;
}

.status-bar-left,
.status-bar-right {
  display: flex;
  align-items: center;
  gap: 4px;
}

.status-bar-center {
  flex: 1;
  text-align: center;
  font-size: 11px;
  color: #666;
}

.status-indicator {
  display: flex;
  align-items: center;
  gap: 4px;
  cursor: pointer;
  padding: 2px 4px;
  border-radius: 4px;
  transition: background-color 0.2s;
}

.status-indicator:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.status-bar.compact .status-text {
  display: none;
}

.status-bar.compact .status-bar-center {
  display: none;
}
`;

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
function initStatusBar() {
  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ CSS
  const style = document.createElement('style');
  style.textContent = statusBarCSS;
  document.head.appendChild(style);
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –∏ –≤—Å—Ç–∞–≤–∫–∞ —Å—Ç—Ä–æ–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
  const statusBar = createStatusBar();
  const mainContent = document.querySelector('main') || document.body;
  mainContent.insertBefore(statusBar, mainContent.firstChild);
  
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
  updateNetworkIndicator(navigator.onLine, false);
  updateStorageIndicator(0);
  
  // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
  updateStatusBarDisplay();
  
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏
  window.addEventListener('online', () => updateNetworkIndicator(true, false));
  window.addEventListener('offline', () => updateNetworkIndicator(false, false));
  
  // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
  setInterval(async () => {
    const percentage = await getStoragePercentage();
    updateStorageIndicator(percentage);
  }, 30000); // –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
}

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —ç–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫
function addStatusBarSetting() {
  // –í —ç–∫—Ä–∞–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–æ–±–∞–≤–∏—Ç—å —á–µ–∫–±–æ–∫—Å:
  // "–ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è" - –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∫–æ–Ω–∫–∏ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞
  const settingHTML = `
    <div class="setting-item">
      <label>
        <input type="checkbox" id="status-bar-compact" 
               ${getStatusBarCompactMode() ? 'checked' : ''}>
        –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Ç–æ–ª—å–∫–æ –∏–∫–æ–Ω–∫–∏)
      </label>
      <p class="setting-description">
        –°–∫—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏ –≤ —Å—Ç—Ä–æ–∫–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –æ—Å—Ç–∞–≤–ª—è—è —Ç–æ–ª—å–∫–æ –∏–∫–æ–Ω–∫–∏
      </p>
    </div>
  `;
  
  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  document.getElementById('status-bar-compact')?.addEventListener('change', (e) => {
    setStatusBarCompactMode(e.target.checked);
  });
}
```

### 1.6. –û–±—Ä–∞–±–æ—Ç–∫–∞ WebSocket —Å–æ–±—ã—Ç–∏–π

```javascript
// –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ applyTaskEventFromWs
function applyTaskEventFromWs(action, taskJson, taskId) {
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è
  if (taskJson) {
    saveTasksToCache([taskJson]);
  }
  // –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
  // ...
}
```

## 2. Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω

### 2.1. –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Room Database)

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–∏—Ç—å –≤ `android/app/build.gradle.kts`:

```kotlin
dependencies {
    // Room
    val roomVersion = "2.6.1"
    implementation("androidx.room:room-runtime:$roomVersion")
    implementation("androidx.room:room-ktx:$roomVersion")
    kapt("androidx.room:room-compiler:$roomVersion")
    
    // –î–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
    implementation("net.zetetic:android-database-sqlcipher:4.5.4")
    implementation("androidx.sqlite:sqlite-ktx:2.4.0")
}
```

#### Entity –∫–ª–∞—Å—Å—ã

**`TaskCache.kt`**
```kotlin
@Entity(tableName = "tasks_cache")
data class TaskCache(
    @PrimaryKey val id: Int,
    val title: String,
    val description: String?,
    val taskType: String,
    val recurrenceType: String?,
    val recurrenceInterval: Int?,
    val intervalDays: Int?,
    val reminderTime: String, // ISO format
    val active: Boolean,
    val completed: Boolean,
    val groupId: Int?,
    val revision: Int,
    val assignedUserIds: String, // JSON array as string
    val createdAt: String, // ISO format
    val updatedAt: String, // ISO format
    val cachedAt: Long = System.currentTimeMillis() // –¥–ª—è LRU
)
```

**`SyncQueueItem.kt`**
```kotlin
@Entity(tableName = "sync_queue")
data class SyncQueueItem(
    @PrimaryKey(autoGenerate = true) val id: Long = 0,
    val operation: String, // 'create', 'update', 'delete', 'complete', 'uncomplete'
    val entityType: String, // 'task'
    val entityId: Int?, // null –¥–ª—è create
    val payload: String?, // JSON string (null –¥–ª—è –ª–µ–≥–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π complete/uncomplete)
    val revision: Int?, // null –¥–ª—è –ª–µ–≥–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
    val timestamp: Long = System.currentTimeMillis(),
    val retryCount: Int = 0,
    val lastRetry: Long = 0,
    val status: String = "pending", // 'pending', 'syncing', 'failed'
    val sizeBytes: Long = 0 // –†–∞–∑–º–µ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –±–∞–π—Ç–∞—Ö
) {
    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
    val isLightOperation: Boolean
        get() = operation == "complete" || operation == "uncomplete" || operation == "delete"
}
```

#### DAO –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

**`TaskCacheDao.kt`**
```kotlin
@Dao
interface TaskCacheDao {
    @Query("SELECT * FROM tasks_cache WHERE reminder_time >= :minDate ORDER BY reminder_time ASC")
    suspend fun getTasksSince(minDate: String): List<TaskCache>
    
    @Query("SELECT * FROM tasks_cache WHERE id = :id")
    suspend fun getTaskById(id: Int): TaskCache?
    
    @Query("SELECT * FROM tasks_cache WHERE has_conflict = 1")
    suspend fun getTasksWithConflicts(): List<TaskCache>
    
    @Insert(onConflict = OnConflictStrategy.REPLACE)
    suspend fun insertTask(task: TaskCache)
    
    @Insert(onConflict = OnConflictStrategy.REPLACE)
    suspend fun insertTasks(tasks: List<TaskCache>)
    
    @Query("UPDATE tasks_cache SET has_conflict = :hasConflict, conflict_reason = :reason, conflict_timestamp = :timestamp WHERE id = :id")
    suspend fun updateConflictStatus(id: Int, hasConflict: Boolean, reason: String?, timestamp: Long?)
    
    @Query("DELETE FROM tasks_cache WHERE cached_at < :cutoffTime")
    suspend fun deleteOldTasks(cutoffTime: Long)
    
    @Query("DELETE FROM tasks_cache")
    suspend fun clearAll()
    
    @Query("SELECT COUNT(*) FROM tasks_cache")
    suspend fun getCount(): Int
}
```

**`SyncQueueDao.kt`**
```kotlin
@Dao
interface SyncQueueDao {
    @Query("SELECT * FROM sync_queue WHERE status = :status ORDER BY timestamp ASC LIMIT :limit")
    suspend fun getQueueItems(status: String, limit: Int = 100): List<SyncQueueItem>
    
    @Insert
    suspend fun insertQueueItem(item: SyncQueueItem): Long
    
    @Update
    suspend fun updateQueueItem(item: SyncQueueItem)
    
    @Query("DELETE FROM sync_queue WHERE id = :id")
    suspend fun deleteQueueItem(id: Long)
    
    @Query("DELETE FROM sync_queue WHERE status = 'synced' AND timestamp < :cutoffTime")
    suspend fun deleteOldSyncedItems(cutoffTime: Long)
    
    @Query("SELECT COUNT(*) FROM sync_queue WHERE status = 'pending'")
    suspend fun getPendingCount(): Int
}
```

#### Database –∫–ª–∞—Å—Å

**`AppDatabase.kt`**
```kotlin
@Database(
    entities = [TaskCache::class, SyncQueueItem::class],
    version = 1,
    exportSchema = false
)
abstract class AppDatabase : RoomDatabase() {
    abstract fun taskCacheDao(): TaskCacheDao
    abstract fun syncQueueDao(): SyncQueueDao
    
    companion object {
        @Volatile
        private var INSTANCE: AppDatabase? = null
        
        fun getDatabase(context: Context): AppDatabase {
            return INSTANCE ?: synchronized(this) {
                val instance = Room.databaseBuilder(
                    context.applicationContext,
                    AppDatabase::class.java,
                    "homeplanner_db"
                )
                    .fallbackToDestructiveMigration()
                    .build()
                INSTANCE = instance
                instance
            }
        }
    }
}
```

### 2.2. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º

**`OfflineRepository.kt`**
```kotlin
class OfflineRepository(private val db: AppDatabase) {
    private val taskCacheDao = db.taskCacheDao()
    private val syncQueueDao = db.syncQueueDao()
    
    // –†–∞–±–æ—Ç–∞ —Å –∫—ç—à–µ–º –∑–∞–¥–∞—á
    suspend fun saveTasksToCache(tasks: List<Task>): Result<Unit> {
        return try {
            val cacheTasks = tasks.map { it.toTaskCache() }
            taskCacheDao.insertTasks(cacheTasks)
            cleanupOldCache()
            Result.success(Unit)
        } catch (e: Exception) {
            Result.failure(e)
        }
    }
    
    suspend fun loadTasksFromCache(): List<Task> {
        val minDate = LocalDateTime.now().minusDays(7)
            .format(DateTimeFormatter.ISO_LOCAL_DATE_TIME)
        return taskCacheDao.getTasksSince(minDate).map { it.toTask() }
    }
    
    private suspend fun cleanupOldCache() {
        val cutoffTime = System.currentTimeMillis() - (7 * 24 * 60 * 60 * 1000)
        taskCacheDao.deleteOldTasks(cutoffTime)
    }
    
    // –†–∞–±–æ—Ç–∞ —Å –æ—á–µ—Ä–µ–¥—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    suspend fun addToSyncQueue(
        operation: String,
        entityType: String,
        entityId: Int?,
        payload: Any? = null,
        revision: Int? = null
    ): Result<Long> {
        return try {
            val isLightOperation = operation == "complete" || operation == "uncomplete"
            
            // –î–ª—è –ª–µ–≥–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π payload –∏ revision –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
            val jsonPayload = if (isLightOperation) null else Gson().toJson(payload)
            
            val item = SyncQueueItem(
                operation = operation,
                entityType = entityType,
                entityId = entityId,
                payload = jsonPayload,
                revision = if (isLightOperation) null else revision,
                sizeBytes = calculateOperationSize(operation, jsonPayload)
            )
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –æ—á–µ—Ä–µ–¥–∏ –ø–æ –æ–±—ä–µ–º—É (5 –ú–ë)
            val currentSize = syncQueueDao.getTotalSizeBytes() ?: 0L
            val queueLimitBytes = 5L * 1024 * 1024 // 5 –ú–ë
            
            if (currentSize + item.sizeBytes > queueLimitBytes) {
                // –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –º–µ—Å—Ç–∞ –≤ –æ—á–µ—Ä–µ–¥–∏
                freeQueueSpace(item.sizeBytes, queueLimitBytes)
            }
            
            val id = syncQueueDao.insertQueueItem(item)
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
            updateStorageMetadata()
            
            Result.success(id)
        } catch (e: Exception) {
            Result.failure(e)
        }
    }
    
    private fun calculateOperationSize(operation: String, payload: String?): Long {
        // –ë–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–ø—Ä–∏–º–µ—Ä–Ω–æ 100 –±–∞–π—Ç)
        var size = 100L
        
        // –†–∞–∑–º–µ—Ä payload –¥–ª—è –ø–æ–ª–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
        if (payload != null) {
            size += payload.toByteArray().size.toLong()
        }
        
        return size
    }
    
    private suspend fun freeQueueSpace(requiredBytes: Long, queueLimitBytes: Long) {
        var currentSize = syncQueueDao.getTotalSizeBytes() ?: 0L
        
        // –°–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª—è–µ–º –ø–æ–ª–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (create/update)
        val fullOps = syncQueueDao.getFullOperations()
        for (item in fullOps) {
            if (currentSize + requiredBytes <= queueLimitBytes) break
            syncQueueDao.deleteQueueItem(item.id)
            currentSize -= item.sizeBytes
        }
        
        // –ó–∞—Ç–µ–º –ª–µ–≥–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (complete/uncomplete/delete), –µ—Å–ª–∏ –º–µ—Å—Ç–∞ –≤—Å–µ –µ—â–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç
        if (currentSize + requiredBytes > queueLimitBytes) {
            val lightOps = syncQueueDao.getLightOperations()
            for (item in lightOps) {
                if (currentSize + requiredBytes <= queueLimitBytes) break
                syncQueueDao.deleteQueueItem(item.id)
                currentSize -= item.sizeBytes
            }
        }
    }
    
    private suspend fun updateStorageMetadata() {
        val queueSize = syncQueueDao.getTotalSizeBytes() ?: 0L
        val cacheSize = taskCacheDao.getCacheSizeBytes() ?: 0L // –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥
        val totalSize = queueSize + cacheSize
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SharedPreferences –∏–ª–∏ DataStore
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏
    }
    
    suspend fun getSyncQueue(status: String = "pending", limit: Int = 100): List<SyncQueueItem> {
        return syncQueueDao.getQueueItems(status, limit)
    }
    
    suspend fun updateQueueItem(item: SyncQueueItem) {
        syncQueueDao.updateQueueItem(item)
    }
    
    suspend fun removeFromQueue(id: Long) {
        syncQueueDao.deleteQueueItem(id)
    }
}
```

### 1.3. –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**`SyncService.kt`**
```kotlin
class SyncService(
    private val repository: OfflineRepository,
    private val tasksApi: TasksApi,
    private val context: Context
) {
    private val connectivityManager = 
        context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager
    
    fun isOnline(): Boolean {
        val network = connectivityManager.activeNetwork ?: return false
        val capabilities = connectivityManager.getNetworkCapabilities(network) ?: return false
        return capabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET) &&
               capabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_VALIDATED)
    }
    
    suspend fun syncQueue(): Result<Unit> {
        if (!isOnline()) {
            return Result.failure(Exception("No internet connection"))
        }
        
        val queueItems = repository.getSyncQueue("pending", 100)
        var successCount = 0
        var failureCount = 0
        
        for (item in queueItems) {
            val result = processQueueItem(item)
            if (result.isSuccess) {
                successCount++
                repository.removeFromQueue(item.id)
            } else {
                failureCount++
                updateQueueItemOnFailure(item, result.exceptionOrNull())
            }
        }
        
        return if (failureCount == 0) {
            Result.success(Unit)
        } else {
            Result.failure(Exception("$failureCount operations failed"))
        }
    }
    
    private suspend fun processQueueItem(item: SyncQueueItem): Result<Unit> {
        return try {
            when (item.operation) {
                "create" -> createTaskFromQueue(item)
                "update" -> updateTaskFromQueue(item)
                "delete" -> deleteTaskFromQueue(item)
                "complete" -> completeTaskFromQueue(item)
                "uncomplete" -> uncompleteTaskFromQueue(item)
                else -> Result.failure(Exception("Unknown operation: ${item.operation}"))
            }
        } catch (e: Exception) {
            Result.failure(e)
        }
    }
    
    private suspend fun updateTaskFromQueue(item: SyncQueueItem): Result<Unit> {
        val taskData = Gson().fromJson(item.payload, TaskUpdate::class.java)
        val response = tasksApi.updateTask(item.entityId!!, taskData)
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞
        repository.saveTasksToCache(listOf(response.toTask()))
        return Result.success(Unit)
    }
    
    // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π...
}
```

### 1.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

#### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `TasksApi.kt`

```kotlin
class TasksApi(
    private val httpClient: OkHttpClient = OkHttpClient(),
    private val baseUrl: String = BuildConfig.API_BASE_URL,
    private val selectedUserId: Int? = null,
    private val offlineRepository: OfflineRepository? = null
) {
    fun getTasks(activeOnly: Boolean = true): List<Task> {
        return try {
            // –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞
            val tasks = fetchTasksFromServer(activeOnly)
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à
            offlineRepository?.saveTasksToCache(tasks)
            tasks
        } catch (e: Exception) {
            // –ü—Ä–∏ –æ—à–∏–±–∫–µ: –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫—ç—à–∞
            offlineRepository?.loadTasksFromCache() ?: emptyList()
        }
    }
    
    fun updateTask(id: Int, task: TaskUpdate): Task {
        return try {
            val response = fetchUpdateFromServer(id, task)
            offlineRepository?.saveTasksToCache(listOf(response))
            response
        } catch (e: Exception) {
            // –û—Ñ—Ñ–ª–∞–π–Ω: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å
            offlineRepository?.addToSyncQueue("update", "task", id, task, task.revision)
            // –í–æ–∑–≤—Ä–∞—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∏–∑ –∫—ç—à–∞
            offlineRepository?.getTaskFromCache(id) 
                ?: throw Exception("Task not found in cache")
        }
    }
}
```

#### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `MainActivity.kt`

```kotlin
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
val database = AppDatabase.getDatabase(context)
val offlineRepository = OfflineRepository(database)
val syncService = SyncService(offlineRepository, tasksApi, context)

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö: —Å–Ω–∞—á–∞–ª–∞ –∏–∑ –∫—ç—à–∞, –∑–∞—Ç–µ–º —Å —Å–µ—Ä–≤–µ—Ä–∞
suspend fun loadTasks() {
    // 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫—ç—à–∞
    val cachedTasks = offlineRepository.loadTasksFromCache()
    if (cachedTasks.isNotEmpty()) {
        tasks = cachedTasks
        isLoading = false
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —Å –ø–æ–º–µ—Ç–∫–∞–º–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
        updateConflictIndicators(cachedTasks)
    }
    
    // 2. –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞
    if (syncService.isOnline()) {
        try {
            val serverTasks = tasksApi.getTasks(activeOnly = false)
            tasks = serverTasks
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏
            syncService.syncQueue()
            // –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
            val updatedTasks = offlineRepository.loadTasksFromCache()
            updateConflictIndicators(updatedTasks)
        } catch (e: Exception) {
            Log.w("TasksScreen", "Failed to load from server, using cache", e)
            showOfflineIndicator()
        }
    } else {
        showOfflineIndicator()
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
fun updateConflictIndicators(tasks: List<Task>) {
    val conflictedTasks = offlineRepository.getTasksWithConflicts()
    val conflictIds = conflictedTasks.map { it.id }.toSet()
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–º–µ—Ç–æ–∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
    // –í Compose —ç—Ç–æ –±—É–¥–µ—Ç —á–µ—Ä–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏–µ hasConflict –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
    // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤ Android-–≤–µ—Ä—Å–∏–∏ –¥–∏–∞–ª–æ–≥ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
    // –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ–º–µ—á–µ–Ω–Ω—ã–º–∏
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –∑–∞–¥–∞—á—É —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–º (Android)
// –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –¥–∏–∞–ª–æ–≥–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤ –≤–µ–±-–≤–µ—Ä—Å–∏–∏
fun handleConflictTaskClick(task: Task) {
    // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –¥–∏–∞–ª–æ–≥–∞
    showToast(
        message = "–ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π –∑–∞–¥–∞—á–∏ '${task.title}'. " +
                  "–†–∞–∑—Ä–µ—à–∏—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.",
        duration = Toast.LENGTH_LONG
    )
    // –ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —á–µ—Ä–µ–∑ merge
    lifecycleScope.launch {
        attemptAutoResolveConflict(task.id)
    }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∑–∞–¥–∞—á–∞–º–∏
fun handleTaskOperation(operation: String, taskId: Int, taskData: Any) {
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å
    offlineRepository.addToSyncQueue(operation, "task", taskId, taskData)
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∞
    updateLocalTaskCache(taskId, taskData)
    // –ü–æ–ø—ã—Ç–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    if (syncService.isOnline()) {
        lifecycleScope.launch {
            syncService.syncQueue()
        }
    }
}
```

### 1.5. UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Compose

```kotlin
@Composable
fun AppStatusBar(
    appIcon: ImageVector,
    screenTitle: String,
    isOnline: Boolean,
    isSyncing: Boolean,
    storagePercentage: Float,
    compactMode: Boolean = false,
    onNetworkClick: () -> Unit,
    onStorageClick: () -> Unit
) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .height(48.dp)
            .background(MaterialTheme.colorScheme.surfaceVariant)
            .padding(horizontal = 12.dp, vertical = 8.dp),
        horizontalArrangement = Arrangement.SpaceBetween,
        verticalAlignment = Alignment.CenterVertically
    ) {
        // –ò–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        Icon(
            imageVector = appIcon,
            contentDescription = "HomePlanner",
            modifier = Modifier.size(32.dp),
            tint = MaterialTheme.colorScheme.primary
        )
        
        // –ù–∞–∑–≤–∞–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞
        Text(
            text = screenTitle,
            style = MaterialTheme.typography.titleMedium,
            modifier = Modifier.weight(1f).padding(horizontal = 12.dp)
        )
        
        // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è
        Row(
            horizontalArrangement = Arrangement.spacedBy(8.dp),
            verticalAlignment = Alignment.CenterVertically
        ) {
            // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–µ—Ç–∏
            NetworkIndicator(
                isOnline = isOnline,
                isSyncing = isSyncing,
                compactMode = compactMode,
                onClick = onNetworkClick
            )
            
            // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
            StorageIndicator(
                storagePercentage = storagePercentage,
                onIndicatorClick = onStorageClick
            )
        }
    }
}

@Composable
fun NetworkIndicator(
    isOnline: Boolean,
    isSyncing: Boolean,
    compactMode: Boolean = false,
    onClick: () -> Unit
) {
    val icon = when {
        !isOnline -> Icons.Default.Error
        isSyncing -> Icons.Default.Sync
        else -> Icons.Default.CheckCircle
    }
    
    val color = when {
        !isOnline -> Color.Red
        isSyncing -> Color(0xFFFFA500) // Orange
        else -> Color.Green
    }
    
    Row(
        verticalAlignment = Alignment.CenterVertically,
        modifier = Modifier.clickable { onClick() }
    ) {
        Icon(
            imageVector = icon,
            contentDescription = when {
                !isOnline -> "–û—Ñ—Ñ–ª–∞–π–Ω"
                isSyncing -> "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è..."
                else -> "–û–Ω–ª–∞–π–Ω"
            },
            tint = color,
            modifier = Modifier.size(20.dp)
        )
        if (!compactMode) {
            Spacer(modifier = Modifier.width(4.dp))
            Text(
                text = when {
                    !isOnline -> "–û—Ñ—Ñ–ª–∞–π–Ω"
                    isSyncing -> "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è..."
                    else -> "–û–Ω–ª–∞–π–Ω"
                },
                style = MaterialTheme.typography.labelSmall
            )
        }
    }
}

@Composable
fun NetworkIndicator(
    isOnline: Boolean,
    isSyncing: Boolean,
    compactMode: Boolean = false,
    onClick: () -> Unit
) {
    val icon = when {
        !isOnline -> Icons.Default.Error
        isSyncing -> Icons.Default.Sync
        else -> Icons.Default.CheckCircle
    }
    
    val color = when {
        !isOnline -> Color.Red
        isSyncing -> Color(0xFFFFA500) // Orange
        else -> Color.Green
    }
    
    Row(
        verticalAlignment = Alignment.CenterVertically,
        modifier = Modifier.clickable { onClick() }
    ) {
        Icon(
            imageVector = icon,
            contentDescription = when {
                !isOnline -> "–û—Ñ—Ñ–ª–∞–π–Ω"
                isSyncing -> "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è..."
                else -> "–û–Ω–ª–∞–π–Ω"
            },
            tint = color,
            modifier = Modifier.size(20.dp)
        )
        if (!compactMode) {
            Spacer(modifier = Modifier.width(4.dp))
            Text(
                text = when {
                    !isOnline -> "–û—Ñ—Ñ–ª–∞–π–Ω"
                    isSyncing -> "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è..."
                    else -> "–û–Ω–ª–∞–π–Ω"
                },
                style = MaterialTheme.typography.labelSmall
            )
        }
    }
}

@Composable
fun SyncStatusIndicator(
    isOnline: Boolean,
    pendingOperations: Int,
    isSyncing: Boolean
) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .padding(8.dp),
        horizontalArrangement = Arrangement.SpaceBetween,
        verticalAlignment = Alignment.CenterVertically
    ) {
        // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏
        Icon(
            imageVector = if (isOnline) Icons.Default.CheckCircle else Icons.Default.Error,
            contentDescription = null,
            tint = if (isOnline) Color.Green else Color.Red
        )
        
        Text(
            text = when {
                !isOnline -> "–û—Ñ—Ñ–ª–∞–π–Ω"
                isSyncing -> "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è..."
                pendingOperations > 0 -> "$pendingOperations –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏"
                else -> "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ"
            }
        )
        
        if (pendingOperations > 0 && isOnline) {
            Button(onClick = { /* –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ */ }) {
                Text("–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å")
            }
        }
    }
}

@Composable
fun TaskItem(
    task: Task,
    onTaskClick: (Task) -> Unit,
    hasConflict: Boolean = false
) {
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .padding(4.dp)
            .then(
                if (hasConflict) {
                    Modifier.border(2.dp, Color.Orange, RoundedCornerShape(8.dp))
                } else {
                    Modifier
                }
            ),
        colors = CardDefaults.cardColors(
            containerColor = if (hasConflict) Color.Orange.copy(alpha = 0.1f) else MaterialTheme.colorScheme.surface
        )
    ) {
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(12.dp),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.CenterVertically
        ) {
            Column(modifier = Modifier.weight(1f)) {
                Row(verticalAlignment = Alignment.CenterVertically) {
                    Text(
                        text = task.title,
                        style = MaterialTheme.typography.bodyLarge
                    )
                    if (hasConflict) {
                        Spacer(modifier = Modifier.width(8.dp))
                        Icon(
                            imageVector = Icons.Default.Warning,
                            contentDescription = "–ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π",
                            tint = Color.Orange,
                            modifier = Modifier.size(20.dp)
                        )
                        Text(
                            text = "–ö–æ–Ω—Ñ–ª–∏–∫—Ç",
                            style = MaterialTheme.typography.labelSmall,
                            color = Color.Orange,
                            modifier = Modifier.padding(start = 4.dp)
                        )
                    }
                }
                // –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–¥–∞—á–∏
            }
        }
    }
}
```

### 1.6. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ—Ç—Ä–∏—Å–æ–≤–∫–µ –∑–∞–¥–∞—á –∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—á–µ—Ä–µ–¥–∏

- **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ.** –ß–µ–∫–±–æ–∫—Å/–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ —Ä–µ–∞–≥–∏—Ä—É—é—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `OfflineRepository.addToSyncQueue(...)`. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ —ç–ª–µ–º–µ–Ω—Ç —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –æ—Ç–≤–µ—Ç–æ–º.
- **–¢–æ—á–µ—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.** –ö–∞–∂–¥–æ–µ –ø–æ–ª–µ –∑–∞–¥–∞—á–∏ (title, –æ–ø–∏—Å–∞–Ω–∏–µ, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø–µ, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –≤—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —Ç.–¥.) –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–µ observable-—Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞. –ù–∏–∫–∞–∫–∏—Ö –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö `tasks = tasks.map { ... }` ‚Äî –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ.
- **–£–¥–∞–ª–µ–Ω–∏—è –±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞.** –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ —É–¥–∞–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ composable —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º `key`. –û—Å—Ç–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã `LazyColumn` –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ –ª–∏—à—å —Å–º–µ—â–∞—é—Ç—Å—è, –±–µ–∑ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è/–º–µ—Ä—Ü–∞–Ω–∏—è.
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –æ—á–µ—Ä–µ–¥–∏.** –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ ¬´–æ–ø–µ—Ä–∞—Ü–∏—è –≤ –æ—á–µ—Ä–µ–¥–∏¬ª (–∏–∫–æ–Ω–∫–∞/–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä). –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–ø–∞–¥–∞–µ—Ç –±–µ–∑ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ —Å–ø–∏—Å–∫–∞.
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π.** –û–ø–µ—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ—Å—É—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏: –º–∏–Ω–∏–º—É–º `revision`, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ `payloadHash`/`ETag`. –ü–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –∫–ª–∏–µ–Ω—Ç —Å–≤–µ—Ä—è–µ—Ç –≤–µ—Ä—Å–∏—é/—Ö–µ—à –∏ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ.
- **–ü–µ—Ä–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ –∑–∞–ø—Ä–æ—Å—É.** –ï—Å–ª–∏ –≤–µ—Ä—Å–∏–∏ –Ω–µ —Å–æ–≤–ø–∞–ª–∏, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ—á–µ—á–Ω—ã–π –¥–æ–≥—Ä—É–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏ –∏–ª–∏ –ø–æ–ª–Ω—ã–π —Ä–µ—Å–∏–Ω–∫, –ø—Ä–∏ —ç—Ç–æ–º UI –æ—Å—Ç–∞—ë—Ç—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º.

–≠—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è —ç–∫—Ä–∞–Ω–æ–≤ ¬´–°–µ–≥–æ–¥–Ω—è¬ª, ¬´–í—Å–µ –∑–∞–¥–∞—á–∏¬ª –∏ –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö —Å–ø–∏—Å–∫–æ–≤, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –æ—Ñ–ª–∞–π–Ω-–æ—á–µ—Ä–µ–¥—å—é.

#### –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ö–µ—à–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```text
1. –ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è tasksLocal –∏ hashLocal = sha256(tasksLocal).
2. –°–µ—Ä–≤–µ—Ä –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –¥–µ–ª—å—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—É—é –∑–∞–¥–∞—á—É 42) + hashServer.
3. –ö–ª–∏–µ–Ω—Ç –ø—Ä–∏–º–µ–Ω—è–µ—Ç –¥–µ–ª—å—Ç—É ‚ûú tasksLocal' –∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç hashLocal' = sha256(tasksLocal').
4. –ï—Å–ª–∏ hashLocal' == hashServer ‚Üí –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏.
5. –ï—Å–ª–∏ hashLocal' != hashServer ‚Üí –∑–Ω–∞—á–∏—Ç –æ—Å—Ç–∞–ª–∏—Å—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è:
   ‚Ä¢ –ø—Ä–æ–≤–µ—Ä—è–µ–º –æ—á–µ—Ä–µ–¥—å (–≤–æ–∑–º–æ–∂–Ω–æ, –µ—Å—Ç—å –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏);
   ‚Ä¢ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á, —á—Ç–æ–±—ã –≤—ã—Ä–æ–≤–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ.
```

## 3. –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 2.1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ä–µ–≤–∏–∑–∏–π

#### –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π merge** (–¥–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π):
   - `description` - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - `assigned_user_ids` - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤

2. **–†—É—á–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ** (–¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π, —Ç–æ–ª—å–∫–æ –≤–µ–±-–≤–µ—Ä—Å–∏—è):
   - `reminder_time` - –ø–æ–∫–∞–∑ –¥–∏–∞–ª–æ–≥–∞ –≤—ã–±–æ—Ä–∞ (–≤–µ–±)
   - `task_type`, `recurrence_type` - –ø–æ–∫–∞–∑ –¥–∏–∞–ª–æ–≥–∞ –≤—ã–±–æ—Ä–∞ (–≤–µ–±)
   - `title` - –ø–æ–∫–∞–∑ –¥–∏–∞–ª–æ–≥–∞ –≤—ã–±–æ—Ä–∞ (–≤–µ–±)
   - –í Android-–≤–µ—Ä—Å–∏–∏: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —á–µ—Ä–µ–∑ –≤–µ–±

3. **Last Write Wins** (–¥–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π):
   - `active`, `completed` - –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ

### 2.2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ú–µ—Ç—Ä–∏–∫–∏: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É–¥–∞—á–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

### 2.3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –¢–µ—Å—Ç—ã –¥–ª—è Android

1. –¢–µ—Å—Ç—ã Room Database
2. –¢–µ—Å—Ç—ã –æ—á–µ—Ä–µ–¥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
3. –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
4. –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –º–æ–∫-—Å–µ—Ä–≤–µ—Ä–æ–º

## 3. –ò–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –≠—Ç–∞–ø 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π)
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∑–∞–π–Ω–∞ –∏–∫–æ–Ω–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –∏–∫–æ–Ω–æ–∫ –¥–ª—è –≤–µ–± –∏ Android
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏–∫–æ–Ω–æ–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (1-2 –¥–Ω—è)
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è `storage.js` –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ IndexedDB —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ Room Database –¥–ª—è Android
- [ ] –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –∫—ç—à–∞

### –≠—Ç–∞–ø 2: –û—á–µ—Ä–µ–¥—å –æ–ø–µ—Ä–∞—Ü–∏–π (1-2 –¥–Ω—è)
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è Android
- [ ] –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –ª–µ–≥–∫–∏–µ (complete/uncomplete/delete) –∏ –ø–æ–ª–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- [ ] –§—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏
- [ ] –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –±–∞–π—Ç–∞—Ö
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏ –ø–æ –æ–±—ä–µ–º—É (5 –ú–ë –≤–º–µ—Å—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞)
- [ ] –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏

### –≠—Ç–∞–ø 3: –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (2-3 –¥–Ω—è)
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `sync.js` –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `SyncService` –¥–ª—è Android
- [ ] –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ä–µ–≤–∏–∑–∏–π

### –≠—Ç–∞–ø 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º (2-3 –¥–Ω—è)
- [ ] –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `api.js` –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- [ ] –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `app.js` –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- [ ] –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `TasksApi.kt` –¥–ª—è Android
- [ ] –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `MainActivity.kt` –¥–ª—è Android

### –≠—Ç–∞–ø 5: UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (1-2 –¥–Ω—è)
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞ –¥–ª—è Android
- [ ] –ë–∞–Ω–Ω–µ—Ä—ã –æ—Ñ—Ñ–ª–∞–π–Ω–∞
- [ ] –î–∏–∞–ª–æ–≥–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### –≠—Ç–∞–ø 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ (2-3 –¥–Ω—è)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–∞
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

## 5. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ—Ñ–ª–∞–π–Ω —Å –ª–æ–∫–∞–ª—å–Ω—ã–º –∫—ç—à–µ–º
- [ ] –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –ø—Ä–∏ –æ—Ñ—Ñ–ª–∞–π–Ω–µ
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ä–µ–≤–∏–∑–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –î–∏–∞–ª–æ–≥–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ –≤–µ–±-–≤–µ—Ä—Å–∏–∏
- [ ] –í Android-–≤–µ—Ä—Å–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π merge
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ —Å—Ç—Ä–æ–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏—è—Ö
- [ ] –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∫–æ–Ω–∫–∏ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞
- [ ] UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ —Å—Ç—Ä–æ–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ó–∞–¥–∞—á–∏ —Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–º–µ—á–µ–Ω—ã –≤ –≤–∏–¥–∞—Ö "–°–µ–≥–æ–¥–Ω—è" –∏ "–í—Å–µ –∑–∞–¥–∞—á–∏"
- [ ] –ü–æ–º–µ—Ç–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏
- [ ] –û—á–µ—Ä–µ–¥—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ –ø–æ –æ–±—ä–µ–º—É –¥–∞–Ω–Ω—ã—Ö (5 –ú–ë), –∞ –Ω–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- [ ] –õ–µ–≥–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (complete/uncomplete/delete) –∑–∞–Ω–∏–º–∞—é—Ç –º–∏–Ω–∏–º—É–º –ø–∞–º—è—Ç–∏
- [ ] –°—Ç—Ä–æ–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–≤–µ—Ä—Ö—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ —Å–µ—Ç–∏ –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- [ ] –ò–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –≤–µ–± –∏ Android
- [ ] –°—Ç—Ä–æ–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö
- [ ] –ò–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö
- [ ] –¢–æ—á–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É –∫—ç—à–∞ –∏ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è
- [ ] –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

## 6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è Android - SQLCipher, –¥–ª—è –≤–µ–±–∞ - crypto.subtle)
- –§–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (Service –¥–ª—è Android, Web Worker –¥–ª—è –≤–µ–±–∞)
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
- –°–∂–∞—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –∫—ç—à–µ
- –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏


