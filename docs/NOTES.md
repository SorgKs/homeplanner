## PowerShell: ошибка синтаксиса при использовании `&&`

Дата: 2025-11-06

### Симптомы
- При выполнении команды с последовательным оператором `&&` в классическом PowerShell (v5) возникает ошибка парсера:

```
... "&&" не является допустимым именем токена ... ParserError InvalidEndOfLine
```

### Причина
- В Windows PowerShell 5.x оператор `&&` не поддерживается (он доступен в PowerShell 7+). 

### Корректные команды (PowerShell 5.x)
- Вместо `&&` используйте последовательное выполнение команд с `;` или раздельными строками:

```powershell
Set-Location -Path D:\Dev\HomePlanner
git clone https://github.com/SorgKs/homeplanner .
```

### Примечания
- Для внешних процессов в PowerShell избегайте использования `| cat` для вывода; применяйте родные средства PowerShell (`Get-Content`, `Out-File`, и т.д.).

---

## Pytest: запуск из активированного `.venv`

Дата: 2025-11-11

### Симптомы
- Команда `python -m pytest` завершалась ошибкой `No module named pytest`, если виртуальное окружение `.venv` не было активировано перед запуском.

### Решение
- Сначала активировать окружение:

```powershell
Set-Location D:\Dev\HomePlanner
.\.venv\Scripts\Activate.ps1
```

- После активации запуск `python -m pytest` выполняется успешно и находит установленный пакет `pytest` внутри `.venv`.

### Примечания
- Для PowerShell важно запускать `pytest` именно через `python -m pytest`, чтобы использовать интерпретатор текущего окружения.
- Если требуется запустить отдельный тест, допустим следующий формат:

```powershell
python -m pytest tests\test_task_service.py::TestTaskService::test_get_today_tasks_skips_future_recurring
```

---

## Режим "Сегодня": визуальные категории задач

Дата: 2025-11-14

### Требования
- Отображаем все задачи в одной ленте, но применяем разные стили для трёх категорий:
  1. **Просроченные** — `reminder_time` (или `next_due_date`, если первого нет) приходится на вчерашний день или более раннюю дату.
  2. **Текущие** — дата та же что и у виртуального «сегодня», а время уже наступило.
  3. **Планируемые** — дата сегодня, но время ещё впереди.
- Порядок вывода фиксирован: сначала просроченные, затем текущие, в конце запланированные; внутри каждой группы сортировка по возрастанию времени.
- Источник текущего времени — `timeControlState.virtual_now`, когда включено переопределение через админ-панель. Если переопределение выключено или данных нет, используем реальные часы (`timeControlState.real_now` или `new Date()`).
- Визуальное разделение делаем не заголовками, а CSS-классами (`task-overdue`, `task-current`, `task-planned`): разные цвета левой границы, фон/прозрачность и т.д.




